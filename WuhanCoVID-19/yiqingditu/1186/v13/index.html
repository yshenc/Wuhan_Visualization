<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="static/styles.css">
	<title>Flourish template: Projection map</title></head>
	<body>
	

<script>window.Flourish = {"static_prefix":"static","environment":"live"};</script><script>var template=function(t){"use strict";Math.hypot=Math.hypot||function(){for(var t=0,e=0,n=0;n<arguments.length;n+=1){var r=Math.abs(Number(arguments[n]));t<r&&(e*=t/r*(t/r),t=r),e+=0===r&&0===t?0:r/t*(r/t)}return t===1/0?1/0:t*Math.sqrt(e)},Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isNaN=Number.isNaN||function(t){return t!=t};var i,a,l,_={projection:"Eckert IV",fit:"world",centering:"center",longitude:0,latitude:0,roll:0,padding:1,min_area:0,zoom:1,aspect:null,point_show:!0,point_sort:!1,point_min_radius:0,point_max_radius:10,point_default_radius:2,point_max_value:null,point_fill:"#000000",point_opacity:.5,point_categorical_colors:{},legend_show:!0,legend_interaction:!0,scale_legend_show:!0,point_popup:{},point_search:!0,map_show:!0,map_fill:"#E8F0EC",map_fill_opacity:1,map_show_stroke:!0,map_highlight_stroke_inner:"#000000",map_highlight_stroke_outer:"#ffffff",map_highlight_stroke_width:4,map_stroke:"#ffffff",map_stroke_width:.4,map_stroke_opacity:1,map_scale_type:"continuous",map_numeric_type:"sequential",choropleth_legend_show:!0,sequential_palette:"Blues",diverging_palette:"RdBu",reverse_scale_colors:!1,sequential_custom_min:"#ffffff",sequential_custom_max:"#000000",sequential_color_space:"rgb",diverging_custom_min:"#A50026",diverging_custom_mid:"#F9F7AE",diverging_custom_max:"#016837",diverging_color_space:"rgb",legend_min:null,legend_max:null,legend_labels:"thresholds",legend_labels_custom:"",legend_enhancement:"none",strip_style:"light",strip_marker_opacity_type:"auto",strip_marker_opacity:.1,underflow_value:null,midpoint_value:null,overflow_value:null,discrete_mode:"fixed",n_bins:8,custom_thresholds:"",n_nice_ticks:5,map_categorical_colors:{palette:["#66C5CC","#F6CF71","#F89C74","#DCB0F2","#87C55F","#9EB9F3","#FE88B1","#C9DB74","#8BE0A4","#B497E7","#D3B484","#B3B3B3"]},choropleth_missing_values:"pattern",missing_pattern_size:5,missing_pattern_opacity:1,missing_pattern_color_1:"#dddddd",missing_pattern_color_2:"#eeeeee",map_search:!0,choropleth_popup:{show_pointer:!1},map_shadow:!1,map_shadow_offset_x:-5,map_shadow_offset_y:5,map_shadow_blur:10,map_shadow_color:"#605E5E",map_shadow_opacity:.7,graticule_show:!1,graticule_color:"#aaaaaa",graticule_opacity:1,graticule_width:.5,graticule_separation_longitude:20,graticule_separation_latitude:20,globe_show:!1,globe_color:"#CDD6D6",zoom_on:!0,zoom_animation_duration:2,zoom_scaling_mode:"sqrt",zoom_message_key:"Hold down {{KEY}} + scroll to zoom",zoom_message_touch:"Use two fingers to zoom and pan",legend_color:"#333333",layout:{},region_controls:{},localization:{},map_formatting:{},point_formatting:{},hovered_feature:null,sticky_hover:!1,filter:{},reloader:{},focus:{lon:null,lat:null,zoom:null}};var n,r,o,c,u,s,f,d,p,h=Object.freeze({"stack-default":["header","controls","primary","footer"],"stack-2":["primary","header","controls","footer"],"stack-3":["header","primary","controls","footer"],"stack-4":["controls","primary","header","footer"]});function g(){n.style.textAlign=E.header_align,n.style.margin=0,n.style.borderTop="top"==E.header_border?E.header_border_width+"px "+E.header_border_style+" "+E.header_border_color:null,n.style.borderBottom="bottom"==E.header_border?E.header_border_width+"px "+E.header_border_style+" "+E.header_border_color:null,n.style.paddingBottom=E.title||E.subtitle?E.text?("custom"!=E.text_size?E.text_size/2:E.text_size_custom/2)+"rem":E.subtitle?("custom"!=E.subtitle_size?E.subtitle_size/2:E.subtitle_size_custom/2)+"rem":E.title?("custom"!=E.title_size?E.title_size/2:E.title_size_custom/2)+"rem":void 0:"",r.innerHTML=E.title?E.title:"",r.style.fontSize=("custom"!=E.title_size?E.title_size:E.title_size_custom)+"rem",r.style.lineHeight=E.title_line_height,r.style.fontWeight=E.title_weight,r.style.color=E.title_color,r.style.margin=0,r.style.lineHeight=E.title_color,r.style.paddingTop=E.title?("custom"==E.title_space_above?E.title_space_above_custom:E.title_space_above)+"rem":0,o.innerHTML=E.subtitle?E.subtitle:"",o.style.fontSize=("custom"!=E.subtitle_size?E.subtitle_size:E.subtitle_size_custom)+"rem",o.style.lineHeight=E.subtitle_line_height,o.style.fontWeight=E.subtitle_weight,o.style.color=E.subtitle_color,o.style.margin=0,o.style.paddingTop=E.subtitle?("custom"==E.subtitle_space_above?E.subtitle_space_above_custom:E.subtitle_space_above)+"rem":0,c.innerHTML=E.text?E.text:"",c.style.fontSize=("custom"!=E.text_size?E.text_size:E.text_size_custom)+"rem",c.style.lineHeight=E.text_line_height,c.style.fontWeight=E.text_weight,c.style.margin=0,c.style.color=E.text_color,c.style.paddingTop=E.text?("custom"==E.text_space_above?E.text_space_above_custom:E.text_space_above)+"rem":0,u.style.display=E.header_logo_enabled?"":"none",u.style.position="inside"==E.header_logo_align?"":"fixed",u.style.height=E.header_logo_height+"rem",u.style.top="outside"==E.header_logo_align?0:"",u.style.left="outside"==E.header_logo_align&&"left"==E.header_logo_position_outside?0:"",u.style.right="outside"==E.header_logo_align&&"right"==E.header_logo_position_outside?0:"",u.style.marginTop=E.header_logo_margin_top+"rem",u.style.marginBottom=E.header_logo_margin_bottom+"rem",u.style.marginLeft=E.header_logo_margin_left+"rem",u.style.marginRight=E.header_logo_margin_right+"rem",u.style.float="top"==E.header_logo_position_inside||"outside"==E.header_logo_align?"":E.header_logo_position_inside,u.style.width="auto",u.src=E.header_logo_src}function m(t){return"string"==typeof t&&null!=t.match(/^https?:\/\//i)}var v=!1;function b(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function y(){var t;return(t=document.createElement("style")).type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(t),(s=document.createElement("footer")).className="flourish-footer",(f=document.createElement("div")).className="flourish-footer-text",(p=document.createElement("a")).target="_blank",(d=document.createElement("img")).className="flourish-footer-logo",p.appendChild(d),s.appendChild(f),s.appendChild(p),s}function w(){var t=[{name:E.source_name,url:E.source_url},{name:E.multiple_sources?E.source_name_2:"",url:E.multiple_sources?E.source_url_2:""},{name:E.multiple_sources?E.source_name_3:"",url:E.multiple_sources?E.source_url_3:""}].filter(function(t){return t.name||t.url});v=0<t.length||E.footer_note||m(E.footer_logo_src)&&E.footer_logo_enabled,s.style.display="flex",s.style.height=v?null:0,s.style.width="100%",s.style.paddingTop=E.source_name||E.source_name_2||E.source_name_3||E.source_url||E.source_url_2||E.source_url_3||E.footer_note||m(E.footer_logo_src)&&E.footer_logo_enabled?G(E.footer_text_size)/2+"px":"",s.style.borderTop="top"==E.footer_border?E.footer_border_width+"px "+E.footer_border_style+" "+E.footer_border_color:"",s.style.borderBottom="bottom"==E.footer_border?E.footer_border_width+"px "+E.footer_border_style+" "+E.footer_border_color:"","justify"==E.footer_align?s.style.justifyContent="space-between":"left"==E.footer_align?s.style.justifyContent="flex-start":"right"==E.footer_align?s.style.justifyContent="flex-end":"center"==E.footer_align&&(s.style.justifyContent="center"),s.style.fontSize=E.footer_text_size+"rem",s.style.color=E.footer_text_color;var o=document.createElement("span");t.forEach(function(t,e){var n=document.createElement("p");if(0<e&&(n.innerText=", "),t.url){var r=document.createElement("a");r.innerText=t.name||t.url,r.href=b(t.url),r.target="_blank",n.appendChild(r)}else n.innerText+=t.name||t.url;o.innerHTML+=n.innerHTML}),f.style.order="left"==E.footer_logo_order?2:"",f.style.display="flex",f.style.alignItems=E.footer_align_vertical;var e="<p>";e+=""!==o.innerHTML?E.source_label+" "+o.innerHTML:"",e+=E.footer_note?(""!==o.innerHTML?" • ":"")+E.footer_note:"",e+="</p>",f.innerHTML=e,d.src=m(E.footer_logo_src)?E.footer_logo_src:"",d.style.height=E.footer_logo_height+"rem",d.style.marginLeft="right"==E.footer_logo_order?E.footer_logo_margin+"rem":"",d.style.marginRight="left"==E.footer_logo_order?E.footer_logo_margin+"rem":"",d.style.verticalAlign=E.footer_align_vertical,d.style.display=m(E.footer_logo_src)&&E.footer_logo_enabled?"":"none",p.href=""==E.footer_logo_link_url?"":b(E.footer_logo_link_url),p.style.cursor=""==E.footer_logo_link_url?"default":"pointer"}function x(){!function(){if(E.body_font&&E.body_font.url!==a){a=E.body_font.url,l.setAttribute("href",a),document.body.style.fontFamily=E.body_font.name;var o="";["mobile_small","mobile_big","tablet","desktop","big_screen"].forEach(function(t,e){var n="@media(min-width: "+E["breakpoint_"+t]+"px) {\n",r="html { font-size:"+E["font_size_"+t]+"%; }";o+=(0==e?"":n)+r+(0==e?"":"\n}")+"\n\n"}),i.innerHTML=o}}(),g(),w(),document.body.style.backgroundColor=E.background_color_enabled?E.background_color:"transparent",document.body.style.backgroundImage=E.background_image_enabled?"url("+E.background_image_src+")":"",document.body.style.backgroundSize=E.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=E.background_image_position;var t=C.wrapper.style;t.height="100vh",t.maxWidth=E.max_width?E.max_width+"px":"",t.padding=E.margin_top+"rem "+E.margin_right+"rem "+E.margin_bottom+"rem "+E.margin_left+"rem",t.borderTop=E.border.enabled?E.border.top.width+"px "+E.border.top.style+" "+E.border.top.color:"",t.borderRight=E.border.enabled?E.border.right.width+"px "+E.border.right.style+" "+E.border.right.color:"",t.borderBottom=E.border.enabled?E.border.bottom.width+"px "+E.border.bottom.style+" "+E.border.bottom.color:"",t.borderLeft=E.border.enabled?E.border.left.width+"px "+E.border.left.style+" "+E.border.left.color:"";var e=C.primary.outer.style,n=C.legend.outer.style,r=parseFloat(e.order)>parseFloat(n.order)?"above":"below";h[E.layout_order].forEach(function(t,e){C[t].outer.style.order=10*e}),e.flex="1 1 auto",e.height=null,I(r),n.textAlign=E.header_align,C.controls.outer.style.textAlign=E.header_align,C.primary.inner.style.height="100%";var o=("custom"==E.space_between_sections?E.space_between_sections_custom:E.space_between_sections)/2+"rem";S.map(function(t){var e=C[t],n=e.outer.style;return{name:t,height:z(e.inner),order:parseFloat(n.order),style:n}}).sort(function(t,e){return t.order-e.order}).filter(function(t){if(t.height)return!0;t.style.paddingBottom="",t.style.paddingTop=""}).forEach(function(t,e,n){t.style.paddingTop=e?o:"",t.style.paddingBottom=e<n.length-1?o:""})}var M=Object.freeze({body_font:{name:"Source Sans Pro",url:"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:0,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:null,breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:1.6,title_size_custom:1.6,title_line_height:1.2,title_color:"#333333",title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,subtitle:"",subtitle_size:1.6,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:"#666666",subtitle_weight:"normal",subtitle_space_above:0,subtitle_space_above_custom:1.5,text:"",text_size:1.2,text_size_custom:1.2,text_line_height:1.2,text_color:"#666666",text_weight:"normal",text_space_above:.5,text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_text_size:1,footer_text_color:"#aaaaaa",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_logo_enabled:!1,footer_logo_src:"",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right"});var E,k,T="Your web browser does not support the features used by this content. Consider updating to a modern browser.",S=["header","controls","legend","primary","footer"],C={};function e(t){return t.getBoundingClientRect().width}function z(t){return t.getBoundingClientRect().height}function A(){return C.wrapper}function N(t){return-1!==S.indexOf(t)?C[t].inner:null}function P(t){return C[t]||void 0===t?e("wrapper"==t||void 0===t?C.wrapper:C[t].outer):null}function F(t){return C[t]||void 0===t?"wrapper"==t||void 0===t?e(C.wrapper)-D("horizontal")-H("horizontal"):e(C[t].inner):null}function B(t){return C[t]||void 0===t?z("wrapper"==t||void 0===t?C.wrapper:C[t].outer):null}function L(t){return C[t]||void 0===t?"wrapper"==t||void 0===t?z(C.wrapper)-D("vertical")-H("vertical"):z(C[t].inner):null}function R(){return z(C.primary.outer)-j(C.primary.outer)}function q(){return e(C.primary.inner)}function j(t){return(parseFloat(getComputedStyle(t).paddingTop)||0)+(parseFloat(getComputedStyle(t).paddingBottom)||0)}function O(){return function(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return 999<t?650:599<t?575:400}()-D("vertical")-H("vertical")-["header","controls","legend","footer"].reduce(function(t,e){return t+B(e)},0)-j(C.primary.outer)}function D(t){var e;return"left"==t?e=E.margin_left:"right"==t?e=E.margin_right:"top"==t?e=E.margin_top:"bottom"==t?e=E.margin_bottom:"horizontal"==t?e=E.margin_left+E.margin_right:"vertical"==t&&(e=E.margin_top+E.margin_bottom),G(e)}function H(t){return E.border.enabled?"vertical"==t?E.border.top.width+E.border.bottom.width:"horizontal"==t?E.border.left.width+E.border.right.width:null:0}function U(t){if(!Flourish.fixed_height&&void 0!==Flourish.fixed_height){var e=null===t,n=C.primary,r=e?O():t;r+j(C.primary.outer)!==parseFloat(n.outer.style.height)&&(C.wrapper.style.height="",n.outer.style.flex="",n.inner.style.height=r+"px",Flourish.setHeight(e?null:B()))}}function I(t){var e=parseFloat(C.primary.outer.style.order);C.legend.outer.style.order=e+1*("below"===t.trim().toLowerCase()?1:-1)}function Y(t){var e=k.querySelector(".fl-layout-overlay-message");if(t){k.style.display="block";var n="string"==typeof t?t:T;e.innerHTML=n}else e.textContent="",k.style.display="none"}function G(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function W(){return k}function V(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]}function X(t){return(t=V(Math.abs(t)))?t[1]:NaN}var $,Z=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J(t){return new Q(t)}function Q(t){if(!(e=Z.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function K(t,e){var n=V(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}J.prototype=Q.prototype,Q.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var tt={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return K(100*t,e)},r:K,s:function(t,e){var n=V(t,e);if(!n)return t+"";var r=n[0],o=n[1],i=o-($=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,a=r.length;return i===a?r:a<i?r+new Array(i-a+1).join("0"):0<i?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+V(t,Math.max(0,e+i-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function et(t){return t}var nt,rt,ot,it=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function at(t){var e,l,c,x=t.grouping&&t.thousands?(l=t.grouping,c=t.thousands,function(t,e){for(var n=t.length,r=[],o=0,i=l[0],a=0;0<n&&0<i&&(e<a+i+1&&(i=Math.max(1,e-a)),r.push(t.substring(n-=i,n+i)),!((a+=i+1)>e));)i=l[o=(o+1)%l.length];return r.reverse().join(c)}):et,r=t.currency,M=t.decimal,E=t.numerals?(e=t.numerals,function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}):et,o=t.percent||"%";function a(t){var u=(t=J(t)).fill,s=t.align,f=t.sign,e=t.symbol,d=t.zero,p=t.width,h=t.comma,g=t.precision,m=t.trim,v=t.type;"n"===v?(h=!0,v="g"):tt[v]||(null==g&&(g=12),m=!0,v="g"),(d||"0"===u&&"="===s)&&(d=!0,u="0",s="=");var _="$"===e?r[0]:"#"===e&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===e?r[1]:/[%p]/.test(v)?o:"",y=tt[v],w=/[defgprs%]/.test(v);function n(t){var e,n,r,o=_,i=b;if("c"===v)i=y(t)+i,t="";else{var a=(t=+t)<0;if(t=y(Math.abs(t),g),m&&(t=function(t){t:for(var e,n=t.length,r=1,o=-1;r<n;++r)switch(t[r]){case".":o=e=r;break;case"0":0===o&&(o=r),e=r;break;default:if(0<o){if(!+t[r])break t;o=0}}return 0<o?t.slice(0,o)+t.slice(e+1):t}(t)),a&&0==+t&&(a=!1),o=(a?"("===f?f:"-":"-"===f||"("===f?"":f)+o,i=("s"===v?it[8+$/3]:"")+i+(a&&"("===f?")":""),w)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){i=(46===r?M+t.slice(e+1):t.slice(e))+i,t=t.slice(0,e);break}}h&&!d&&(t=x(t,1/0));var l=o.length+t.length+i.length,c=l<p?new Array(p-l+1).join(u):"";switch(h&&d&&(t=x(c+t,c.length?p-i.length:1/0),c=""),s){case"<":t=o+t+i+c;break;case"=":t=o+c+t+i;break;case"^":t=c.slice(0,l=c.length>>1)+o+t+i+c.slice(l);break;default:t=c+o+t+i}return E(t)}return g=null==g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=J(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(X(e)/3))),o=Math.pow(10,-r),i=it[8+r/3];return function(t){return n(o*t)+i}}}}function lt(t){return Math.max(0,-X(Math.abs(t)))}function ct(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(X(e)/3)))-X(Math.abs(t)))}function ut(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,X(e)-X(t))+1}nt=at({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),rt=nt.format,ot=nt.formatPrefix;var st=Object.freeze({input_decimal_separator:".",output_separators:",."});var ft=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0});function dt(o,t){var e,n,i=0<=o.n_dec?Math.floor(o.n_dec):Math.ceil(o.n_dec),a=t(",."+(0<i?i:"0")+"f"),r=t.decimal,l=t.thousands,c=o.strip_zeros&&0<i?new RegExp("\\"+r+"?0+$"):null,u=o.strip_separator&&l,s=(n=1,(e=o).transform_labels&&(n="multiply"===e.transform?e.multiply_divide_constant:"divide"===e.transform?1/e.multiply_divide_constant:Math.pow(10,e.exponentiate_constant)),function(t){return t*n});return i<0?function(t){var e=function(t,e){if(!e)return Math.round(t);e=0<e?Math.floor(e):Math.ceil(e);var n=Math.pow(10,e);return Math.round(t*n)/n}(s(t),i),n=u&&1e3<=e&&e<1e4,r=a(e);return n&&(r=r.replace(l,"")),o.prefix+r+o.suffix}:function(t){var e=s(t),n=u&&l&&1e3<=e&&e<1e4,r=a(e);return c&&(r=r.replace(c,"")),n&&(r=r.replace(l,"")),o.prefix+r+o.suffix}}function pt(e){for(var t in ft)void 0===e[t]&&(e[t]=ft[t]);return function(t){return dt(e,t)}}function ht(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function mt(){}var vt=1/.7,_t="\\s*([+-]?\\d+)\\s*",bt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wt=/^#([0-9a-f]{3,8})$/,xt=new RegExp("^rgb\\("+[_t,_t,_t]+"\\)$"),Mt=new RegExp("^rgb\\("+[yt,yt,yt]+"\\)$"),Et=new RegExp("^rgba\\("+[_t,_t,_t,bt]+"\\)$"),kt=new RegExp("^rgba\\("+[yt,yt,yt,bt]+"\\)$"),Tt=new RegExp("^hsl\\("+[bt,yt,yt]+"\\)$"),St=new RegExp("^hsla\\("+[bt,yt,yt,bt]+"\\)$"),Ct={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zt(){return this.rgb().formatHex()}function At(){return this.rgb().formatRgb()}function Nt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=wt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pt(e):3===n?new Rt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Rt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Rt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=xt.exec(t))?new Rt(e[1],e[2],e[3],1):(e=Mt.exec(t))?new Rt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Et.exec(t))?Ft(e[1],e[2],e[3],e[4]):(e=kt.exec(t))?Ft(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Tt.exec(t))?Dt(e[1],e[2]/100,e[3]/100,1):(e=St.exec(t))?Dt(e[1],e[2]/100,e[3]/100,e[4]):Ct.hasOwnProperty(t)?Pt(Ct[t]):"transparent"===t?new Rt(NaN,NaN,NaN,0):null}function Pt(t){return new Rt(t>>16&255,t>>8&255,255&t,1)}function Ft(t,e,n,r){return r<=0&&(t=e=n=NaN),new Rt(t,e,n,r)}function Bt(t){return t instanceof mt||(t=Nt(t)),t?new Rt((t=t.rgb()).r,t.g,t.b,t.opacity):new Rt}function Lt(t,e,n,r){return 1===arguments.length?Bt(t):new Rt(t,e,n,null==r?1:r)}function Rt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function qt(){return"#"+Ot(this.r)+Ot(this.g)+Ot(this.b)}function jt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ot(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Dt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new It(t,e,n,r)}function Ht(t){if(t instanceof It)return new It(t.h,t.s,t.l,t.opacity);if(t instanceof mt||(t=Nt(t)),!t)return new It;if(t instanceof It)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,l=i-o,c=(i+o)/2;return l?(a=e===i?(n-r)/l+6*(n<r):n===i?(r-e)/l+2:(e-n)/l+4,l/=c<.5?i+o:2-i-o,a*=60):l=0<c&&c<1?0:a,new It(a,l,c,t.opacity)}function Ut(t,e,n,r){return 1===arguments.length?Ht(t):new It(t,e,n,null==r?1:r)}function It(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Yt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ht(mt,Nt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:zt,formatHex:zt,formatHsl:function(){return Ht(this).formatHsl()},formatRgb:At,toString:At}),ht(Rt,Lt,gt(mt,{brighter:function(t){return t=null==t?vt:Math.pow(vt,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Rt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qt,formatHex:qt,formatRgb:jt,toString:jt})),ht(It,Ut,gt(mt,{brighter:function(t){return t=null==t?vt:Math.pow(vt,t),new It(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new It(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Rt(Yt(240<=t?t-240:t+120,o,r),Yt(t,o,r),Yt(t<120?t+240:t-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Gt=Math.PI/180,Wt=180/Math.PI,Vt=.96422,Xt=1,$t=.82521,Zt=4/29,Jt=6/29,Qt=3*Jt*Jt,Kt=Jt*Jt*Jt;function te(t){if(t instanceof ne)return new ne(t.l,t.a,t.b,t.opacity);if(t instanceof ce)return ue(t);t instanceof Rt||(t=Bt(t));var e,n,r=ae(t.r),o=ae(t.g),i=ae(t.b),a=re((.2225045*r+.7168786*o+.0606169*i)/Xt);return r===o&&o===i?e=n=a:(e=re((.4360747*r+.3850649*o+.1430804*i)/Vt),n=re((.0139322*r+.0971045*o+.7141733*i)/$t)),new ne(116*a-16,500*(e-a),200*(a-n),t.opacity)}function ee(t,e,n,r){return 1===arguments.length?te(t):new ne(t,e,n,null==r?1:r)}function ne(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function re(t){return Kt<t?Math.pow(t,1/3):t/Qt+Zt}function oe(t){return Jt<t?t*t*t:Qt*(t-Zt)}function ie(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ae(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function le(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ce)return new ce(t.h,t.c,t.l,t.opacity);if(t instanceof ne||(t=te(t)),0===t.a&&0===t.b)return new ce(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Wt;return new ce(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new ce(t,e,n,null==r?1:r)}function ce(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function ue(t){if(isNaN(t.h))return new ne(t.l,0,0,t.opacity);var e=t.h*Gt;return new ne(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ht(ne,ee,gt(mt,{brighter:function(t){return new ne(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ne(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Rt(ie(3.1338561*(e=Vt*oe(e))-1.6168667*(t=Xt*oe(t))-.4906146*(n=$t*oe(n))),ie(-.9787684*e+1.9161415*t+.033454*n),ie(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ht(ce,le,gt(mt,{brighter:function(t){return new ce(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new ce(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return ue(this).rgb()}}));var se=1.78277,fe=-.29227,de=-.90649,pe=1.97294,he=pe*de,ge=pe*se,me=se*fe- -.14861*de;function ve(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof _e)return new _e(t.h,t.s,t.l,t.opacity);t instanceof Rt||(t=Bt(t));var e=t.r/255,n=t.g/255,r=t.b/255,o=(me*r+he*e-ge*n)/(me+he-ge),i=r-o,a=(pe*(n-o)-fe*i)/de,l=Math.sqrt(a*a+i*i)/(pe*o*(1-o)),c=l?Math.atan2(a,i)*Wt-120:NaN;return new _e(c<0?c+360:c,l,o,t.opacity)}(t):new _e(t,e,n,null==r?1:r)}function _e(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ht(_e,ve,gt(mt,{brighter:function(t){return t=null==t?vt:Math.pow(vt,t),new _e(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new _e(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Gt,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),o=Math.sin(t);return new Rt(255*(e+n*(-.14861*r+se*o)),255*(e+n*(fe*r+de*o)),255*(e+n*(pe*r)),this.opacity)}}));var be="$";function ye(){}function we(t,e){var n=new ye;if(t instanceof ye)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==e)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e(r=t[o],o,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function xe(){}ye.prototype=we.prototype={constructor:ye,has:function(t){return be+t in this},get:function(t){return this[be+t]},set:function(t,e){return this[be+t]=e,this},remove:function(t){var e=be+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===be&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===be&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===be&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===be&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===be&&++t;return t},empty:function(){for(var t in this)if(t[0]===be)return!1;return!0},each:function(t){for(var e in this)e[0]===be&&t(this[e],e.slice(1),this)}};var Me=we.prototype;function Ee(t,e){var n=new xe;if(t instanceof xe)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}xe.prototype=Ee.prototype={constructor:xe,has:Me.has,add:function(t){return this[be+(t+="")]=t,this},remove:Me.remove,clear:Me.clear,values:Me.keys,size:Me.size,empty:Me.empty,each:Me.each};var ke=(1+Math.sqrt(5))/2;var Te=Object.freeze({palette:["#1D6996","#EDAD08","#73AF48","#94346E","#38A6A5","#E17C05","#5F4690","#0F8554","#6F4070","#CC503E","#994E95","#666666"],extend:!0,advanced:!1,hue_rotation_angle:222.49,custom_palette:""});function Se(f,e){var d={},o=function(t){if("string"==typeof t)return"function"==typeof e?e(t):e?t.toLowerCase().replace(/\s+/g,""):t;t=""+t};for(var t in Te)void 0===f[t]&&(f[t]=Te[t]);return{find:function(t){return d[o(t)]},updateColors:function(t){d={};var c,e=Ee(t.map(o)).values(),u=f.palette,s=u.length;f.extend?e.forEach(function(t,e){if(e<s)d[t]=u[e];else{if(e===s){for(var n,r=u.map(function(t){return le(t)}),o=r.reduce(function(t,e){return t+e.c},0)/s,i=r.reduce(function(t,e){return t+e.l},0)/s,a=s;n=r[--a].h,isNaN(n)&&0<a;);var l=f.advanced?f.hue_rotation_angle:Te.hue_rotation_angle;(c=function(t,e){e=void 0!==e?e:360/ke;var n=le(t=t||"#FF0000"),r=n.h,o=n.c,i=n.l,a=0;return function(){var t=a++*e;return Nt(le((r+t)%360,o,i)).hex()}}(le(n,o,i).toString(),l))()}d[t]=c()}}):e.forEach(function(t,e){d[t]=u[e%s]}),f.custom_palette.split("\n").filter(function(t){return t}).forEach(function(t){var e=t.lastIndexOf(":");if(-1!==e){var n=o(t.slice(0,e).trim()),r=t.slice(e+1).trim();n&&r&&(d[n]=r)}})}}}var Ce="http://www.w3.org/1999/xhtml",ze={svg:"http://www.w3.org/2000/svg",xhtml:Ce,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ae(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),ze.hasOwnProperty(e)?{space:ze[e],local:t}:t}function Ne(t){var e=Ae(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ce&&t.documentElement.namespaceURI===Ce?t.createElement(n):t.createElementNS(e,n)}})(e)}function Pe(){}function Fe(t){return null==t?Pe:function(){return this.querySelector(t)}}function Be(){return[]}function Le(t){return null==t?Be:function(){return this.querySelectorAll(t)}}function Re(t){return function(){return this.matches(t)}}function qe(t){return new Array(t.length)}function je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}je.prototype={constructor:je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Oe="$";function De(t,e,n,r,o,i){for(var a,l=0,c=e.length,u=i.length;l<u;++l)(a=e[l])?(a.__data__=i[l],r[l]=a):n[l]=new je(t,i[l]);for(;l<c;++l)(a=e[l])&&(o[l]=a)}function He(t,e,n,r,o,i,a){var l,c,u,s={},f=e.length,d=i.length,p=new Array(f);for(l=0;l<f;++l)(c=e[l])&&(p[l]=u=Oe+a.call(c,c.__data__,l,e),u in s?o[l]=c:s[u]=c);for(l=0;l<d;++l)(c=s[u=Oe+a.call(t,i[l],l,i)])?((r[l]=c).__data__=i[l],s[u]=null):n[l]=new je(t,i[l]);for(l=0;l<f;++l)(c=e[l])&&s[p[l]]===c&&(o[l]=c)}function Ue(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function Ie(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ye(t,e){return t.style.getPropertyValue(e)||Ie(t).getComputedStyle(t,null).getPropertyValue(e)}function Ge(t){return t.trim().split(/^|\s+/)}function We(t){return t.classList||new Ve(t)}function Ve(t){this._node=t,this._names=Ge(t.getAttribute("class")||"")}function Xe(t,e){for(var n=We(t),r=-1,o=e.length;++r<o;)n.add(e[r])}function $e(t,e){for(var n=We(t),r=-1,o=e.length;++r<o;)n.remove(e[r])}function Ze(){this.textContent=""}function Je(){this.innerHTML=""}function Qe(){this.nextSibling&&this.parentNode.appendChild(this)}function Ke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tn(){return null}function en(){var t=this.parentNode;t&&t.removeChild(this)}function nn(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function rn(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Ve.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};var on={},an=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(on={mouseenter:"mouseover",mouseleave:"mouseout"}));function ln(n,t,e){return n=cn(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function cn(n,r,o){return function(t){var e=an;an=t;try{n.call(this,this.__data__,r,o)}finally{an=e}}}function un(i){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,o=t.length;n<o;++n)e=t[n],i.type&&e.type!==i.type||e.name!==i.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function sn(c,u,s){var f=on.hasOwnProperty(c.type)?ln:cn;return function(t,e,n){var r,o=this.__on,i=f(u,e,n);if(o)for(var a=0,l=o.length;a<l;++a)if((r=o[a]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=i,r.capture=s),void(r.value=u);this.addEventListener(c.type,i,s),r={type:c.type,name:c.name,value:u,listener:i,capture:s},o?o.push(r):this.__on=[r]}}function fn(t,e,n){var r=Ie(t),o=r.CustomEvent;"function"==typeof o?o=new o(e,n):(o=r.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}var dn=[null];function pn(t,e){this._groups=t,this._parents=e}function hn(){return new pn([[document.documentElement]],dn)}function gn(t){return"string"==typeof t?new pn([[document.querySelector(t)]],[document.documentElement]):new pn([[t]],dn)}function mn(){for(var t,e=an;t=e.sourceEvent;)e=t;return e}function vn(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function _n(t){var e=mn();return e.changedTouches&&(e=e.changedTouches[0]),vn(t,e)}function bn(t,e,n){arguments.length<3&&(n=e,e=mn().changedTouches);for(var r,o=0,i=e?e.length:0;o<i;++o)if((r=e[o]).identifier===n)return vn(t,r);return null}pn.prototype=hn.prototype={constructor:pn,select:function(t){"function"!=typeof t&&(t=Fe(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a,l=e[o],c=l.length,u=r[o]=new Array(c),s=0;s<c;++s)(i=l[s])&&(a=t.call(i,i.__data__,s,l))&&("__data__"in i&&(a.__data__=i.__data__),u[s]=a);return new pn(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Le(t));for(var e=this._groups,n=e.length,r=[],o=[],i=0;i<n;++i)for(var a,l=e[i],c=l.length,u=0;u<c;++u)(a=l[u])&&(r.push(t.call(a,a.__data__,u,l)),o.push(a));return new pn(r,o)},filter:function(t){"function"!=typeof t&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],l=a.length,c=r[o]=[],u=0;u<l;++u)(i=a[u])&&t.call(i,i.__data__,u,a)&&c.push(i);return new pn(r,this._parents)},data:function(t,e){if(!t)return h=new Array(this.size()),s=-1,this.each(function(t){h[++s]=t}),h;var n,r=e?He:De,o=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=i.length,l=new Array(a),c=new Array(a),u=new Array(a),s=0;s<a;++s){var f=o[s],d=i[s],p=d.length,h=t.call(f,f&&f.__data__,s,o),g=h.length,m=c[s]=new Array(g),v=l[s]=new Array(g);r(f,d,m,v,u[s]=new Array(p),h,e);for(var _,b,y=0,w=0;y<g;++y)if(_=m[y]){for(w<=y&&(w=y+1);!(b=v[w])&&++w<g;);_._next=b||null}}return(l=new pn(l,o))._enter=c,l._exit=u,l},enter:function(){return new pn(this._enter||this._groups.map(qe),this._parents)},exit:function(){return new pn(this._exit||this._groups.map(qe),this._parents)},join:function(t,e,n){var r=this.enter(),o=this,i=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(o=e(o)),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),l=0;l<i;++l)for(var c,u=e[l],s=n[l],f=u.length,d=a[l]=new Array(f),p=0;p<f;++p)(c=u[p]||s[p])&&(d[p]=c);for(;l<r;++l)a[l]=e[l];return new pn(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,o=t[e],i=o.length-1,a=o[i];0<=--i;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n||(n=Ue);for(var e=this._groups,r=e.length,o=new Array(r),i=0;i<r;++i){for(var a,l=e[i],c=l.length,u=o[i]=new Array(c),s=0;s<c;++s)(a=l[s])&&(u[s]=a);u.sort(t)}return new pn(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o,i=e[n],a=0,l=i.length;a<l;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,e){var n=Ae(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):Ye(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=Ge(t+"");if(arguments.length<2){for(var r=We(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Xe:$e)(this,t)}}:e?function(t){return function(){Xe(this,t)}}:function(t){return function(){$e(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?Ze:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Je:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Qe)},lower:function(){return this.each(Ke)},append:function(t){var e="function"==typeof t?t:Ne(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:Ne(t),r=null==e?tn:"function"==typeof e?e:Fe(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(en)},clone:function(t){return this.select(t?rn:nn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,o,i=(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}),a=i.length;if(!(arguments.length<2)){for(l=e?sn:un,null==n&&(n=!1),r=0;r<a;++r)this.each(l(i[r],e,n));return this}var l=this.node().__on;if(l)for(var c,u=0,s=l.length;u<s;++u)for(r=0,c=l[u];r<a;++r)if((o=i[r]).type===c.type&&o.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return fn(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return fn(this,t,e)}})(t,e))}};var yn=".controls-container {\tdisplay: inline-block;}.controls-container, .controls-container * {\tbox-sizing: border-box;\ttext-align: left;\tvertical-align: bottom;}.button-container .button, .dropdown .current {\toverflow: hidden;\ttext-overflow: ellipsis;\theight: 100%;\twhite-space: nowrap;\ttext-align: left;\tfont-size: 12px;\tline-height: 21px;}.button-container .button, .dropdown .current, .dropdown .list .list-item {\twhite-space: nowrap;}.slider, .slider-play {\tpointer-events: all;\tvertical-align: bottom;\tdisplay: inline-block;}.button {\tdisplay: inline-block;\tcursor: pointer}.button:hover {\topacity: .5}.button.selected, .button.selected:hover {\tcolor: #fff;\tcursor: default;\topacity: 1;\tbackground-image: linear-gradient(transparent, rgba(0, 0, 0, .05) 40%, rgba(0, 0, 0, .1))}.button-container {\tpointer-events: all;\twidth: auto;\tline-height: 0;\tmargin-bottom: 18px;\twidth: 100%;\ttext-align: center;}.button-container.button-group {\tdisplay: table;\tborder: 1px solid #ccc;\twidth: 100%;\ttable-layout: fixed;\tborder-radius: 3px;\tmargin-bottom: 20px;\toverflow: hidden;}.button-container .button {\tfont-size: 12px;\tborder: 1px solid #ccc;\tbackground: #fff;\tpadding: 0.1em 0.6em 0;\tcolor: #333;\tfont-weight: 400;\ttext-align: center;\theight: 24px;\tborder-radius: 3px;\tmargin: 0 1px 2px;}.button-container.button-group .button {\tborder: none;\tborder-left: 1px solid #ccc;\tborder-radius: 0;\tdisplay: table-cell;\ttext-align: center;\tvertical-align: middle;\tmargin: 0;\theight: 22px;}.button-container .button:hover {\tbackground: #eee;\topacity: .8}.button-container.button-group .button:first-child {\tborder: none}.button-container .button.selected, .button-container .button.selected:hover {\topacity: 1;\tbackground: #ececec;\tcolor: #333}.dropdown {\tpointer-events: all;\tdisplay: inline-table;\tcolor: #333;\tfont-weight: 400;\tfont-size: 16px;\tposition: relative}.dropdown .heading {\tmargin-bottom: .4em;\tfont-weight: 300}.dropdown .main {\tbackground: #fff;\tpadding: 0 20px 0 6px;\tcursor: pointer;\tposition: relative;\tborder: 1px solid #ccc;\tborder-radius: 3px;\theight: 24px;\tline-height: 26px}.dropdown .list, .dropdown .symbol {\tposition: absolute}.dropdown .current {\theight: 100%;\twidth: 100%;\tdisplay: inline-block;\tvertical-align: top;\tpadding: 0.1em 0 0;}.dropdown .symbol {\twidth: 30px;\theight: 100%;\tright: 0;\ttop: 0;\tbackground: 80% 40% no-repeat;\tbackground-size: auto 50%;\tdisplay: inline-block}.dropdown .list {\tleft: 2px;\tmin-width: calc(100% - 4px);\tbackground: rgba(255, 255, 255, 1);\tpadding: 0 2px;\ttext-align: left;\tdisplay: none;\tline-height: 1.4em;\tmax-height: 160px;\toverflow-y: scroll;\tcolor: #333;\tbox-shadow: 0 1px 2px rgba(0, 0, 0, .2);}.dropdown .list .list-item {\tfont-size: 12px;\theight: 24px;\tpadding: 0 5px}.dropdown .list .list-item:hover {\tcursor: pointer;\tbackground: #eee}.dropdown.open .list {\tdisplay: block;\tz-index: 1}.dropdown .list .list-item.selected, .dropdown .list .list-item.selected:hover {\tcolor: #57c1fc;\tcursor: default;\topacity: 1}.dropdown .list .list-item.header, .dropdown .list .list-item.header:hover {\tfont-size: .66em;\tletter-spacing: 1px;\ttext-transform: uppercase;\tcolor: #888;\topacity: 1;\tcursor: default;\tfont-weight: 300;\tmargin-top: .5em}.dropdown .list .list-item.header:first-child {\tmargin-top: 0}.controls-container .dropdown {\tmargin: 0 0 20px;}.controls-container .dropdown .heading {\tcolor: #333}.slider-holder {\tmargin-bottom: 20px}.slider-play {\twidth: 24px;\theight: 24px;\tbackground-repeat: no-repeat;\tbackground-size: 100% 100%;\tbackground-position: center;\tcursor: pointer;\tpadding-right: 2px}.slider, .slider-holder.animatable .slider-play {\tdisplay: inline-block}.slider-play:hover {\topacity: .7}.slider {\theight: 46px;\twidth: 100%;\tbottom: 0}.slider-holder.animatable .slider {\twidth: calc(100% - 37px)}.slider .tick line {\tstroke: #333}.slider text {\tfill: #333}.slider .slider-end-labels {\tfont-size: 11px;\tfill: #9e9e9e}@media(min-width:520px) {\t.dropdown .main {\t\theight: 30px;\t}\t.slider-play {\t\twidth: 30px;\t\theight: 30px\t}\t.button-container .button, .dropdown .current {\t\tfont-size: 14px;\t\tline-height: 26px;\t\theight: 30px;\t}\t.button-container.button-group .button {\t\theight: 28px;\t}\t.dropdown .list .list-item {\t\theight: 30px;\t\tfont-size: 14px;\t\tline-height: 27px;\t}}";function wn(t){return"url('data:image/svg+xml;base64,"+window.btoa(t)+"')"}var xn=!1;function Mn(){return parseFloat}function En(){return function(t){return t.toString()}}var kn=new Date,Tn=new Date;function Sn(i,a,n,r){function l(t){return i(t=new Date(+t)),t}return(l.floor=l).ceil=function(t){return i(t=new Date(t-1)),a(t,1),i(t),t},l.round=function(t){var e=l(t),n=l.ceil(t);return t-e<n-t?e:n},l.offset=function(t,e){return a(t=new Date(+t),null==e?1:Math.floor(e)),t},l.range=function(t,e,n){var r,o=[];if(t=l.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return o;for(;o.push(r=new Date(+t)),a(t,n),i(t),r<t&&t<e;);return o},l.filter=function(n){return Sn(function(t){if(t<=t)for(;i(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;a(t,-1),!n(t););else for(;0<=--e;)for(;a(t,1),!n(t););})},n&&(l.count=function(t,e){return kn.setTime(+t),Tn.setTime(+e),i(kn),i(Tn),Math.floor(n(kn,Tn))},l.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?l.filter(r?function(t){return r(t)%e==0}:function(t){return l.count(0,t)%e==0}):l:null}),l}var Cn=Sn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Cn.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?Sn(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Cn:null};Sn(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Sn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),Sn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()});var zn=Sn(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1});function An(e){return Sn(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Nn=An(0),Pn=An(1),Fn=(An(2),An(3),An(4)),Bn=(An(5),An(6),Sn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Sn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Bn.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Sn(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};Sn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),Sn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var Ln=Sn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function Rn(e){return Sn(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var qn=Rn(0),jn=Rn(1),On=(Rn(2),Rn(3),Rn(4)),Dn=(Rn(5),Rn(6),Sn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Sn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function Hn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Un(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function In(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Dn.every=function(n){return isFinite(n=Math.floor(n))&&0<n?Sn(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Yn,Gn,Wn,Vn,Xn={"-":"",_:" ",0:"0"},$n=/^\s*\d+/,Zn=/^%/,Jn=/[\\^$*+?|[\]().{}]/g;function Qn(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function Kn(t){return t.replace(Jn,"\\$&")}function tr(t){return new RegExp("^(?:"+t.map(Kn).join("|")+")","i")}function er(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function nr(t,e,n){var r=$n.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function rr(t,e,n){var r=$n.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function or(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ir(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ar(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function lr(t,e,n){var r=$n.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function cr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function ur(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function sr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function fr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dr(t,e,n){var r=$n.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function pr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function gr(t,e,n){var r=$n.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function mr(t,e,n){var r=$n.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vr(t,e,n){var r=$n.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _r(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function br(t,e,n){var r=$n.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=$n.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function wr(t,e){return Qn(t.getDate(),e,2)}function xr(t,e){return Qn(t.getHours(),e,2)}function Mr(t,e){return Qn(t.getHours()%12||12,e,2)}function Er(t,e){return Qn(1+zn.count(Bn(t),t),e,3)}function kr(t,e){return Qn(t.getMilliseconds(),e,3)}function Tr(t,e){return kr(t,e)+"000"}function Sr(t,e){return Qn(t.getMonth()+1,e,2)}function Cr(t,e){return Qn(t.getMinutes(),e,2)}function zr(t,e){return Qn(t.getSeconds(),e,2)}function Ar(t){var e=t.getDay();return 0===e?7:e}function Nr(t,e){return Qn(Nn.count(Bn(t),t),e,2)}function Pr(t,e){var n=t.getDay();return t=4<=n||0===n?Fn(t):Fn.ceil(t),Qn(Fn.count(Bn(t),t)+(4===Bn(t).getDay()),e,2)}function Fr(t){return t.getDay()}function Br(t,e){return Qn(Pn.count(Bn(t),t),e,2)}function Lr(t,e){return Qn(t.getFullYear()%100,e,2)}function Rr(t,e){return Qn(t.getFullYear()%1e4,e,4)}function qr(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+Qn(e/60|0,"0",2)+Qn(e%60,"0",2)}function jr(t,e){return Qn(t.getUTCDate(),e,2)}function Or(t,e){return Qn(t.getUTCHours(),e,2)}function Dr(t,e){return Qn(t.getUTCHours()%12||12,e,2)}function Hr(t,e){return Qn(1+Ln.count(Dn(t),t),e,3)}function Ur(t,e){return Qn(t.getUTCMilliseconds(),e,3)}function Ir(t,e){return Ur(t,e)+"000"}function Yr(t,e){return Qn(t.getUTCMonth()+1,e,2)}function Gr(t,e){return Qn(t.getUTCMinutes(),e,2)}function Wr(t,e){return Qn(t.getUTCSeconds(),e,2)}function Vr(t){var e=t.getUTCDay();return 0===e?7:e}function Xr(t,e){return Qn(qn.count(Dn(t),t),e,2)}function $r(t,e){var n=t.getUTCDay();return t=4<=n||0===n?On(t):On.ceil(t),Qn(On.count(Dn(t),t)+(4===Dn(t).getUTCDay()),e,2)}function Zr(t){return t.getUTCDay()}function Jr(t,e){return Qn(jn.count(Dn(t),t),e,2)}function Qr(t,e){return Qn(t.getUTCFullYear()%100,e,2)}function Kr(t,e){return Qn(t.getUTCFullYear()%1e4,e,4)}function to(){return"+0000"}function eo(){return"%"}function no(t){return+t}function ro(t){return Math.floor(+t/1e3)}Yn=function(t){var r=t.dateTime,o=t.date,i=t.time,e=t.periods,n=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,u=tr(e),s=er(e),f=tr(n),d=er(n),p=tr(a),h=er(a),g=tr(l),m=er(l),v=tr(c),_=er(c),b={a:function(t){return a[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:wr,e:wr,f:Tr,H:xr,I:Mr,j:Er,L:kr,m:Sr,M:Cr,p:function(t){return e[+(12<=t.getHours())]},Q:no,s:ro,S:zr,u:Ar,U:Nr,V:Pr,w:Fr,W:Br,x:null,X:null,y:Lr,Y:Rr,Z:qr,"%":eo},y={a:function(t){return a[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:jr,e:jr,f:Ir,H:Or,I:Dr,j:Hr,L:Ur,m:Yr,M:Gr,p:function(t){return e[+(12<=t.getUTCHours())]},Q:no,s:ro,S:Wr,u:Vr,U:Xr,V:$r,w:Zr,W:Jr,x:null,X:null,y:Qr,Y:Kr,Z:to,"%":eo},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=_[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return E(t,r,e,n)},d:fr,e:fr,f:vr,H:pr,I:pr,j:dr,L:mr,m:sr,M:hr,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=s[r[0].toLowerCase()],n+r[0].length):-1},Q:br,s:yr,S:gr,u:rr,U:or,V:ir,w:nr,W:ar,x:function(t,e,n){return E(t,o,e,n)},X:function(t,e,n){return E(t,i,e,n)},y:cr,Y:lr,Z:ur,"%":_r};function x(c,u){return function(t){var e,n,r,o=[],i=-1,a=0,l=c.length;for(t instanceof Date||(t=new Date(+t));++i<l;)37===c.charCodeAt(i)&&(o.push(c.slice(a,i)),null!=(n=Xn[e=c.charAt(++i)])?e=c.charAt(++i):n="e"===e?" ":"0",(r=u[e])&&(e=r(t,n)),o.push(e),a=i+1);return o.push(c.slice(a,i)),o.join("")}}function M(o,i){return function(t){var e,n,r=In(1900);if(E(r,o,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),r.d="Z"in r?(e=4<(n=(e=Un(In(r.y))).getUTCDay())||0===n?jn.ceil(e):jn(e),e=Ln.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=i(In(r.y))).getDay())||0===n?Pn.ceil(e):Pn(e),e=zn.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?Un(In(r.y)).getUTCDay():i(In(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Un(r)):i(r)}}function E(t,e,n,r){for(var o,i,a=0,l=e.length,c=n.length;a<l;){if(c<=r)return-1;if(37===(o=e.charCodeAt(a++))){if(o=e.charAt(a++),!(i=w[o in Xn?e.charAt(a++):o])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return b.x=x(o,b),b.X=x(i,b),b.c=x(r,b),y.x=x(o,y),y.X=x(i,y),y.c=x(r,y),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",Hn);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",y);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,Un);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Yn.format,Gn=Yn.parse,Wn=Yn.utcFormat,Vn=Yn.utcParse;var oo="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Wn(oo);+new Date("2000-01-01T00:00:00.000Z")||Vn(oo);function io(t){return t.toLowerCase()}function ao(n,r,t){var e,o={},i=gn(t).append("div").attr("class","dropdown"),a=i.node(),l=i.append("div").attr("class","main"),c=l.append("span").attr("class","current"),u=l.append("span").attr("class","symbol"),s=i.append("div").attr("class","list"),f=function(){i.classed("open",!1)},d=function(){i.classed("open")?f():(i.classed("open",!0),s.style("top","100%"),s.style("bottom",null),s.node().getBoundingClientRect().bottom>window.innerHeight&&(s.style("top",null),s.style("bottom","100%")))},p=function(){e!==r.dropdown_icon_color&&(e=r.dropdown_icon_color,u.style("background-image",wn('<svg width="6px" height="12px" viewBox="0 0 6 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g transform="translate(-442.000000, -44.000000)" fill="'+e+'"> <g id="Group" transform="translate(442.000000, 44.000000)"> <polygon id="Triangle-2" points="3 0 6 5 0 5"></polygon> <polygon id="Triangle-2-Copy" points="3 12 0 7 6 7"></polygon> </g> </g> </svg>')))};l.on("click",function(){d()});var h=function(){if(i.classed("open")){for(var t=event.target,e=t.parentElement;e;){if(t===a)return;e=(t=e).parentElement}f()}},g=function(){i.style("width",r.width+"px").style("display","inline-table"),i.select(".main").style("width",r.width+"px")},m=function(){f(),i.style("display","none")};return o.appendedToDOM=function(){return document.querySelector("body").addEventListener("click",h,!1),o},o.removedFromDOM=function(){return document.querySelector("body").removeEventListener("click",h),o},o.show=g,o.hide=m,o.update=function(t){if(s.text(""),!n.n_options||"dropdown"!==r.control&&"auto"!==r.control)return m(),o;s.text("").selectAll(".list-item").data(t).enter().append("div").attr("class","list-item").text(function(t){return t.display}).on("click",function(t){f();var e=t.options_index;e!==n.index()&&(n.index(e),c.text(t.display).attr("title",t.display),n.trigger("change"))});var e=t[n.getSortedIndex()].display;return c.text(e).attr("title",e),p(),g(),o},o}var lo=Array.prototype.slice;function co(t){return t}var uo=1,so=2,fo=3,po=4,ho=1e-6;function go(t){return"translate("+(t+.5)+",0)"}function mo(t){return"translate(0,"+(t+.5)+")"}function vo(){return!this.__axis}function _o(g,m){var v=[],_=null,b=null,y=6,w=6,x=3,M=g===uo||g===po?-1:1,E=g===po||g===so?"x":"y",k=g===uo||g===fo?go:mo;function e(t){var e=null==_?m.ticks?m.ticks.apply(m,v):m.domain():_,n=null==b?m.tickFormat?m.tickFormat.apply(m,v):co:b,r=Math.max(y,0)+x,o=m.range(),i=+o[0]+.5,a=+o[o.length-1]+.5,l=(m.bandwidth?function(e){var n=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(n=Math.round(n)),function(t){return+e(t)+n}}:function(e){return function(t){return+e(t)}})(m.copy()),c=t.selection?t.selection():t,u=c.selectAll(".domain").data([null]),s=c.selectAll(".tick").data(e,m).order(),f=s.exit(),d=s.enter().append("g").attr("class","tick"),p=s.select("line"),h=s.select("text");u=u.merge(u.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),s=s.merge(d),p=p.merge(d.append("line").attr("stroke","currentColor").attr(E+"2",M*y)),h=h.merge(d.append("text").attr("fill","currentColor").attr(E,M*r).attr("dy",g===uo?"0em":g===fo?"0.71em":"0.32em")),t!==c&&(u=u.transition(t),s=s.transition(t),p=p.transition(t),h=h.transition(t),f=f.transition(t).attr("opacity",ho).attr("transform",function(t){return isFinite(t=l(t))?k(t):this.getAttribute("transform")}),d.attr("opacity",ho).attr("transform",function(t){var e=this.parentNode.__axis;return k(e&&isFinite(e=e(t))?e:l(t))})),f.remove(),u.attr("d",g===po||g==so?w?"M"+M*w+","+i+"H0.5V"+a+"H"+M*w:"M0.5,"+i+"V"+a:w?"M"+i+","+M*w+"V0.5H"+a+"V"+M*w:"M"+i+",0.5H"+a),s.attr("opacity",1).attr("transform",function(t){return k(l(t))}),p.attr(E+"2",M*y),h.attr(E,M*r).text(n),c.filter(vo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",g===so?"start":g===po?"end":"middle"),c.each(function(){this.__axis=l})}return e.scale=function(t){return arguments.length?(m=t,e):m},e.ticks=function(){return v=lo.call(arguments),e},e.tickArguments=function(t){return arguments.length?(v=null==t?[]:lo.call(t),e):v.slice()},e.tickValues=function(t){return arguments.length?(_=null==t?null:lo.call(t),e):_&&_.slice()},e.tickFormat=function(t){return arguments.length?(b=t,e):b},e.tickSize=function(t){return arguments.length?(y=w=+t,e):y},e.tickSizeInner=function(t){return arguments.length?(y=+t,e):y},e.tickSizeOuter=function(t){return arguments.length?(w=+t,e):w},e.tickPadding=function(t){return arguments.length?(x=+t,e):x},e}function bo(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var yo,wo,xo=(1===(yo=bo).length&&(wo=yo,yo=function(t,e){return bo(wo(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;yo(t[o],e)<0?n=o+1:r=o}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;0<yo(t[o],e)?r=o:n=o+1}return n}}).right;function Mo(t){return null===t?NaN:+t}function Eo(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),i=new Array(o);++r<o;)i[r]=t+r*n;return i}var ko=Math.sqrt(50),To=Math.sqrt(10),So=Math.sqrt(2);function Co(t,e,n){var r,o,i,a,l=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(a=zo(t,e,n))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),e=Math.floor(e/a),i=new Array(o=Math.ceil(e-t+1));++l<o;)i[l]=(t+l)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),i=new Array(o=Math.ceil(t-e+1));++l<o;)i[l]=(t-l)/a;return r&&i.reverse(),i}function zo(t,e,n){var r=(e-t)/Math.max(0,n),o=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,o);return 0<=o?(ko<=i?10:To<=i?5:So<=i?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(ko<=i?10:To<=i?5:So<=i?2:1)}function Ao(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),o=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/o;return ko<=i?o*=10:To<=i?o*=5:So<=i&&(o*=2),e<t?-o:o}function No(t,e,n){if(null==n&&(n=Mo),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,i=Math.floor(o),a=+n(t[i],i,t);return a+(+n(t[i+1],i+1,t)-a)*(o-i)}}function Po(t){for(var e,n,r,o=t.length,i=-1,a=0;++i<o;)a+=t[i].length;for(n=new Array(a);0<=--o;)for(e=(r=t[o]).length;0<=--e;)n[--a]=r[e];return n}function Fo(t){return function(){return t}}function Bo(e,n){return function(t){return e+t*n}}function Lo(t,e){var n=e-t;return n?Bo(t,180<n||n<-180?n-360*Math.round(n/360):n):Fo(isNaN(t)?e:t)}function Ro(i){return 1==(i=+i)?qo:function(t,e){return e-t?(n=t,r=e,o=i,n=Math.pow(n,o),r=Math.pow(r,o)-n,o=1/o,function(t){return Math.pow(n+t*r,o)}):Fo(isNaN(t)?e:t);var n,r,o}}function qo(t,e){var n=e-t;return n?Bo(t,n):Fo(isNaN(t)?e:t)}var jo=function t(e){var a=Ro(e);function n(e,t){var n=a((e=Lt(e)).r,(t=Lt(t)).r),r=a(e.g,t.g),o=a(e.b,t.b),i=qo(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=o(t),e.opacity=i(t),e+""}}return n.gamma=t,n}(1);var Oo,Do=(Oo=function(u){var s=u.length-1;return function(t){var e,n,r,o=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),i=u[o],a=u[o+1],l=0<o?u[o-1]:2*i-a,c=o<s-1?u[o+2]:2*a-i;return((1-3*(e=(t-o/s)*s)+3*(n=e*e)-(r=n*e))*l+(4-6*n+3*r)*i+(1+3*e+3*n-3*r)*a+r*c)/6}},function(t){var e,n,r=t.length,o=new Array(r),i=new Array(r),a=new Array(r);for(e=0;e<r;++e)n=Lt(t[e]),o[e]=n.r||0,i[e]=n.g||0,a[e]=n.b||0;return o=Oo(o),i=Oo(i),a=Oo(a),n.opacity=1,function(t){return n.r=o(t),n.g=i(t),n.b=a(t),n+""}});function Ho(e,n){return n-=e=+e,function(t){return e+n*t}}var Uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Io=new RegExp(Uo.source,"g");function Yo(t,r){var e,n,o,i,a,l=Uo.lastIndex=Io.lastIndex=0,c=-1,u=[],s=[];for(t+="",r+="";(e=Uo.exec(t))&&(n=Io.exec(r));)(o=n.index)>l&&(o=r.slice(l,o),u[c]?u[c]+=o:u[++c]=o),(e=e[0])===(n=n[0])?u[c]?u[c]+=n:u[++c]=n:(u[++c]=null,s.push({i:c,x:Ho(e,n)})),l=Io.lastIndex;return l<r.length&&(o=r.slice(l),u[c]?u[c]+=o:u[++c]=o),u.length<2?s[0]?(a=s[0].x,function(t){return a(t)+""}):(i=r,function(){return i}):(r=s.length,function(t){for(var e,n=0;n<r;++n)u[(e=s[n]).i]=e.x(t);return u.join("")})}function Go(t,e){var n,r=typeof e;return null==e||"boolean"===r?Fo(e):("number"===r?Ho:"string"===r?(n=Nt(e))?(e=n,jo):Yo:e instanceof Nt?jo:e instanceof Date?function(e,n){var r=new Date;return n-=e=+e,function(t){return r.setTime(e+n*t),r}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,i=new Array(o),a=new Array(r);for(n=0;n<o;++n)i[n]=Go(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=i[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Go(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}:Ho)(t,e)}function Wo(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}}var Vo,Xo,$o,Zo,Jo=180/Math.PI,Qo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ko(t,e,n,r,o,i){var a,l,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*Jo,skewX:Math.atan(c)*Jo,scaleX:a,scaleY:l}}function ti(d,p,h,g){function m(t){return t.length?t.pop()+" ":""}return function(t,e){var n,r,o,i,a,l,c,u,s=[],f=[];return t=d(t),e=d(e),function(t,e,n,r,o,i){if(t!==n||e!==r){var a=o.push("translate(",null,p,null,h);i.push({i:a-4,x:Ho(t,n)},{i:a-2,x:Ho(e,r)})}else(n||r)&&o.push("translate("+n+p+r+h)}(t.translateX,t.translateY,e.translateX,e.translateY,s,f),n=t.rotate,r=e.rotate,o=s,i=f,n!==r?(180<n-r?r+=360:180<r-n&&(n+=360),i.push({i:o.push(m(o)+"rotate(",null,g)-2,x:Ho(n,r)})):r&&o.push(m(o)+"rotate("+r+g),a=t.skewX,l=e.skewX,c=s,u=f,a!==l?u.push({i:c.push(m(c)+"skewX(",null,g)-2,x:Ho(a,l)}):l&&c.push(m(c)+"skewX("+l+g),function(t,e,n,r,o,i){if(t!==n||e!==r){var a=o.push(m(o)+"scale(",null,",",null,")");i.push({i:a-4,x:Ho(t,n)},{i:a-2,x:Ho(e,r)})}else 1===n&&1===r||o.push(m(o)+"scale("+n+","+r+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,s,f),t=e=null,function(t){for(var e,n=-1,r=f.length;++n<r;)s[(e=f[n]).i]=e.x(t);return s.join("")}}}var ei=ti(function(t){return"none"===t?Qo:(Vo||(Vo=document.createElement("DIV"),Xo=document.documentElement,$o=document.defaultView),Vo.style.transform=t,t=$o.getComputedStyle(Xo.appendChild(Vo),null).getPropertyValue("transform"),Xo.removeChild(Vo),Ko(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),ni=ti(function(t){return null==t?Qo:(Zo||(Zo=document.createElementNS("http://www.w3.org/2000/svg","g")),Zo.setAttribute("transform",t),(t=Zo.transform.baseVal.consolidate())?Ko((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Qo)},", ",")",")"),ri=Math.SQRT2,oi=2,ii=4,ai=1e-12;function li(t){return((t=Math.exp(t))+1/t)/2}function ci(t,e){var n,a,l=t[0],c=t[1],u=t[2],r=e[0],o=e[1],i=e[2],s=r-l,f=o-c,d=s*s+f*f;if(d<ai)a=Math.log(i/u)/ri,n=function(t){return[l+t*s,c+t*f,u*Math.exp(ri*t*a)]};else{var p=Math.sqrt(d),h=(i*i-u*u+ii*d)/(2*u*oi*p),g=(i*i-u*u-ii*d)/(2*i*oi*p),m=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(g*g+1)-g);a=(v-m)/ri,n=function(t){var e,n,r=t*a,o=li(m),i=u/(oi*p)*(o*(n=ri*r+m,((n=Math.exp(2*n))-1)/(n+1))-(e=m,((e=Math.exp(e))-1/e)/2));return[l+i*s,c+i*f,u*o/li(ri*r+m)]}}return n.duration=1e3*a,n}var ui,si=(ui=Lo,function(e,t){var n=ui((e=Ut(e)).h,(t=Ut(t)).h),r=qo(e.s,t.s),o=qo(e.l,t.l),i=qo(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=o(t),e.opacity=i(t),e+""}});var fi,di=(fi=Lo,function(e,t){var n=fi((e=le(e)).h,(t=le(t)).h),r=qo(e.c,t.c),o=qo(e.l,t.l),i=qo(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=o(t),e.opacity=i(t),e+""}});function pi(l){return function t(a){function e(e,t){var n=l((e=ve(e)).h,(t=ve(t)).h),r=qo(e.s,t.s),o=qo(e.l,t.l),i=qo(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=o(Math.pow(t,a)),e.opacity=i(t),e+""}}return a=+a,e.gamma=t,e}(1)}pi(Lo);var hi=pi(qo);var gi=Array.prototype,mi=gi.map,vi=gi.slice;function _i(t){return+t}var bi=[0,1];function yi(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=n,function(){return t});var t}function wi(t,e,n,r){var o=t[0],i=t[1],a=e[0],l=e[1];return a=i<o?(o=n(i,o),r(l,a)):(o=n(o,i),r(a,l)),function(t){return a(o(t))}}function xi(n,t,e,r){var o=Math.min(n.length,t.length)-1,i=new Array(o),a=new Array(o),l=-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++l<o;)i[l]=e(n[l],n[l+1]),a[l]=r(t[l],t[l+1]);return function(t){var e=xo(n,t,1,o)-1;return a[e](i[e](t))}}function Mi(l){var c=l.domain;return l.ticks=function(t){var e=c();return Co(e[0],e[e.length-1],null==t?10:t)},l.tickFormat=function(t,e){return function(t,e,n){var r,o=t[0],i=t[t.length-1],a=Ao(o,i,null==e?10:e);switch((n=J(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(o),Math.abs(i));return null!=n.precision||isNaN(r=ct(a,l))||(n.precision=r),ot(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=ut(a,Math.max(Math.abs(o),Math.abs(i))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=lt(a))||(n.precision=r-2*("%"===n.type))}return rt(n)}(c(),t,e)},l.nice=function(t){null==t&&(t=10);var e,n=c(),r=0,o=n.length-1,i=n[r],a=n[o];return a<i&&(e=i,i=a,a=e,e=r,r=o,o=e),0<(e=zo(i,a,t))?e=zo(i=Math.floor(i/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=zo(i=Math.ceil(i*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[r]=Math.floor(i/e)*e,n[o]=Math.ceil(a/e)*e,c(n)):e<0&&(n[r]=Math.ceil(i*e)/e,n[o]=Math.floor(a*e)/e,c(n)),l},l}function Ei(){var e=function(e,n){var r,i,a,l=bi,c=bi,u=Go,s=!1;function o(){return r=2<Math.min(l.length,c.length)?xi:wi,i=a=null,t}function t(t){return(i||(i=r(l,c,s?(o=e,function(e,n){var r=o(e=+e,n=+n);return function(t){return t<=e?0:n<=t?1:r(t)}}):e,u)))(+t);var o}return t.invert=function(t){return(a||(a=r(c,l,yi,s?(o=n,function(e,n){var r=o(e=+e,n=+n);return function(t){return t<=0?e:1<=t?n:r(t)}}):n)))(+t);var o},t.domain=function(t){return arguments.length?(l=mi.call(t,_i),o()):l.slice()},t.range=function(t){return arguments.length?(c=vi.call(t),o()):c.slice()},t.rangeRound=function(t){return c=vi.call(t),u=Wo,o()},t.clamp=function(t){return arguments.length?(s=!!t,o()):s},t.interpolate=function(t){return arguments.length?(u=t,o()):u},o()}(yi,Ho);return e.copy=function(){return t=e,Ei().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp());var t},Mi(e)}function ki(t){this.container=gn(t),this._width=null,this._height=null,this._handleRadius=15,this._channelHeight=5,this._channelRadius=null,this._handleFill="black",this._channelFill="#eee",this._margin={top:null,left:null,right:null},this._domain=[0,1],this._value=null,this._snap=!1,this._scale=null,this._axis=!1,this._ticks=null,this._tickFormat=null,this._tickSize=null,this._label=null,this._labelSize=18,this._startLabel=null,this._startLabelBelow=!1,this._endLabel=null,this._endLabelBelow=!1,this._startEndLabelSize=16,this.handlers={change:[]}}function Ti(e){0<e.length&&"_"==e.charAt(0)&&(ki.prototype[e.substr(1)]=function(t){return void 0===t?this[e]:(this[e]=t,this)})}var Si=new ki;for(var Ci in Si)Ti(Ci);function zi(t,e){return"boolean"==typeof t?t?Math.round(e):e:function t(e,n,r,o){if(void 0===r&&(r=0),void 0===o&&(o=e.length),o-r==0)return n;if(o-r==1)return e[r];if(o-r==2)return Math.abs(e[r]-n)<=Math.abs(e[r+1]-n)?e[r]:e[r+1];var i=r+Math.floor((o-r)/2),a=e[i],l=e[i-1];return l<=n&&n<=a?Math.abs(l-n)<=Math.abs(a-n)?l:a:a<=n?t(e,n,i,o):t(e,n,r,i)}(t,e)}function Ai(t){return new ki(t)}function Ni(i,a,t){var e,n,r,l,c,u,s,f={},o=gn(t).append("div").attr("class","slider-holder animatable"),d=o.append("div").attr("class","slider-play"),p=o.append("div").attr("class","slider"),h=null,g=function(){clearTimeout(h),h=null},m=function(t){var e=l[t];e.options_index!==i.index()&&(i.index(e.options_index),i.trigger("change"))},v=Ai(p.node()).channelHeight(6).snap(!0).on("change",function(t){var e=null!==h;e&&g(),m(t),e&&b()}),_=function(){g(),o.classed("playing",!1),d.style("background-image",e),i._isPlaying_(!1),s=!1},b=function(){var t=i.getSortedIndex(),e=c[t],n=i.n_options-1,r=t<n?t+1:0;h=setTimeout(function(){m(r),a.loop||r<n?b():_()},e)},y=function(){o.classed("playing",!0),d.style("background-image",n),b(),i._isPlaying_(!0),s=!0};d.on("click",function(){null===h?y():_()});var w=function(){a.play_button?o.classed("animatable",!0):(_(),o.classed("animatable",!1)),r!==a.slider_handle_color&&(v.update(),r=a.slider_handle_color,o.select(".slider-handle").style("fill",r),e=wn('<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <polygon id="Triangle" fill="'+r+'" stroke="none" points="25 15 0 30 0 0"></polygon> </svg>'),n=wn('<svg width="26px" height="30px" viewBox="0 0 26 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="none" stroke-width="1" fill="'+r+'"><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>'),d.style("background-image",h?n:e))},x=function(){return o.style("display","inline-block"),function(){o.style("width",a.width+"px"),d.style("display",a.play_button?null:"none");var t=o.node().getBoundingClientRect().width,e=d.node().getBoundingClientRect().width;p.style("width",Math.max(t-e,1)+"px");var n=window.innerWidth,r=n<520?12:15;v.labelSize(n<520?12:14).handleRadius(r).margin({left:r+5,right:r,top:n<520?33:31})}(),w(),f},M=function(){return _(),o.style("display","none"),f};return f.show=x,f.hide=M,f.update=function(t){if(l=t,!i.n_options||"slider"!==a.control)return M(),f;x();var n=i.n_options,r=a.loop;c=l.map(function(t,e){return 1e3*(a.step_time+(r&&e===n-1?a.restart_pause:0))});var e=i.getSortedIndex(),o=l[e];return v.domain([0,n-1]).value(e).label(o.display).channelFill(a.slider_track_color).update(),(u=u||p.select("text.slider-label")).style("fill",a.slider_track_color),i._isPlaying_()&&!s?y():!i._isPlaying_()&&s&&_(),f},f}ki.prototype.margin=function(t){if(!t)return this._margin;for(Ci in t){if(!(Ci in this._margin))throw"Slider.margin: unrecognised option "+Ci;this._margin[Ci]=t[Ci]}return this},ki.prototype.on=function(t,e){if(!(t in this.handlers))throw"Slider.on: No such event: "+t;return this.handlers[t].push(e),this},ki.prototype.fire=function(t,e){if(!(t in this.handlers))throw"Slider.fire: No such event: "+t;for(var n=this.handlers[t],r=0;r<n.length;r++)n[r].call(this,e);return this},ki.prototype.update=ki.prototype.draw=function(){var o=this,t=this._width,e=this._height,n=this.container.node();if(!t){var r=n.getBoundingClientRect();if(!r||0==r.width)return this;t=r.width,e=r.height}var i,a=null==this._channelRadius?this._channelHeight/2:this._channelRadius,l=null==this._margin.left?Math.max(this._handleRadius,a):this._margin.left,c=null==this._margin.right?Math.max(this._handleRadius,a):this._margin.right,u=null==this._margin.top?Math.max(this._handleRadius,this._channelHeight/2):this._margin.top,s=t-l-c,f=s+2*a,d=1.5*this._labelSize;null!=this._label&&null==this._margin.top&&(u+=d),"http://www.w3.org/2000/svg"==n.namespaceURI?i=this.container:((i=this.container.selectAll("svg").data([{width:t,height:e}])).exit().remove(),(i=i.enter().append("svg").merge(i)).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}));var p=i.selectAll("g.slider-container").data([{left:l,top:u,id:this._id}]);p.exit().remove(),(p=p.enter().append("g").attr("class","slider-container").merge(p)).attr("transform",function(t){return"translate("+t.left+","+t.top+")"}).attr("id",function(t){return t.id}),this.scale=(this._scale?this._scale():Ei()).domain(this._domain).range([0,s]),null==this._value||this._value<this._domain[0]?this._value=this._domain[0]:this._value>this._domain[1]&&(this._value=this._domain[1]),this._snap&&(this._value=zi(this._snap,this._value));var h,g,m=[];this._axis&&(h="boolean"!=typeof this._axis?this._axis(this.scale):_o(fo,g).scale(this.scale).tickPadding(6),this._ticks&&h.ticks(this._ticks),this._tickFormat&&h.tickFormat(this._tickFormat),this._tickSize?h.tickSize(this._tickSize):h.tickSize(Math.max(5,this._handleRadius-this._channelHeight-2)),m.push(h));var v,_,b,y,w=p.selectAll(".slider-axis").data(m).enter();function x(){document.removeEventListener("mouseup",x,!1),document.removeEventListener("mousemove",M,!1)}function M(t){T(t.clientX-b)}function E(){document.removeEventListener("touchend",E,!1),document.removeEventListener("touchmove",k,!1)}function k(t){1==t.touches.length&&T(t.touches[0].clientX-b)}function T(t){var e=y+t,n=Math.max(0,Math.min(s,e)),r=o.scale.invert(n);o._snap&&(r=zi(o._snap,r)),_.attr("cx",o.scale(r)),r!=o._value&&(o._value=r,o.fire("change",o._value))}w.append("g").attr("class","slider-axis").attr("transform","translate(0,"+this._channelHeight/2+")").each(function(t){t(gn(this))}),w.select(".domain").attr("fill","none"),w.selectAll(".tick line").attr("stroke","black"),w.exit().remove(),(v=p.selectAll(".slider-channel").data([{width:f,height:this._channelHeight,channel_r:a}])).exit().remove(),(v=v.enter().append("rect").attr("class","slider-channel").attr("cursor","pointer").on("click",function(){var t=Math.max(0,Math.min(s,_n(this)[0]));o._value=o.scale.invert(t),o._snap&&(o._value=zi(o._snap,o._value)),_.attr("cx",o.scale(o._value)),o.fire("change",o._value)}).merge(v)).attr("width",function(t){return t.width}).attr("fill",this._channelFill).attr("height",function(t){return t.height}).attr("y",function(t){return-t.height/2}).attr("x",function(t){return-t.channel_r}).attr("rx",function(t){return t.channel_r}),(_=(_=p.selectAll(".slider-handle").data([{v:this._value,x:this.scale(this._value)}])).enter().append("circle").attr("class","slider-handle").attr("cursor","col-resize").merge(_)).attr("cx",function(t){return t.x}).attr("r",this._handleRadius).attr("fill",this._handleFill).on("mousedown",function(){var t;an.preventDefault(),t=an,document.addEventListener("mouseup",x,!1),document.addEventListener("mousemove",M,!1),b=t.clientX,y=o.scale(o._value)}).on("touchstart",function(){var t;an.preventDefault(),1==(t=an).touches.length&&(document.addEventListener("touchend",E,!1),document.addEventListener("touchmove",k,!1),b=t.touches[0].clientX,y=o.scale(o._value))});var S=[];this._label&&S.push({label:this._label,x:s/2,y:-d,font_size:this._labelSize});var C=p.selectAll(".slider-label").data(S);C.exit().remove(),(C=C.enter().append("text").attr("class","slider-label").attr("text-anchor","middle").attr("cursor","default").merge(C)).text(function(t){return t.label}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("font-size",this._labelSize);var z=[];this._startLabel&&z.push({label:this._startLabel,x:this._startLabelBelow?0:-(a+5+Math.max(0,this._handleRadius-a)),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._startLabelBelow?"middle":"end",font_size:this._startEndLabelSize}),this._endLabel&&z.push({label:this._endLabel,x:this._endLabelBelow?s:s+(a+Math.max(0,this._handleRadius-a)+5),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._endLabelBelow?"middle":"start",font_size:this._startEndLabelSize});var A=p.selectAll(".slider-end-labels").data(z);return A.exit().remove(),(A=A.enter().append("text").attr("class","slider-end-labels").attr("pointer-events","none").merge(A)).text(function(t){return t.label}).attr("font-size",function(t){return t.font_size}).attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("text-anchor",function(t){return t.anchor}),this},Ai.version="1.3.2";var Pi=Object.freeze({type:"categorical",temporal_format:"%Y",sort:!0,control:"auto",width:200,play_button:!0,step_time:2,loop:!0,restart_pause:0,icon_color:"#5671AD",buttons_type:"grouped",dropdown_icon_color:"#000000",slider_handle_color:"#000000",slider_track_color:"#444444",_index_:null,_is_playing_:!1});function Fi(){return new Bi}function Bi(){this.reset()}Bi.prototype={constructor:Bi,reset:function(){this.s=this.t=0},add:function(t){Ri(Li,t,this.t),Ri(this,Li.s,this.s),this.s?this.t+=Li.t:this.s=Li.t},valueOf:function(){return this.s}};var Li=new Bi;function Ri(t,e,n){var r=t.s=e+n,o=r-e,i=r-o;t.t=e-i+(n-o)}var qi=1e-6,ji=1e-12,Oi=Math.PI,Di=Oi/2,Hi=Oi/4,Ui=2*Oi,Ii=180/Oi,Yi=Oi/180,Gi=Math.abs,Wi=Math.atan,Vi=Math.atan2,Xi=Math.cos,$i=Math.ceil,Zi=Math.exp,Ji=Math.log,Qi=Math.pow,Ki=Math.sin,ta=Math.sign||function(t){return 0<t?1:t<0?-1:0},ea=Math.sqrt,na=Math.tan;function ra(t){return 1<t?0:t<-1?Oi:Math.acos(t)}function oa(t){return 1<t?Di:t<-1?-Di:Math.asin(t)}function ia(t){return(t=Ki(t/2))*t}function aa(){}function la(t,e){t&&ua.hasOwnProperty(t.type)&&ua[t.type](t,e)}var ca={Feature:function(t,e){la(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)la(n[r].geometry,e)}},ua={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){sa(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)sa(n[r],e,0)},Polygon:function(t,e){fa(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)fa(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)la(n[r],e)}};function sa(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function fa(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)sa(t[n],e,1);e.polygonEnd()}function da(t,e){t&&ca.hasOwnProperty(t.type)?ca[t.type](t,e):la(t,e)}var pa,ha,ga,ma,va,_a=Fi(),ba=Fi(),ya={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){_a.reset(),ya.lineStart=wa,ya.lineEnd=xa},polygonEnd:function(){var t=+_a;ba.add(t<0?Ui+t:t),this.lineStart=this.lineEnd=this.point=aa},sphere:function(){ba.add(Ui)}};function wa(){ya.point=Ma}function xa(){Ea(pa,ha)}function Ma(t,e){ya.point=Ea,pa=t,ha=e,ga=t*=Yi,ma=Xi(e=(e*=Yi)/2+Hi),va=Ki(e)}function Ea(t,e){var n=(t*=Yi)-ga,r=0<=n?1:-1,o=r*n,i=Xi(e=(e*=Yi)/2+Hi),a=Ki(e),l=va*a,c=ma*i+l*Xi(o),u=l*r*Ki(o);_a.add(Vi(u,c)),ga=t,ma=i,va=a}function ka(t){return ba.reset(),da(t,ya),2*ba}function Ta(t){return[Vi(t[1],t[0]),oa(t[2])]}function Sa(t){var e=t[0],n=t[1],r=Xi(n);return[r*Xi(e),r*Ki(e),Ki(n)]}function Ca(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function za(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Aa(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Na(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Pa(t){var e=ea(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Fa,Ba,La,Ra,qa,ja,Oa,Da,Ha,Ua,Ia,Ya,Ga,Wa,Va,Xa,$a,Za,Ja,Qa,Ka,tl,el,nl,rl,ol,il=Fi(),al={point:ll,lineStart:ul,lineEnd:sl,polygonStart:function(){al.point=fl,al.lineStart=dl,al.lineEnd=pl,il.reset(),ya.polygonStart()},polygonEnd:function(){ya.polygonEnd(),al.point=ll,al.lineStart=ul,al.lineEnd=sl,_a<0?(Fa=-(La=180),Ba=-(Ra=90)):qi<il?Ra=90:il<-qi&&(Ba=-90),Ua[0]=Fa,Ua[1]=La},sphere:function(){Fa=-(La=180),Ba=-(Ra=90)}};function ll(t,e){Ha.push(Ua=[Fa=t,La=t]),e<Ba&&(Ba=e),Ra<e&&(Ra=e)}function cl(t,e){var n=Sa([t*Yi,e*Yi]);if(Da){var r=za(Da,n),o=za([r[1],-r[0],0],r);Pa(o),o=Ta(o);var i,a=t-qa,l=0<a?1:-1,c=o[0]*Ii*l,u=180<Gi(a);u^(l*qa<c&&c<l*t)?(i=o[1]*Ii,Ra<i&&(Ra=i)):u^(l*qa<(c=(c+360)%360-180)&&c<l*t)?(i=-o[1]*Ii)<Ba&&(Ba=i):(e<Ba&&(Ba=e),Ra<e&&(Ra=e)),u?t<qa?hl(Fa,t)>hl(Fa,La)&&(La=t):hl(t,La)>hl(Fa,La)&&(Fa=t):Fa<=La?(t<Fa&&(Fa=t),La<t&&(La=t)):qa<t?hl(Fa,t)>hl(Fa,La)&&(La=t):hl(t,La)>hl(Fa,La)&&(Fa=t)}else Ha.push(Ua=[Fa=t,La=t]);e<Ba&&(Ba=e),Ra<e&&(Ra=e),Da=n,qa=t}function ul(){al.point=cl}function sl(){Ua[0]=Fa,Ua[1]=La,al.point=ll,Da=null}function fl(t,e){if(Da){var n=t-qa;il.add(180<Gi(n)?n+(0<n?360:-360):n)}else ja=t,Oa=e;ya.point(t,e),cl(t,e)}function dl(){ya.lineStart()}function pl(){fl(ja,Oa),ya.lineEnd(),Gi(il)>qi&&(Fa=-(La=180)),Ua[0]=Fa,Ua[1]=La,Da=null}function hl(t,e){return(e-=t)<0?e+360:e}function gl(t,e){return t[0]-e[0]}function ml(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var vl={sphere:aa,point:_l,lineStart:yl,lineEnd:Ml,polygonStart:function(){vl.lineStart=El,vl.lineEnd=kl},polygonEnd:function(){vl.lineStart=yl,vl.lineEnd=Ml}};function _l(t,e){t*=Yi;var n=Xi(e*=Yi);bl(n*Xi(t),n*Ki(t),Ki(e))}function bl(t,e,n){Ga+=(t-Ga)/++Ia,Wa+=(e-Wa)/Ia,Va+=(n-Va)/Ia}function yl(){vl.point=wl}function wl(t,e){t*=Yi;var n=Xi(e*=Yi);nl=n*Xi(t),rl=n*Ki(t),ol=Ki(e),vl.point=xl,bl(nl,rl,ol)}function xl(t,e){t*=Yi;var n=Xi(e*=Yi),r=n*Xi(t),o=n*Ki(t),i=Ki(e),a=Vi(ea((a=rl*i-ol*o)*a+(a=ol*r-nl*i)*a+(a=nl*o-rl*r)*a),nl*r+rl*o+ol*i);Ya+=a,Xa+=a*(nl+(nl=r)),$a+=a*(rl+(rl=o)),Za+=a*(ol+(ol=i)),bl(nl,rl,ol)}function Ml(){vl.point=_l}function El(){vl.point=Tl}function kl(){Sl(tl,el),vl.point=_l}function Tl(t,e){tl=t,el=e,t*=Yi,e*=Yi,vl.point=Sl;var n=Xi(e);nl=n*Xi(t),rl=n*Ki(t),ol=Ki(e),bl(nl,rl,ol)}function Sl(t,e){t*=Yi;var n=Xi(e*=Yi),r=n*Xi(t),o=n*Ki(t),i=Ki(e),a=rl*i-ol*o,l=ol*r-nl*i,c=nl*o-rl*r,u=ea(a*a+l*l+c*c),s=oa(u),f=u&&-s/u;Ja+=f*a,Qa+=f*l,Ka+=f*c,Ya+=s,Xa+=s*(nl+(nl=r)),$a+=s*(rl+(rl=o)),Za+=s*(ol+(ol=i)),bl(nl,rl,ol)}function Cl(t){Ia=Ya=Ga=Wa=Va=Xa=$a=Za=Ja=Qa=Ka=0,da(t,vl);var e=Ja,n=Qa,r=Ka,o=e*e+n*n+r*r;return o<ji&&(e=Xa,n=$a,r=Za,Ya<qi&&(e=Ga,n=Wa,r=Va),(o=e*e+n*n+r*r)<ji)?[NaN,NaN]:[Vi(n,e)*Ii,oa(r/ea(o))*Ii]}function zl(t){return function(){return t}}function Al(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t}function Nl(t,e){return[Gi(t)>Oi?t+Math.round(-t/Ui)*Ui:t,e]}function Pl(t,e,n){return(t%=Ui)?e||n?Al(Bl(t),Ll(e,n)):Bl(t):e||n?Ll(e,n):Nl}function Fl(n){return function(t,e){return[Oi<(t+=n)?t-Ui:t<-Oi?t+Ui:t,e]}}function Bl(t){var e=Fl(t);return e.invert=Fl(-t),e}function Ll(t,e){var l=Xi(t),c=Ki(t),u=Xi(e),s=Ki(e);function n(t,e){var n=Xi(e),r=Xi(t)*n,o=Ki(t)*n,i=Ki(e),a=i*l+r*c;return[Vi(o*u-a*s,r*l-i*c),oa(a*u+o*s)]}return n.invert=function(t,e){var n=Xi(e),r=Xi(t)*n,o=Ki(t)*n,i=Ki(e),a=i*u-o*s;return[Vi(o*u+i*s,r*l+a*c),oa(a*l-r*c)]},n}function Rl(e){function t(t){return(t=e(t[0]*Yi,t[1]*Yi))[0]*=Ii,t[1]*=Ii,t}return e=Pl(e[0]*Yi,e[1]*Yi,2<e.length?e[2]*Yi:0),t.invert=function(t){return(t=e.invert(t[0]*Yi,t[1]*Yi))[0]*=Ii,t[1]*=Ii,t},t}function ql(t,e,n,r,o,i){if(n){var a=Xi(e),l=Ki(e),c=r*n;null==o?(o=e+r*Ui,i=e-c/2):(o=jl(a,o),i=jl(a,i),(0<r?o<i:i<o)&&(o+=r*Ui));for(var u,s=o;0<r?i<s:s<i;s-=c)u=Ta([a,-l*Xi(s),-l*Ki(s)]),t.point(u[0],u[1])}}function jl(t,e){(e=Sa(e))[0]-=t,Pa(e);var n=ra(-e[1]);return((-e[2]<0?-n:n)+Ui-qi)%Ui}function Ol(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:aa,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function Dl(t,e){return Gi(t[0]-e[0])<qi&&Gi(t[1]-e[1])<qi}function Hl(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ul(t,e,n,r,i){var a,o,l=[],c=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Dl(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);i.lineEnd()}else l.push(n=new Hl(r,t,null,!0)),c.push(n.o=new Hl(r,null,n,!1)),l.push(n=new Hl(o,t,null,!1)),c.push(n.o=new Hl(o,null,n,!0))}}),l.length){for(c.sort(e),Il(l),Il(c),a=0,o=c.length;a<o;++a)c[a].e=n=!n;for(var u,s,f=l[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(a=0,o=u.length;a<o;++a)i.point((s=u[a])[0],s[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(u=d.p.z,a=u.length-1;0<=a;--a)i.point((s=u[a])[0],s[1]);else r(d.x,d.p.x,-1,i);d=d.p}u=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function Il(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}Nl.invert=Nl;var Yl=Fi();function Gl(t){return Gi(t[0])<=Oi?t[0]:ta(t[0])*((Gi(t[0])+Oi)%Ui-Oi)}function Wl(t,e){var n=Gl(e),r=e[1],o=Ki(r),i=[Ki(n),-Xi(n),0],a=0,l=0;Yl.reset(),1===o?r=Di+qi:-1===o&&(r=-Di-qi);for(var c=0,u=t.length;c<u;++c)if(f=(s=t[c]).length)for(var s,f,d=s[f-1],p=Gl(d),h=d[1]/2+Hi,g=Ki(h),m=Xi(h),v=0;v<f;++v,p=b,g=w,m=x,d=_){var _=s[v],b=Gl(_),y=_[1]/2+Hi,w=Ki(y),x=Xi(y),M=b-p,E=0<=M?1:-1,k=E*M,T=Oi<k,S=g*w;if(Yl.add(Vi(S*E*Ki(k),m*x+S*Xi(k))),a+=T?M+E*Ui:M,T^n<=p^n<=b){var C=za(Sa(d),Sa(_));Pa(C);var z=za(i,C);Pa(z);var A=(T^0<=M?-1:1)*oa(z[2]);(A<r||r===A&&(C[0]||C[1]))&&(l+=T^0<=M?1:-1)}}return(a<-qi||a<qi&&Yl<-qi)^1&l}function Vl(m,v,_,b){return function(l){var c,u,s,n=v(l),f=Ol(),d=v(f),p=!1,e={point:r,lineStart:o,lineEnd:i,polygonStart:function(){e.point=h,e.lineStart=a,e.lineEnd=g,u=[],c=[]},polygonEnd:function(){e.point=r,e.lineStart=o,e.lineEnd=i,u=Po(u);var t=Wl(c,b);u.length?(p||(l.polygonStart(),p=!0),Ul(u,$l,t,_,l)):t&&(p||(l.polygonStart(),p=!0),l.lineStart(),_(null,null,1,l),l.lineEnd()),p&&(l.polygonEnd(),p=!1),u=c=null},sphere:function(){l.polygonStart(),l.lineStart(),_(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function r(t,e){m(t,e)&&l.point(t,e)}function t(t,e){n.point(t,e)}function o(){e.point=t,n.lineStart()}function i(){e.point=r,n.lineEnd()}function h(t,e){s.push([t,e]),d.point(t,e)}function a(){d.lineStart(),s=[]}function g(){h(s[0][0],s[0][1]),d.lineEnd();var t,e,n,r,o=d.clean(),i=f.result(),a=i.length;if(s.pop(),c.push(s),s=null,a)if(1&o){if(0<(e=(n=i[0]).length-1)){for(p||(l.polygonStart(),p=!0),l.lineStart(),t=0;t<e;++t)l.point((r=n[t])[0],r[1]);l.lineEnd()}}else 1<a&&2&o&&i.push(i.pop().concat(i.shift())),u.push(i.filter(Xl))}return e}}function Xl(t){return 1<t.length}function $l(t,e){return((t=t.x)[0]<0?t[1]-Di-qi:Di-t[1])-((e=e.x)[0]<0?e[1]-Di-qi:Di-e[1])}var Zl=Vl(function(){return!0},function(f){var d,p=NaN,h=NaN,g=NaN;return{lineStart:function(){f.lineStart(),d=1},point:function(t,e){var n,r,o,i,a,l,c,u=0<t?Oi:-Oi,s=Gi(t-p);Gi(s-Oi)<qi?(f.point(p,h=0<(h+e)/2?Di:-Di),f.point(g,h),f.lineEnd(),f.lineStart(),f.point(u,h),f.point(t,h),d=0):g!==u&&Oi<=s&&(Gi(p-g)<qi&&(p-=g*qi),Gi(t-u)<qi&&(t-=u*qi),r=h,i=e,c=Ki((n=p)-(o=t)),h=Gi(c)>qi?Wi((Ki(r)*(l=Xi(i))*Ki(o)-Ki(i)*(a=Xi(r))*Ki(n))/(a*l*c)):(r+i)/2,f.point(g,h),f.lineEnd(),f.lineStart(),f.point(u,h),d=0),f.point(p=t,h=e),g=u},lineEnd:function(){f.lineEnd(),p=h=NaN},clean:function(){return 2-d}}},function(t,e,n,r){var o;if(null==t)o=n*Di,r.point(-Oi,o),r.point(0,o),r.point(Oi,o),r.point(Oi,0),r.point(Oi,-o),r.point(0,-o),r.point(-Oi,-o),r.point(-Oi,0),r.point(-Oi,o);else if(Gi(t[0]-e[0])>qi){var i=t[0]<e[0]?Oi:-Oi;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])},[-Oi,-Di]);function Jl(o){var T=Xi(o),i=6*Yi,p=0<T,h=Gi(T)>qi;function g(t,e){return Xi(t)*Xi(e)>T}function m(t,e,n){var r=[1,0,0],o=za(Sa(t),Sa(e)),i=Ca(o,o),a=o[0],l=i-a*a;if(!l)return!n&&t;var c=T*i/l,u=-T*a/l,s=za(r,o),f=Na(r,c);Aa(f,Na(o,u));var d=s,p=Ca(f,d),h=Ca(d,d),g=p*p-h*(Ca(f,f)-1);if(!(g<0)){var m=ea(g),v=Na(d,(-p-m)/h);if(Aa(v,f),v=Ta(v),!n)return v;var _,b=t[0],y=e[0],w=t[1],x=e[1];y<b&&(_=b,b=y,y=_);var M=y-b,E=Gi(M-Oi)<qi;if(!E&&x<w&&(_=w,w=x,x=_),E||M<qi?E?0<w+x^v[1]<(Gi(v[0]-b)<qi?w:x):w<=v[1]&&v[1]<=x:Oi<M^(b<=v[0]&&v[0]<=y)){var k=Na(d,(-p+m)/h);return Aa(k,f),[v,Ta(k)]}}}function v(t,e){var n=p?o:Oi-o,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}return Vl(g,function(l){var c,u,s,f,d;return{lineStart:function(){f=s=!1,d=1},point:function(t,e){var n,r=[t,e],o=g(t,e),i=p?o?0:v(t,e):o?v(t+(t<0?Oi:-Oi),e):0;if(!c&&(f=s=o)&&l.lineStart(),o!==s&&(!(n=m(c,r))||Dl(c,n)||Dl(r,n))&&(r[0]+=qi,r[1]+=qi,o=g(r[0],r[1])),o!==s)d=0,o?(l.lineStart(),n=m(r,c),l.point(n[0],n[1])):(n=m(c,r),l.point(n[0],n[1]),l.lineEnd()),c=n;else if(h&&c&&p^o){var a;i&u||!(a=m(r,c,!0))||(d=0,p?(l.lineStart(),l.point(a[0][0],a[0][1]),l.point(a[1][0],a[1][1]),l.lineEnd()):(l.point(a[1][0],a[1][1]),l.lineEnd(),l.lineStart(),l.point(a[0][0],a[0][1])))}!o||c&&Dl(c,r)||l.point(r[0],r[1]),c=r,s=o,u=i},lineEnd:function(){s&&l.lineEnd(),c=null},clean:function(){return d|(f&&s)<<1}}},function(t,e,n,r){ql(r,o,i,n,t,e)},p?[0,-o]:[-Oi,o-Oi])}var Ql=1e9,Kl=-Ql;function tc(v,_,b,y){function w(t,e){return v<=t&&t<=b&&_<=e&&e<=y}function x(t,e,n,r){var o=0,i=0;if(null==t||(o=a(t,n))!==(i=a(e,n))||l(t,e)<0^0<n)for(;r.point(0===o||3===o?v:b,1<o?y:_),(o=(o+n+4)%4)!==i;);else r.point(e[0],e[1])}function a(t,e){return Gi(t[0]-v)<qi?0<e?0:3:Gi(t[0]-b)<qi?0<e?2:1:Gi(t[1]-_)<qi?0<e?1:0:0<e?3:2}function M(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var o,f,i,a,l,c,u,s,d,p,h,g=r,t=Ol(),e={point:n,lineStart:function(){e.point=m,f&&f.push(i=[]);p=!0,d=!1,u=s=NaN},lineEnd:function(){o&&(m(a,l),c&&d&&t.rejoin(),o.push(t.result()));e.point=n,d&&g.lineEnd()},polygonStart:function(){g=t,o=[],f=[],h=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=f.length;e<n;++e)for(var r,o,i=f[e],a=1,l=i.length,c=i[0],u=c[0],s=c[1];a<l;++a)r=u,o=s,c=i[a],u=c[0],s=c[1],o<=y?y<s&&(s-o)*(v-r)<(u-r)*(y-o)&&++t:s<=y&&(u-r)*(y-o)<(s-o)*(v-r)&&--t;return t}(),e=h&&t,n=(o=Po(o)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),x(null,null,1,r),r.lineEnd()),n&&Ul(o,M,t,x,r),r.polygonEnd());g=r,o=f=i=null}};function n(t,e){w(t,e)&&g.point(t,e)}function m(t,e){var n=w(t,e);if(f&&i.push([t,e]),p)a=t,l=e,p=!1,(c=n)&&(g.lineStart(),g.point(t,e));else if(n&&d)g.point(t,e);else{var r=[u=Math.max(Kl,Math.min(Ql,u)),s=Math.max(Kl,Math.min(Ql,s))],o=[t=Math.max(Kl,Math.min(Ql,t)),e=Math.max(Kl,Math.min(Ql,e))];!function(t,e,n,r,o,i){var a,l=t[0],c=t[1],u=0,s=1,f=e[0]-l,d=e[1]-c;if(a=n-l,f||!(0<a)){if(a/=f,f<0){if(a<u)return;a<s&&(s=a)}else if(0<f){if(s<a)return;u<a&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(s<a)return;u<a&&(u=a)}else if(0<f){if(a<u)return;a<s&&(s=a)}if(a=r-c,d||!(0<a)){if(a/=d,d<0){if(a<u)return;a<s&&(s=a)}else if(0<d){if(s<a)return;u<a&&(u=a)}if(a=i-c,d||!(a<0)){if(a/=d,d<0){if(s<a)return;u<a&&(u=a)}else if(0<d){if(a<u)return;a<s&&(s=a)}return 0<u&&(t[0]=l+u*f,t[1]=c+u*d),s<1&&(e[0]=l+s*f,e[1]=c+s*d),!0}}}}}(r,o,v,_,b,y)?n&&(g.lineStart(),g.point(t,e),h=!1):(d||(g.lineStart(),g.point(r[0],r[1])),g.point(o[0],o[1]),n||g.lineEnd(),h=!1)}u=t,s=e,d=n}return e}}var ec,nc,rc,oc=Fi(),ic={sphere:aa,point:aa,lineStart:function(){ic.point=lc,ic.lineEnd=ac},lineEnd:aa,polygonStart:aa,polygonEnd:aa};function ac(){ic.point=ic.lineEnd=aa}function lc(t,e){ec=t*=Yi,nc=Ki(e*=Yi),rc=Xi(e),ic.point=cc}function cc(t,e){t*=Yi;var n=Ki(e*=Yi),r=Xi(e),o=Gi(t-ec),i=Xi(o),a=r*Ki(o),l=rc*n-nc*r*i,c=nc*n+rc*r*i;oc.add(Vi(ea(a*a+l*l),c)),ec=t,nc=n,rc=r}function uc(t){return oc.reset(),da(t,ic),+oc}var sc=[null,null],fc={type:"LineString",coordinates:sc};function dc(t,e){return sc[0]=t,sc[1]=e,uc(fc)}var pc={Feature:function(t,e){return gc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)if(gc(n[r].geometry,e))return!0;return!1}},hc={Sphere:function(){return!0},Point:function(t,e){return mc(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(mc(n[r],e))return!0;return!1},LineString:function(t,e){return vc(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(vc(n[r],e))return!0;return!1},Polygon:function(t,e){return _c(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(_c(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)if(gc(n[r],e))return!0;return!1}};function gc(t,e){return!(!t||!hc.hasOwnProperty(t.type))&&hc[t.type](t,e)}function mc(t,e){return 0===dc(t,e)}function vc(t,e){for(var n,r,o,i=0,a=t.length;i<a;i++){if(0===(r=dc(t[i],e)))return!0;if(0<i&&0<(o=dc(t[i],t[i-1]))&&n<=o&&r<=o&&(n+r-o)*(1-Math.pow((n-r)/o,2))<ji*o)return!0;n=r}return!1}function _c(t,e){return!!Wl(t.map(bc),yc(e))}function bc(t){return(t=t.map(yc)).pop(),t}function yc(t){return[t[0]*Yi,t[1]*Yi]}function wc(t,e){return(t&&pc.hasOwnProperty(t.type)?pc[t.type]:gc)(t,e)}function xc(t,e,n){var r=Eo(t,e-qi,n).concat(e);return function(e){return r.map(function(t){return[e,t]})}}function Mc(t,e,n){var r=Eo(t,e-qi,n).concat(e);return function(e){return r.map(function(t){return[t,e]})}}function Ec(){var e,n,r,o,i,a,l,c,u,s,f,d,p=10,h=p,g=90,m=360,v=2.5;function _(){return{type:"MultiLineString",coordinates:t()}}function t(){return Eo($i(o/g)*g,r,g).map(f).concat(Eo($i(c/m)*m,l,m).map(d)).concat(Eo($i(n/p)*p,e,p).filter(function(t){return Gi(t%g)>qi}).map(u)).concat(Eo($i(a/h)*h,i,h).filter(function(t){return Gi(t%m)>qi}).map(s))}return _.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(d(l).slice(1),f(r).reverse().slice(1),d(c).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(o=+t[0][0],r=+t[1][0],c=+t[0][1],l=+t[1][1],r<o&&(t=o,o=r,r=t),l<c&&(t=c,c=l,l=t),_.precision(v)):[[o,c],[r,l]]},_.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],i=+t[1][1],e<n&&(t=n,n=e,e=t),i<a&&(t=a,a=i,i=t),_.precision(v)):[[n,a],[e,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],_):[g,m]},_.stepMinor=function(t){return arguments.length?(p=+t[0],h=+t[1],_):[p,h]},_.precision=function(t){return arguments.length?(v=+t,u=xc(a,i,90),s=Mc(n,e,v),f=xc(c,l,90),d=Mc(o,r,v),_):v},_.extentMajor([[-180,-90+qi],[180,90-qi]]).extentMinor([[-180,-80-qi],[180,80+qi]])}function kc(t){return t}var Tc,Sc,Cc,zc,Ac=Fi(),Nc=Fi(),Pc={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){Pc.lineStart=Fc,Pc.lineEnd=Rc},polygonEnd:function(){Pc.lineStart=Pc.lineEnd=Pc.point=aa,Ac.add(Gi(Nc)),Nc.reset()},result:function(){var t=Ac/2;return Ac.reset(),t}};function Fc(){Pc.point=Bc}function Bc(t,e){Pc.point=Lc,Tc=Cc=t,Sc=zc=e}function Lc(t,e){Nc.add(zc*t-Cc*e),Cc=t,zc=e}function Rc(){Lc(Tc,Sc)}var qc=1/0,jc=qc,Oc=-qc,Dc=Oc,Hc={point:function(t,e){t<qc&&(qc=t);Oc<t&&(Oc=t);e<jc&&(jc=e);Dc<e&&(Dc=e)},lineStart:aa,lineEnd:aa,polygonStart:aa,polygonEnd:aa,result:function(){var t=[[qc,jc],[Oc,Dc]];return Oc=Dc=-(jc=qc=1/0),t}};var Uc,Ic,Yc,Gc,Wc=0,Vc=0,Xc=0,$c=0,Zc=0,Jc=0,Qc=0,Kc=0,tu=0,eu={point:nu,lineStart:ru,lineEnd:au,polygonStart:function(){eu.lineStart=lu,eu.lineEnd=cu},polygonEnd:function(){eu.point=nu,eu.lineStart=ru,eu.lineEnd=au},result:function(){var t=tu?[Qc/tu,Kc/tu]:Jc?[$c/Jc,Zc/Jc]:Xc?[Wc/Xc,Vc/Xc]:[NaN,NaN];return Wc=Vc=Xc=$c=Zc=Jc=Qc=Kc=tu=0,t}};function nu(t,e){Wc+=t,Vc+=e,++Xc}function ru(){eu.point=ou}function ou(t,e){eu.point=iu,nu(Yc=t,Gc=e)}function iu(t,e){var n=t-Yc,r=e-Gc,o=ea(n*n+r*r);$c+=o*(Yc+t)/2,Zc+=o*(Gc+e)/2,Jc+=o,nu(Yc=t,Gc=e)}function au(){eu.point=nu}function lu(){eu.point=uu}function cu(){su(Uc,Ic)}function uu(t,e){eu.point=su,nu(Uc=Yc=t,Ic=Gc=e)}function su(t,e){var n=t-Yc,r=e-Gc,o=ea(n*n+r*r);$c+=o*(Yc+t)/2,Zc+=o*(Gc+e)/2,Jc+=o,Qc+=(o=Gc*t-Yc*e)*(Yc+t),Kc+=o*(Gc+e),tu+=3*o,nu(Yc=t,Gc=e)}function fu(t){this._context=t}fu.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ui)}},result:aa};var du,pu,hu,gu,mu,vu=Fi(),_u={point:aa,lineStart:function(){_u.point=bu},lineEnd:function(){du&&yu(pu,hu),_u.point=aa},polygonStart:function(){du=!0},polygonEnd:function(){du=null},result:function(){var t=+vu;return vu.reset(),t}};function bu(t,e){_u.point=yu,pu=gu=t,hu=mu=e}function yu(t,e){gu-=t,mu-=e,vu.add(ea(gu*gu+mu*mu)),gu=t,mu=e}function wu(){this._string=[]}function xu(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Mu(e,n){var r,o,i=4.5;function a(t){return t&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),da(t,r(o))),o.result()}return a.area=function(t){return da(t,r(Pc)),Pc.result()},a.measure=function(t){return da(t,r(_u)),_u.result()},a.bounds=function(t){return da(t,r(Hc)),Hc.result()},a.centroid=function(t){return da(t,r(eu)),eu.result()},a.projection=function(t){return arguments.length?(r=null==t?(e=null,kc):(e=t).stream,a):e},a.context=function(t){return arguments.length?(o=null==t?(n=null,new wu):new fu(n=t),"function"!=typeof i&&o.pointRadius(i),a):n},a.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(o.pointRadius(+t),+t),a):i},a.projection(e).context(n)}function Eu(r){return function(t){var e=new ku;for(var n in r)e[n]=r[n];return e.stream=t,e}}function ku(){}function Tu(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),da(n,t.stream(Hc)),e(Hc.result()),null!=r&&t.clipExtent(r),t}function Su(a,l,t){return Tu(a,function(t){var e=l[1][0]-l[0][0],n=l[1][1]-l[0][1],r=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),o=+l[0][0]+(e-r*(t[1][0]+t[0][0]))/2,i=+l[0][1]+(n-r*(t[1][1]+t[0][1]))/2;a.scale(150*r).translate([o,i])},t)}function Cu(t,e,n){return Su(t,[[0,0],e],n)}function zu(i,a,t){return Tu(i,function(t){var e=+a,n=e/(t[1][0]-t[0][0]),r=(e-n*(t[1][0]+t[0][0]))/2,o=-n*t[0][1];i.scale(150*n).translate([r,o])},t)}function Au(i,a,t){return Tu(i,function(t){var e=+a,n=e/(t[1][1]-t[0][1]),r=-n*t[0][0],o=(e-n*(t[1][1]+t[0][1]))/2;i.scale(150*n).translate([r,o])},t)}wu.prototype={_radius:4.5,_circle:xu(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=xu(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ku.prototype={constructor:ku,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Nu=16,Pu=Xi(30*Yi);function Fu(t,e){return+e?function(z,A){function N(t,e,n,r,o,i,a,l,c,u,s,f,d,p){var h=a-t,g=l-e,m=h*h+g*g;if(4*A<m&&d--){var v=r+u,_=o+s,b=i+f,y=ea(v*v+_*_+b*b),w=oa(b/=y),x=Gi(Gi(b)-1)<qi||Gi(n-c)<qi?(n+c)/2:Vi(_,v),M=z(x,w),E=M[0],k=M[1],T=E-t,S=k-e,C=g*T-h*S;(A<C*C/m||.3<Gi((h*T+g*S)/m-.5)||r*u+o*s+i*f<Pu)&&(N(t,e,n,r,o,i,E,k,x,v/=y,_/=y,b,d,p),p.point(E,k),N(E,k,x,v,_,b,a,l,c,u,s,f,d,p))}}return function(o){var n,r,i,a,l,c,u,s,f,d,p,h,g={point:t,lineStart:e,lineEnd:v,polygonStart:function(){o.polygonStart(),g.lineStart=_},polygonEnd:function(){o.polygonEnd(),g.lineStart=e}};function t(t,e){t=z(t,e),o.point(t[0],t[1])}function e(){s=NaN,g.point=m,o.lineStart()}function m(t,e){var n=Sa([t,e]),r=z(t,e);N(s,f,u,d,p,h,s=r[0],f=r[1],u=t,d=n[0],p=n[1],h=n[2],Nu,o),o.point(s,f)}function v(){g.point=t,o.lineEnd()}function _(){e(),g.point=b,g.lineEnd=y}function b(t,e){m(n=t,e),r=s,i=f,a=d,l=p,c=h,g.point=m}function y(){N(s,f,u,d,p,h,r,i,n,a,l,c,Nu,o),(g.lineEnd=v)()}return g}}(t,e):(n=t,Eu({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n}var Bu=Eu({point:function(t,e){this.stream.point(t*Yi,e*Yi)}});function Lu(t,n,r,e){var o=Xi(e),i=Ki(e),a=o*t,l=i*t,c=o/t,u=i/t,s=(i*r-o*n)/t,f=(i*n+o*r)/t;function d(t,e){return[a*t-l*e+n,r-l*t-a*e]}return d.invert=function(t,e){return[c*t-u*e+s,f-u*t-c*e]},d}function Ru(t){return qu(function(){return t})()}function qu(t){var n,o,e,r,i,a,l,c,u,s,f=150,d=480,p=250,h=0,g=0,m=0,v=0,_=0,b=0,y=null,w=Zl,x=null,M=kc,E=.5;function k(t){return c(t[0]*Yi,t[1]*Yi)}function T(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Ii,t[1]*Ii]}function S(){var t=Lu(f,0,0,b).apply(null,n(h,g)),e=(b?Lu:function(n,r,o){function t(t,e){return[r+n*t,o-n*e]}return t.invert=function(t,e){return[(t-r)/n,(o-e)/n]},t})(f,d-t[0],p-t[1],b);return o=Pl(m,v,_),l=Al(n,e),c=Al(o,l),a=Fu(l,E),C()}function C(){return u=s=null,k}return k.stream=function(t){return u&&s===t?u:u=Bu((r=o,Eu({point:function(t,e){var n=r(t,e);return this.stream.point(n[0],n[1])}})(w(a(M(s=t))))));var r},k.preclip=function(t){return arguments.length?(w=t,y=void 0,C()):w},k.postclip=function(t){return arguments.length?(M=t,x=e=r=i=null,C()):M},k.clipAngle=function(t){return arguments.length?(w=+t?Jl(y=t*Yi):(y=null,Zl),C()):y*Ii},k.clipExtent=function(t){return arguments.length?(M=null==t?(x=e=r=i=null,kc):tc(x=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),C()):null==x?null:[[x,e],[r,i]]},k.scale=function(t){return arguments.length?(f=+t,S()):f},k.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],S()):[d,p]},k.center=function(t){return arguments.length?(h=t[0]%360*Yi,g=t[1]%360*Yi,S()):[h*Ii,g*Ii]},k.rotate=function(t){return arguments.length?(m=t[0]%360*Yi,v=t[1]%360*Yi,_=2<t.length?t[2]%360*Yi:0,S()):[m*Ii,v*Ii,_*Ii]},k.angle=function(t){return arguments.length?(b=t%360*Yi,S()):b*Ii},k.precision=function(t){return arguments.length?(a=Fu(l,E=t*t),C()):ea(E)},k.fitExtent=function(t,e){return Su(k,t,e)},k.fitSize=function(t,e){return Cu(k,t,e)},k.fitWidth=function(t,e){return zu(k,t,e)},k.fitHeight=function(t,e){return Au(k,t,e)},function(){return n=t.apply(this,arguments),k.invert=n.invert&&T,S()}}function ju(t){var e=0,n=Oi/3,r=qu(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*Yi,n=t[1]*Yi):[e*Ii,n*Ii]},o}function Ou(t,e){var n=Ki(t),r=(n+Ki(e))/2;if(Gi(r)<qi)return function(t){var n=Xi(t);function e(t,e){return[t*n,Ki(e)/n]}return e.invert=function(t,e){return[t/n,oa(e*n)]},e}(t);var o=1+n*(2*r-n),i=ea(o)/r;function a(t,e){var n=ea(o-2*r*Ki(e))/r;return[n*Ki(t*=r),i-n*Xi(t)]}return a.invert=function(t,e){var n=i-e;return[Vi(t,Gi(n))/r*ta(n),oa((o-(t*t+n*n)*r*r)/(2*r))]},a}function Du(){return ju(Ou).scale(155.424).center([0,33.6442])}function Hu(){return Du().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Uu(){var e,n,o,i,a,r,l=Hu(),c=Du().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Du().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)}function d(){return e=n=null,f}return f.invert=function(t){var e=l.scale(),n=l.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.12<=o&&o<.234&&-.425<=r&&r<-.214?c:.166<=o&&o<.234&&-.214<=r&&r<-.115?u:l).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[l.stream(n=t),c.stream(t),u.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},f.precision=function(t){return arguments.length?(l.precision(t),c.precision(t),u.precision(t),d()):l.precision()},f.scale=function(t){return arguments.length?(l.scale(t),c.scale(.35*t),u.scale(t),f.translate(l.translate())):l.scale()},f.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),n=+t[0],r=+t[1];return o=l.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(s),i=c.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+qi,r+.12*e+qi],[n-.214*e-qi,r+.234*e-qi]]).stream(s),a=u.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+qi,r+.166*e+qi],[n-.115*e-qi,r+.234*e-qi]]).stream(s),d()},f.fitExtent=function(t,e){return Su(f,t,e)},f.fitSize=function(t,e){return Cu(f,t,e)},f.fitWidth=function(t,e){return zu(f,t,e)},f.fitHeight=function(t,e){return Au(f,t,e)},f.scale(1070)}function Iu(i){return function(t,e){var n=Xi(t),r=Xi(e),o=i(n*r);return[o*r*Ki(t),o*Ki(e)]}}function Yu(a){return function(t,e){var n=ea(t*t+e*e),r=a(n),o=Ki(r),i=Xi(r);return[Vi(t*o,n*i),oa(n&&e*o/n)]}}var Gu=Iu(function(t){return ea(2/(1+t))});Gu.invert=Yu(function(t){return 2*oa(t/2)});var Wu=Iu(function(t){return(t=ra(t))&&t/Ki(t)});function Vu(){return Ru(Wu).scale(79.4188).clipAngle(179.999)}function Xu(t,e){return[t,Ji(na((Di+e)/2))]}function $u(n){var r,o,i,a=Ru(n),e=a.center,l=a.scale,c=a.translate,u=a.clipExtent,s=null;function f(){var t=Oi*l(),e=a(Rl(a.rotate()).invert([0,0]));return u(null==s?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===Xu?[[Math.max(e[0]-t,s),r],[Math.min(e[0]+t,o),i]]:[[s,Math.max(e[1]-t,r)],[o,Math.min(e[1]+t,i)]])}return a.scale=function(t){return arguments.length?(l(t),f()):l()},a.translate=function(t){return arguments.length?(c(t),f()):c()},a.center=function(t){return arguments.length?(e(t),f()):e()},a.clipExtent=function(t){return arguments.length?(null==t?s=r=o=i=null:(s=+t[0][0],r=+t[0][1],o=+t[1][0],i=+t[1][1]),f()):null==s?null:[[s,r],[o,i]]},f()}function Zu(t){return na((Di+t)/2)}function Ju(t,e){var n=Xi(t),o=t===e?Ki(t):Ji(n/Xi(e))/Ji(Zu(e)/Zu(t)),i=n*Qi(Zu(t),o)/o;if(!o)return Xu;function r(t,e){0<i?e<-Di+qi&&(e=-Di+qi):Di-qi<e&&(e=Di-qi);var n=i/Qi(Zu(e),o);return[n*Ki(o*t),i-n*Xi(o*t)]}return r.invert=function(t,e){var n=i-e,r=ta(o)*ea(t*t+n*n);return[Vi(t,Gi(n))/o*ta(n),2*Wi(Qi(i/r,1/o))-Di]},r}function Qu(t,e){return[t,e]}function Ku(){return Ru(Qu).scale(152.63)}function ts(t,e){var n=Xi(t),o=t===e?Ki(t):(n-Xi(e))/(e-t),i=n/o+t;if(Gi(o)<qi)return Qu;function r(t,e){var n=i-e,r=o*t;return[n*Ki(r),i-n*Xi(r)]}return r.invert=function(t,e){var n=i-e;return[Vi(t,Gi(n))/o*ta(n),i-ta(o)*ea(t*t+n*n)]},r}Wu.invert=Yu(function(t){return t}),Xu.invert=function(t,e){return[t,2*Wi(Zi(e))-Di]},Qu.invert=Qu;var es=1.340264,ns=-.081106,rs=893e-6,os=.003796,is=ea(3)/2;function as(t,e){var n=oa(is*Ki(e)),r=n*n,o=r*r*r;return[t*Xi(n)/(is*(es+3*ns*r+o*(7*rs+9*os*r))),n*(es+ns*r+o*(rs+os*r))]}function ls(t,e){var n=Xi(e),r=Xi(t)*n;return[n*Ki(t)/r,Ki(e)/r]}function cs(){return Ru(ls).scale(144.049).clipAngle(60)}function us(n,r,o,i){return 1===n&&1===r&&0===o&&0===i?kc:Eu({point:function(t,e){this.stream.point(t*n+o,e*r+i)}})}function ss(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function fs(){return Ru(ss).scale(175.295)}function ds(t,e){return[Xi(e)*Ki(t),Ki(e)]}function ps(){return Ru(ds).scale(249.5).clipAngle(90+qi)}function hs(t,e){var n=Xi(e),r=1+Xi(t)*n;return[n*Ki(t)/r,Ki(e)/r]}function gs(){return Ru(hs).scale(250).clipAngle(142)}function ms(t,e){return[Ji(na((Di+e)/2)),-t]}as.invert=function(t,e){for(var n,r=e,o=r*r,i=o*o*o,a=0;a<12&&(i=(o=(r-=n=(r*(es+ns*o+i*(rs+os*o))-e)/(es+3*ns*o+i*(7*rs+9*os*o)))*r)*o*o,!(Gi(n)<ji));++a);return[is*t*(es+3*ns*o+i*(7*rs+9*os*o))/Xi(r),oa(Ki(r)/is)]},ls.invert=Yu(Wi),ss.invert=function(t,e){var n,r=e,o=25;do{var i=r*r,a=i*i;r-=n=(r*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))-e)/(1.007226+i*(.045255+a*(.259866*i-.311325-.005916*11*a)))}while(Gi(n)>qi&&0<--o);return[t/(.8707+(i=r*r)*(i*(i*i*i*(.003971-.001529*i)-.013791)-.131979)),r]},ds.invert=Yu(oa),hs.invert=Yu(function(t){return 2*Wi(t)}),ms.invert=function(t,e){return[-e,2*Wi(Zi(t))-Di]};var vs=Object.freeze({__proto__:null,geoArea:ka,geoBounds:function(t){var e,n,r,o,i,a,l;if(Ra=La=-(Fa=Ba=1/0),Ha=[],da(t,al),n=Ha.length){for(Ha.sort(gl),e=1,i=[r=Ha[0]];e<n;++e)ml(r,(o=Ha[e])[0])||ml(r,o[1])?(hl(r[0],o[1])>hl(r[0],r[1])&&(r[1]=o[1]),hl(o[0],r[1])>hl(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,e=0,r=i[n=i.length-1];e<=n;r=o,++e)o=i[e],(l=hl(r[1],o[0]))>a&&(a=l,Fa=o[0],La=r[1])}return Ha=Ua=null,Fa===1/0||Ba===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fa,Ba],[La,Ra]]},geoCentroid:Cl,geoCircle:function(){var r,o,i=zl([0,0]),a=zl(90),l=zl(6),c={point:function(t,e){r.push(t=o(t,e)),t[0]*=Ii,t[1]*=Ii}};function e(){var t=i.apply(this,arguments),e=a.apply(this,arguments)*Yi,n=l.apply(this,arguments)*Yi;return r=[],o=Pl(-t[0]*Yi,-t[1]*Yi,0).invert,ql(c,e,n,1),t={type:"Polygon",coordinates:[r]},r=o=null,t}return e.center=function(t){return arguments.length?(i="function"==typeof t?t:zl([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(a="function"==typeof t?t:zl(+t),e):a},e.precision=function(t){return arguments.length?(l="function"==typeof t?t:zl(+t),e):l},e},geoClipAntimeridian:Zl,geoClipCircle:Jl,geoClipExtent:function(){var e,n,r,o=0,i=0,a=960,l=500;return r={stream:function(t){return e&&n===t?e:e=tc(o,i,a,l)(n=t)},extent:function(t){return arguments.length?(o=+t[0][0],i=+t[0][1],a=+t[1][0],l=+t[1][1],e=n=null,r):[[o,i],[a,l]]}}},geoClipRectangle:tc,geoContains:wc,geoDistance:dc,geoGraticule:Ec,geoGraticule10:function(){return Ec()()},geoInterpolate:function(t,e){var n=t[0]*Yi,r=t[1]*Yi,o=e[0]*Yi,i=e[1]*Yi,a=Xi(r),l=Ki(r),c=Xi(i),u=Ki(i),s=a*Xi(n),f=a*Ki(n),d=c*Xi(o),p=c*Ki(o),h=2*oa(ea(ia(i-r)+a*c*ia(o-n))),g=Ki(h),m=h?function(t){var e=Ki(t*=h)/g,n=Ki(h-t)/g,r=n*s+e*d,o=n*f+e*p,i=n*l+e*u;return[Vi(o,r)*Ii,Vi(i,ea(r*r+o*o))*Ii]}:function(){return[n*Ii,r*Ii]};return m.distance=h,m},geoLength:uc,geoPath:Mu,geoAlbers:Hu,geoAlbersUsa:Uu,geoAzimuthalEqualArea:function(){return Ru(Gu).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:Gu,geoAzimuthalEquidistant:Vu,geoAzimuthalEquidistantRaw:Wu,geoConicConformal:function(){return ju(Ju).scale(109.5).parallels([30,30])},geoConicConformalRaw:Ju,geoConicEqualArea:Du,geoConicEqualAreaRaw:Ou,geoConicEquidistant:function(){return ju(ts).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:ts,geoEqualEarth:function(){return Ru(as).scale(177.158)},geoEqualEarthRaw:as,geoEquirectangular:Ku,geoEquirectangularRaw:Qu,geoGnomonic:cs,geoGnomonicRaw:ls,geoIdentity:function(){var e,n,r,o,i,a,l=1,c=0,u=0,s=1,f=1,d=kc,p=null,h=kc;function g(){return o=i=null,a}return a={stream:function(t){return o&&i===t?o:o=d(h(i=t))},postclip:function(t){return arguments.length?(h=t,p=e=n=r=null,g()):h},clipExtent:function(t){return arguments.length?(h=null==t?(p=e=n=r=null,kc):tc(p=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),g()):null==p?null:[[p,e],[n,r]]},scale:function(t){return arguments.length?(d=us((l=+t)*s,l*f,c,u),g()):l},translate:function(t){return arguments.length?(d=us(l*s,l*f,c=+t[0],u=+t[1]),g()):[c,u]},reflectX:function(t){return arguments.length?(d=us(l*(s=t?-1:1),l*f,c,u),g()):s<0},reflectY:function(t){return arguments.length?(d=us(l*s,l*(f=t?-1:1),c,u),g()):f<0},fitExtent:function(t,e){return Su(a,t,e)},fitSize:function(t,e){return Cu(a,t,e)},fitWidth:function(t,e){return zu(a,t,e)},fitHeight:function(t,e){return Au(a,t,e)}}},geoProjection:Ru,geoProjectionMutator:qu,geoMercator:function(){return $u(Xu).scale(961/Ui)},geoMercatorRaw:Xu,geoNaturalEarth1:fs,geoNaturalEarth1Raw:ss,geoOrthographic:ps,geoOrthographicRaw:ds,geoStereographic:gs,geoStereographicRaw:hs,geoTransverseMercator:function(){var t=$u(ms),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:ms,geoRotation:Rl,geoStream:da,geoTransform:function(t){return{stream:Eu(t)}}});function _s(){var r={},o=0,i=function(t,e){if(void 0!==t)return void 0===e?r[t]:e!==r[t]&&(void 0===r[t]&&Object.defineProperty(i,t,{get:function(){return r[t]}}),r[t]=e,o++,!0);var n=o;return o=0,n};return i}var bs={},ys="points";function ws(t){var e=bs.points.column_names[t];return void 0!==e&&(!Array.isArray(e)||!!e.length)}function xs(){var t,e,n=function(){var u=[];if(!ws("lon")||!ws("lat"))return{type:"FeatureCollection",features:[],properties:{name:null,have_color:null,have_value:null,max_value:null}};var s=H_.getParser(),f=ws("name"),d=ws("color"),p=ws("value"),h=ws("metadata"),g=0,m=p?0:null;bs.points.forEach(function(t,e){var n=s(t.lon),r=s(t.lat),o=d?t.color:null;if(isNaN(n)||isNaN(r)||""===o)g++;else{var i=null;if(p){var a=s(t.value);if(!Number.isFinite(a)||a<0)return void g++;m<(i=a)&&(m=i)}var l=f?t.name:null,c=h?t.metadata:null;u.push({type:"Feature",geometry:{type:"Point",coordinates:null},properties:{unprojected_feature:{type:"Feature",geometry:{type:"Point",coordinates:[n,r]}},name:l,color_group:o,value:i,metadata:c,source:ys,index:e}})}});var t={type:"FeatureCollection",features:u,properties:{have_name:f,have_color:d,have_value:p,max_value:m,source:ys}};return g&&(1===g?console.warn("1 points ignored because of invalid entry"):console.warn(g+" points ignored because of invalid entry")),t}();return{collection:n,map:(t=n,e=we(),t.features.forEach(function(t){e.set(t.properties.index,t)}),e)}}var Ms=Math.abs,Es=Math.atan,ks=Math.atan2,Ts=Math.cos,Ss=Math.exp,Cs=Math.floor,zs=Math.log,As=Math.max,Ns=Math.min,Ps=Math.sign||function(t){return 0<t?1:t<0?-1:0},Fs=Math.sin,Bs=Math.tan,Ls=1e-6,Rs=Math.PI,qs=Rs/2,js=Rs/4,Os=Math.SQRT1_2,Ds=Vs(2),Hs=Vs(Rs),Us=2*Rs,Is=180/Rs,Ys=Rs/180;function Gs(t){return 1<t?qs:t<-1?-qs:Math.asin(t)}function Ws(t){return 1<t?0:t<-1?Rs:Math.acos(t)}function Vs(t){return 0<t?Math.sqrt(t):0}function Xs(t,e){var n,r=Ts(e),o=(n=Ws(r*Ts(t/=2)))?n/Math.sin(n):1;return[2*r*Fs(t)*o,Fs(e)*o]}function $s(t,e){var n=Bs(e/2),r=Vs(1-n*n),o=1+r*Ts(t/=2),i=Fs(t)*r/o,a=n/o,l=i*i,c=a*a;return[4/3*i*(3+l-3*c),4/3*a*(3+3*l-c)]}Xs.invert=function(t,e){if(!(Rs*Rs+Ls<t*t+4*e*e)){var n=t,r=e,o=25;do{var i,a=Fs(n),l=Fs(n/2),c=Ts(n/2),u=Fs(r),s=Ts(r),f=Fs(2*r),d=u*u,p=s*s,h=l*l,g=1-p*c*c,m=g?Ws(s*c)*Vs(i=1/g):i=0,v=2*m*s*l-t,_=m*u-e,b=i*(p*h+m*s*c*d),y=i*(.5*a*f-2*m*u*l),w=.25*i*(f*l-m*u*p*a),x=i*(d*c+m*h*s),M=y*w-x*b;if(!M)break;var E=(_*y-v*x)/M,k=(v*w-_*b)/M;n-=E,r-=k}while((Ms(E)>Ls||Ms(k)>Ls)&&0<--o);return[n,r]}},$s.invert=function(t,e){if(e*=3/8,!(t*=3/8)&&1<Ms(e))return null;var n,r,o,i,a=1+t*t+e*e,l=Vs((a-Vs(a*a-4*e*e))/2),c=Gs(l)/3,u=l?(o=Ms(e/l),zs(o+Vs(o*o-1))/3):(r=Ms(t),zs(r+Vs(r*r+1))/3),s=Ts(c),f=(Ss(n=u)+Ss(-n))/2,d=f*f-s*s;return[2*Ps(t)*ks((i=u,(Ss(i)-Ss(-i))/2*s),.25-d),2*Ps(e)*ks(f*Fs(c),.25+d)]};var Zs=Vs(8),Js=zs(1+Ds);function Qs(t,e){var n=Ms(e);return n<js?[t,zs(Bs(js+e/2))]:[t*Ts(n)*(2*Ds-1/Fs(n)),Ps(e)*(2*Ds*(n-js)-zs(Bs(n/2)))]}function Ks(r,o){if(arguments.length<2&&(o=r),1===o)return Gu;if(o===1/0)return tf;function t(t,e){var n=Gu(t/o,e);return n[0]*=r,n}return t.invert=function(t,e){var n=Gu.invert(t/r,e);return n[0]*=o,n},t}function tf(t,e){return[t*Ts(e)/Ts(e/=2),2*Fs(e)]}function ef(t,e){for(var n,r=t*Fs(e),o=30;e-=n=(e+Fs(e)-r)/(1+Ts(e)),Ms(n)>Ls&&0<--o;);return e/2}function nf(n,r,o){function t(t,e){return[n*t*Ts(e=ef(o,e)),r*Fs(e)]}return t.invert=function(t,e){return e=Gs(e/r),[t/(n*Ts(e)),Gs((2*e+Fs(2*e))/o)]},t}Qs.invert=function(t,e){if((r=Ms(e))<Js)return[t,2*Es(Ss(e))-qs];var n,r,o=js,i=25;do{var a=Ts(o/2),l=Bs(o/2);o-=n=(Zs*(o-js)-zs(l)-r)/(Zs-a*a/(2*l))}while(1e-12<Ms(n)&&0<--i);return[t/(Ts(o)*(Zs-1/Fs(o))),Ps(e)*o]},tf.invert=function(t,e){var n=2*Gs(e/2);return[t*Ts(n/2)/Ts(n),n]};var rf=nf(Ds/qs,Ds,Rs);var of=2.00276,af=1.11072;function lf(t,e){var n=ef(Rs,e);return[of*t/(1/Ts(e)+af/Ts(n)),(e+Ds*Fs(n))/of]}function cf(t,e){return[t*Ts(e),e]}lf.invert=function(t,e){for(var n,r,o=of*e,i=e<0?-js:js,a=25;r=o-Ds*Fs(i),i-=n=(Fs(2*i)+2*i-Rs*Fs(r))/(2*Ts(2*i)+2+Rs*Ts(r)*Ds*Ts(i)),Ms(n)>Ls&&0<--a;);return r=o-Ds*Fs(i),[t*(1/Ts(r)+af/Ts(i))/of,r]},cf.invert=function(t,e){return[t/Ts(e),e]};var uf=nf(1,4/Rs,Rs);var sf=Vs(3);function ff(t,e){return[sf*t*(2*Ts(2*e/3)-1)/Hs,sf*Hs*Fs(e/3)]}function df(t){var n=Ts(t);function e(t,e){return[t*n,(1+n)*Bs(e/2)]}return e.invert=function(t,e){return[t/n,2*Es(e/(1+n))]},e}function pf(t,e){var n=Vs(8/(3*Rs));return[n*t*(1-Ms(e)/Rs),n*e]}function hf(t,e){var n=Vs(4-3*Fs(Ms(e)));return[2/Vs(6*Rs)*t*n,Ps(e)*Vs(2*Rs/3)*(2-n)]}function gf(t,e){var n=Vs(Rs*(4+Rs));return[2/n*t*(1+Vs(1-4*e*e/(Rs*Rs))),4/n*e]}function mf(t,e){var n=(2+qs)*Fs(e);e/=2;for(var r=0,o=1/0;r<10&&Ms(o)>Ls;r++){var i=Ts(e);e-=o=(e+Fs(e)*(i+2)-n)/(2*i*(1+i))}return[2/Vs(Rs*(4+Rs))*t*(1+Ts(e)),2*Vs(Rs/(4+Rs))*Fs(e)]}function vf(t,e){return[t*(1+Ts(e))/Vs(2+Rs),2*e/Vs(2+Rs)]}function _f(t,e){for(var n=(1+qs)*Fs(e),r=0,o=1/0;r<10&&Ms(o)>Ls;r++)e-=o=(e+Fs(e)-n)/(1+Ts(e));return n=Vs(2+Rs),[t*(1+Ts(e))/n,2*e/n]}ff.invert=function(t,e){var n=3*Gs(e/(sf*Hs));return[Hs*t/(sf*(2*Ts(2*n/3)-1)),n]},pf.invert=function(t,e){var n=Vs(8/(3*Rs)),r=e/n;return[t/(n*(1-Ms(r)/Rs)),r]},hf.invert=function(t,e){var n=2-Ms(e)/Vs(2*Rs/3);return[t*Vs(6*Rs)/(2*n),Ps(e)*Gs((4-n*n)/3)]},gf.invert=function(t,e){var n=Vs(Rs*(4+Rs))/2;return[t*n/(1+Vs(1-e*e*(4+Rs)/(4*Rs))),e*n/2]},mf.invert=function(t,e){var n=e*Vs((4+Rs)/Rs)/2,r=Gs(n),o=Ts(r);return[t/(2/Vs(Rs*(4+Rs))*(1+o)),Gs((r+n*(o+2))/(2+qs))]},vf.invert=function(t,e){var n=Vs(2+Rs),r=e*n/2;return[n*t/(1+Ts(r)),r]},_f.invert=function(t,e){var n=1+qs,r=Vs(n/2);return[2*t*r/(1+Ts(e*=r)),Gs((e+Fs(e))/n)]};var bf=3+2*Ds;function yf(t,e){var n=Fs(t/=2),r=Ts(t),o=Vs(Ts(e)),i=Ts(e/=2),a=Fs(e)/(i+Ds*r*o),l=Vs(2/(1+a*a)),c=Vs((Ds*i+(r+n)*o)/(Ds*i+(r-n)*o));return[bf*(l*(c-1/c)-2*zs(c)),bf*(l*a*(c+1/c)-2*Es(a))]}yf.invert=function(t,e){if(!(n=$s.invert(t/1.2,1.065*e)))return null;var n,r=n[0],o=n[1],i=20;t/=bf,e/=bf;do{var a=r/2,l=o/2,c=Fs(a),u=Ts(a),s=Fs(l),f=Ts(l),d=Ts(o),p=Vs(d),h=s/(f+Ds*u*p),g=h*h,m=Vs(2/(1+g)),v=(Ds*f+(u+c)*p)/(Ds*f+(u-c)*p),_=Vs(v),b=_-1/_,y=_+1/_,w=m*b-2*zs(_)-t,x=m*h*y-2*Es(h)-e,M=s&&Os*p*c*g/s,E=(Ds*u*f+p)/(2*(f+Ds*u*p)*(f+Ds*u*p)*p),k=-.5*h*m*m*m,T=k*M,S=k*E,C=(C=2*f+Ds*p*(u-c))*C*_,z=(Ds*u*f*p+d)/C,A=-Ds*c*s/(p*C),N=b*T-2*z/_+m*(z+z/v),P=b*S-2*A/_+m*(A+A/v),F=h*y*T-2*M/(1+g)+m*y*M+m*h*(z-z/v),B=h*y*S-2*E/(1+g)+m*y*E+m*h*(A-A/v),L=P*F-B*N;if(!L)break;var R=(x*P-w*B)/L,q=(w*F-x*N)/L;r-=R,o=As(-qs,Ns(qs,o-q))}while((Ms(R)>Ls||Ms(q)>Ls)&&0<--i);return Ms(Ms(o)-qs)<Ls?[0,o]:i&&[r,o]};var wf=Ts(35*Ys);function xf(t,e){var n=Bs(e/2);return[t*wf*Vs(1-n*n),(1+wf)*n]}function Mf(t,e){var n=e/2,r=Ts(n);return[2*t/Hs*Ts(e)*r*r,Hs*Bs(n)]}function Ef(P,F,B,L,R,q,j,O){function t(t,e){if(!e)return[P*t/Rs,0];var n=e*e,r=P+n*(F+n*(B+n*L)),o=e*(R-1+n*(q-O+n*j)),i=(r*r+o*o)/(2*o),a=t*Gs(r/i)/Rs;return[i*Fs(a),e*(1+n*O)+i*(1-Ts(a))]}return arguments.length<8&&(O=0),t.invert=function(t,e){var n,r,o=Rs*t/P,i=e,a=50;do{var l=i*i,c=P+l*(F+l*(B+l*L)),u=i*(R-1+l*(q-O+l*j)),s=c*c+u*u,f=2*u,d=s/f,p=d*d,h=Gs(c/d)/Rs,g=o*h,m=c*c,v=(2*F+l*(4*B+6*l*L))*i,_=R+l*(3*q+5*l*j),b=(2*(c*v+u*(_-1))*f-s*(2*(_-1)))/(f*f),y=Ts(g),w=Fs(g),x=d*y,M=d*w,E=o/Rs*(1/Vs(1-m/p))*(v*d-c*b)/p,k=M-t,T=i*(1+l*O)+d-x-e,S=b*w+x*E,C=x*h,z=1+b-(b*y-M*E),A=M*h,N=S*A-z*C;if(!N)break;o-=n=(T*S-k*z)/N,i-=r=(k*A-T*C)/N}while((Ms(n)>Ls||Ms(r)>Ls)&&0<--a);return[o,i]},t}xf.invert=function(t,e){var n=e/(1+wf);return[t&&t/(wf*Vs(1-n*n)),2*Es(n)]},Mf.invert=function(t,e){var n=Es(e/Hs),r=Ts(n),o=2*n;return[t*Hs/2/(Ts(o)*r*r),o]};var kf=Ef(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);var Tf=Ef(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);var Sf=Ef(5/6*Rs,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Cf(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}Cf.invert=function(t,e){var n,r=t,o=e,i=50;do{var a=o*o;o-=n=(o*(1+a/12)-e)/(1+a/4)}while(Ms(n)>Ls&&0<--i);i=50,t/=1-.162388*a;do{var l=(l=r*r)*l;r-=n=(r*(.87-952426e-9*l)-t)/(.87-.00476213*l)}while(Ms(n)>Ls&&0<--i);return[r,o]};var zf=Ef(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Af(t,e){return[3/Us*t*Vs(Rs*Rs/3-e*e),e]}function Nf(t,e){return[t,1.25*zs(Bs(js+.4*e))]}Af.invert=function(t,e){return[Us/3*t/Vs(Rs*Rs/3-e*e),e]},Nf.invert=function(t,e){return[t,2.5*Es(Ss(.8*e))-.625*Rs]};var Pf=Vs(6),Ff=Vs(7);function Bf(t,e){var n=Gs(7*Fs(e)/(3*Pf));return[Pf*t*(2*Ts(2*n/3)-1)/Ff,9*Fs(n/3)/Ff]}function Lf(t,e){for(var n,r=(1+Os)*Fs(e),o=e,i=0;i<25&&(o-=n=(Fs(o/2)+Fs(o)-r)/(.5*Ts(o/2)+Ts(o)),!(Ms(n)<Ls));i++);return[t*(1+2*Ts(o)/Ts(o/2))/(3*Ds),2*Vs(3)*Fs(o/2)/Vs(2+Ds)]}function Rf(t,e){for(var n,r=Vs(6/(4+Rs)),o=(1+Rs/4)*Fs(e),i=e/2,a=0;a<25&&(i-=n=(i/2+Fs(i)-o)/(.5+Ts(i)),!(Ms(n)<Ls));a++);return[r*(.5+Ts(i))*t/1.5,r*i]}function qf(t,e){var n=e*e,r=n*n,o=n*r;return[t*(.84719-.13063*n+o*o*(.05494*n-.04515-.02326*r+.00331*o)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}Bf.invert=function(t,e){var n=3*Gs(e*Ff/9);return[t*Ff/(Pf*(2*Ts(2*n/3)-1)),Gs(3*Fs(n)*Pf/7)]},Lf.invert=function(t,e){var n=e*Vs(2+Ds)/(2*Vs(3)),r=2*Gs(n);return[3*Ds*t/(1+2*Ts(r)/Ts(r/2)),Gs((n+Fs(r))/(1+Os))]},Rf.invert=function(t,e){var n=Vs(6/(4+Rs)),r=e/n;return Ms(Ms(r)-qs)<Ls&&(r=r<0?-qs:qs),[1.5*t/(n*(.5+Ts(r))),Gs((r/2+Fs(r))/(1+Rs/4))]},qf.invert=function(t,e){for(var n,r,o,i,a=e,l=25;a-=n=(a*(1.01183+(o=(r=a*a)*r)*o*(.01926*r-.02625-.00396*o))-e)/(1.01183+o*o*(.21186*r-.23625+-.05148*o)),1e-12<Ms(n)&&0<--l;);return[t/(.84719-.13063*(r=a*a)+(i=r*(o=r*r))*i*(.05494*r-.04515-.02326*o+.00331*i)),a]};var jf=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];function Of(){}function Df(t,e){var n,r=e.stream;if(!r)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=Uf;break;case"FeatureCollection":n=Hf;break;default:n=If}return n(t,r)}function Hf(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return Uf(t,e)})}}function Uf(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:If(t.geometry,e)}}function If(t,e){if(!t)return null;if("GeometryCollection"===t.type)return n=e,{type:"GeometryCollection",geometries:t.geometries.map(function(t){return If(t,n)})};var n,r;switch(t.type){case"Point":case"MultiPoint":r=Wf;break;case"LineString":case"MultiLineString":r=Vf;break;case"Polygon":case"MultiPolygon":case"Sphere":r=Xf;break;default:return null}return da(t,e(r)),r.result()}[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return jf[t]})});var Yf=[],Gf=[],Wf={point:function(t,e){Yf.push([t,e])},result:function(){var t=Yf.length?Yf.length<2?{type:"Point",coordinates:Yf[0]}:{type:"MultiPoint",coordinates:Yf}:null;return Yf=[],t}},Vf={lineStart:Of,point:function(t,e){Yf.push([t,e])},lineEnd:function(){Yf.length&&(Gf.push(Yf),Yf=[])},result:function(){var t=Gf.length?Gf.length<2?{type:"LineString",coordinates:Gf[0]}:{type:"MultiLineString",coordinates:Gf}:null;return Gf=[],t}},Xf={polygonStart:Of,lineStart:Of,point:function(t,e){Yf.push([t,e])},lineEnd:function(){var t=Yf.length;if(t){for(;Yf.push(Yf[0].slice()),++t<4;);Gf.push(Yf),Yf=[]}},polygonEnd:Of,result:function(){if(!Gf.length)return null;var r=[],e=[];return Gf.forEach(function(t){!function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}(t)?e.push(t):r.push([t])}),e.forEach(function(e){var n=e[0];r.some(function(t){if(function(t,e){for(var n=e[0],r=e[1],o=!1,i=0,a=t.length,l=a-1;i<a;l=i++){var c=t[i],u=c[0],s=c[1],f=t[l],d=f[0],p=f[1];r<s^r<p&&n<(d-u)*(r-s)/(p-s)+u&&(o=!o)}return o}(t[0],n))return t.push(e),!0})||r.push([e])}),Gf=[],r.length?1<r.length?{type:"MultiPolygon",coordinates:r}:{type:"Polygon",coordinates:r[0]}:null}},$f=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Zf(t,e){var n,r=Ns(18,36*Ms(e)/Rs),o=Cs(r),i=r-o,a=(n=$f[o])[0],l=n[1],c=(n=$f[++o])[0],u=n[1],s=(n=$f[Ns(19,++o)])[0],f=n[1];return[t*(c+i*(s-a)/2+i*i*(s-2*c+a)/2),(0<e?qs:-qs)*(u+i*(f-l)/2+i*i*(f-2*u+l)/2)]}$f.forEach(function(t){t[1]*=1.0144}),Zf.invert=function(t,e){var n=e/qs,r=90*n,o=Ns(18,Ms(r/5)),i=As(0,Cs(o));do{var a=$f[i][1],l=$f[i+1][1],c=$f[Ns(19,i+2)][1],u=c-a,s=c-2*l+a,f=2*(Ms(n)-l)/u,d=s/u,p=f*(1-d*f*(1-2*d*f));if(0<=p||1===i){r=(0<=e?5:-5)*(p+o);for(var h,g=50;p=(o=Ns(18,Ms(r)/5))-(i=Cs(o)),a=$f[i][1],l=$f[i+1][1],c=$f[Ns(19,i+2)][1],r-=(h=(0<=e?qs:-qs)*(l+p*(c-a)/2+p*p*(c-2*l+a)/2)-e)*Is,1e-12<Ms(h)&&0<--g;);break}}while(0<=--i);var m=$f[i][0],v=$f[i+1][0],_=$f[Ns(19,i+2)][0];return[t/(v+p*(_-m)/2+p*p*(_-2*v+m)/2),r*Ys]};var Jf=1e4,Qf=-180,Kf=Qf+1e-4,td=180,ed=td-1e-4,nd=-90,rd=nd+1e-4,od=90,id=od-1e-4;function ad(t){return 0<t.length}function ld(t){return t===nd||t===od?[0,t]:[Qf,(e=t,Math.floor(e*Jf)/Jf)];var e}function cd(t){var e=t[0],n=t[1],r=!1;return e<=Kf?(e=Qf,r=!0):ed<=e&&(e=td,r=!0),n<=rd?(n=nd,r=!0):id<=n&&(n=od,r=!0),r?[e,n]:t}function ud(t){return t.map(cd)}function sd(t,e,n){for(var r=0,o=t.length;r<o;++r){var i=t[r].slice();n.push({index:-1,polygon:e,ring:i});for(var a=0,l=i.length;a<l;++a){var c=i[a],u=c[0],s=c[1];if(u<=Kf||ed<=u||s<=rd||id<=s){i[a]=cd(c);for(var f=a+1;f<l;++f){var d=i[f],p=d[0],h=d[1];if(Kf<p&&p<ed&&rd<h&&h<id)break}if(f===a+1)continue;if(a){var g={index:-1,polygon:e,ring:i.slice(0,a+1)};g.ring[g.ring.length-1]=ld(s),n[n.length-1]=g}else n.pop();if(l<=f)break;n.push({index:-1,polygon:e,ring:i=i.slice(f-1)}),i[0]=ld(i[0][1]),a=-1,l=i.length}}}}function fd(t){var e,n,r,o,i,a,l=t.length,c={},u={};for(e=0;e<l;++e)r=(n=t[e]).ring[0],i=n.ring[n.ring.length-1],r[0]!==i[0]||r[1]!==i[1]?(n.index=e,c[r]=u[i]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<l;++e)if(n=t[e]){if(r=n.ring[0],i=n.ring[n.ring.length-1],o=u[r],a=c[i],delete c[r],delete u[i],r[0]===i[0]&&r[1]===i[1]){n.polygon.push(n.ring);continue}o?(delete u[r],delete c[o.ring[0]],o.ring.pop(),t[o.index]=null,n={index:-1,polygon:o.polygon,ring:o.ring.concat(n.ring)},o===a?n.polygon.push(n.ring):(n.index=l++,t.push(c[n.ring[0]]=u[n.ring[n.ring.length-1]]=n))):a?(delete c[i],delete u[a.ring[a.ring.length-1]],n.ring.pop(),n={index:l++,polygon:a.polygon,ring:n.ring.concat(a.ring)},t[a.index]=null,t.push(c[n.ring[0]]=u[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function dd(t){var e={type:"Feature",geometry:pd(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function pd(t){if(null==t)return t;var e,n,r,o;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(pd)};break;case"Point":e={type:"Point",coordinates:cd(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:ud(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(ud)};break;case"Polygon":var i=[];sd(t.coordinates,i,n=[]),fd(n),e={type:"Polygon",coordinates:i};break;case"MultiPolygon":n=[],r=-1,o=t.coordinates.length;for(var a=new Array(o);++r<o;)sd(t.coordinates[r],a[r]=[],n);fd(n),e={type:"MultiPolygon",coordinates:a.filter(ad)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}var hd=4*Rs+3*Vs(3),gd=2*Vs(2*Rs*Vs(3)/hd),md=nf(gd*Vs(3)/Rs,gd,hd/6);function vd(t,e){return[t*Vs(1-3*e*e/(Rs*Rs)),e]}function _d(t,e){var n=Xs(t,e);return[(n[0]+t/qs)/2,(n[1]+e)/2]}vd.invert=function(t,e){return[t/Vs(1-3*e*e/(Rs*Rs)),e]},_d.invert=function(t,e){var n=t,r=e,o=25;do{var i,a=Ts(r),l=Fs(r),c=Fs(2*r),u=l*l,s=a*a,f=Fs(n),d=Ts(n/2),p=Fs(n/2),h=p*p,g=1-s*d*d,m=g?Ws(a*d)*Vs(i=1/g):i=0,v=.5*(2*m*a*p+n/qs)-t,_=.5*(m*l+r)-e,b=.5*i*(s*h+m*a*d*u)+.5/qs,y=i*(f*c/4-m*l*p),w=.125*i*(c*p-m*l*s*f),x=.5*i*(u*d+m*h*a)+.5,M=y*w-x*b,E=(_*y-v*x)/M,k=(v*w-_*b)/M;n-=E,r-=k}while((Ms(E)>Ls||Ms(k)>Ls)&&0<--o);return[n,r]};var bd="regions";function yd(t){var e=bs.choropleth.column_names[t];return void 0!==e&&(!Array.isArray(e)||!!e.length)}var wd=function(t){return t&&4<t[0].length?t:null},xd=function(t){return t.reduce(function(t,e){return wd(e)&&t.push(e),t},[])};function Md(){var r=[],i=H_.getParser(),o=yd("name"),a=yd("value"),l=yd("metadata");bs.choropleth.forEach(function(t){var e=function(e){if(e&&e.geometry){var t,n;try{n=(t=JSON.parse(e.geometry)).type}catch(t){return void console.warn("Feature skipped because JSON.parse failed.",e,t)}if(("Polygon"===n||"MultiPolygon"===n)&&Array.isArray(t.coordinates)){var r=("Polygon"===n?wd:xd)(t.coordinates);if(r&&r.length)return t.coordinates=r,{type:"Feature",geometry:t,properties:{}}}}}(t);if(e){var n=e.properties;o&&(n.name=t.name),a&&(n.value=t.value),l&&(n.metadata=t.metadata),r.push(e)}});var t=bs.choropleth.length-r.length;t&&(1===t?console.warn("1 region ignored because of invalid entry"):console.warn(t+" regions ignored because of invalid entry"));var e={unprojected_feature_collection:function(t){if(null==t)return t;switch(t.type){case"Feature":return dd(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(dd)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return pd(t)}}({type:"FeatureCollection",features:r}),have_geometry:yd("geometry"),have_name:o,have_value:a,have_metadata:l,source:bd};return{type:"FeatureCollection",features:e.unprojected_feature_collection.features.map(function(t,e){var n=t.properties.name,r=a?t.properties.value.slice():[],o=t.properties.metadata;return delete t.properties,{type:"Feature",geometry:null,properties:{unprojected_feature:t,name:n,value:r,metadata:o,numeric_value:r.map(i),source:bd,index:e}}}),properties:e}}function Ed(){var t,e,n=Md();return{collection:n,map:(t=n,e=we(),t.features.forEach(function(t){e.set(t.properties.index,t)}),e)}}var kd,Td,Sd,Cd,zd,Ad,Nd=_s();function Pd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Fd=Array.prototype,Bd=Fd.map,Ld=Fd.slice;function Rd(t){return+t}var qd=[0,1];function jd(t){return t}function Od(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:(t=isNaN(n)?NaN:.5,function(){return t});var t}function Dd(t){var e,n=t[0],r=t[t.length-1];return r<n&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function Hd(t,e,n){var r=t[0],o=t[1],i=e[0],a=e[1];return i=o<r?(r=Od(o,r),n(a,i)):(r=Od(r,o),n(i,a)),function(t){return i(r(t))}}function Ud(n,t,e){var r=Math.min(n.length,t.length)-1,o=new Array(r),i=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)o[a]=Od(n[a],n[a+1]),i[a]=e(t[a],t[a+1]);return function(t){var e=xo(n,t,1,r)-1;return i[e](o[e](t))}}function Id(t,e){return function(){var n,r,e,o,i,a,l=qd,c=qd,u=Go,s=jd;function f(){return o=2<Math.min(l.length,c.length)?Ud:Hd,i=a=null,d}function d(t){return isNaN(t=+t)?e:(i||(i=o(l.map(n),c,u)))(n(s(t)))}return d.invert=function(t){return s(r((a||(a=o(c,l.map(n),Ho)))(t)))},d.domain=function(t){return arguments.length?(l=Bd.call(t,Rd),s===jd||(s=Dd(l)),f()):l.slice()},d.range=function(t){return arguments.length?(c=Ld.call(t),f()):c.slice()},d.rangeRound=function(t){return c=Ld.call(t),u=Wo,f()},d.clamp=function(t){return arguments.length?(s=t?Dd(l):jd,d):s!==jd},d.interpolate=function(t){return arguments.length?(u=t,f()):u},d.unknown=function(t){return arguments.length?(e=t,d):e},function(t,e){return n=t,r=e,f()}}()(t,e)}function Yd(l){var c=l.domain;return l.ticks=function(t){var e=c();return Co(e[0],e[e.length-1],null==t?10:t)},l.tickFormat=function(t,e){var n=c();return function(t,e,n,r){var o,i=Ao(t,e,n);switch((r=J(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=ct(i,a))||(r.precision=o),ot(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=ut(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=lt(i))||(r.precision=o-2*("%"===r.type))}return rt(r)}(n[0],n[n.length-1],null==t?10:t,e)},l.nice=function(t){null==t&&(t=10);var e,n=c(),r=0,o=n.length-1,i=n[r],a=n[o];return a<i&&(e=i,i=a,a=e,e=r,r=o,o=e),0<(e=zo(i,a,t))?e=zo(i=Math.floor(i/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=zo(i=Math.ceil(i*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[r]=Math.floor(i/e)*e,n[o]=Math.ceil(a/e)*e,c(n)):e<0&&(n[r]=Math.ceil(i*e)/e,n[o]=Math.floor(a*e)/e,c(n)),l},l}function Gd(){var e=Id(jd,jd);return e.copy=function(){return t=e,Gd().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},Pd.apply(e,arguments),Yd(e)}function Wd(){var e=Yd(function(){var e,n,r,o,i,a=0,l=1,c=jd,u=!1;function s(t){return isNaN(t=+t)?i:c(0===r?.5:(t=(o(t)-e)*r,u?Math.max(0,Math.min(1,t)):t))}return s.domain=function(t){return arguments.length?(e=o(a=+t[0]),n=o(l=+t[1]),r=e===n?0:1/(n-e),s):[a,l]},s.clamp=function(t){return arguments.length?(u=!!t,s):u},s.interpolator=function(t){return arguments.length?(c=t,s):c},s.unknown=function(t){return arguments.length?(i=t,s):i},function(t){return e=(o=t)(a),n=t(l),r=e===n?0:1/(n-e),s}}()(jd));return e.copy=function(){return t=e,Wd().domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown());var t},function(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}.apply(e,arguments)}function Vd(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function Xd(t){return Do(t[t.length-1])}Vd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Vd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Vd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Vd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Vd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Vd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Vd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Vd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Vd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var $d=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Vd),Zd=Xd($d),Jd=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Vd),Qd=Xd(Jd),Kd=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Vd),tp=Xd(Kd),ep=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Vd),np=Xd(ep),rp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Vd),op=Xd(rp),ip=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Vd),ap=Xd(ip),lp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Vd),cp=Xd(lp),up=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Vd),sp=Xd(up),fp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Vd),dp=Xd(fp),pp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Vd),hp=Xd(pp),gp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Vd),mp=Xd(gp),vp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Vd),_p=Xd(vp),bp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Vd),yp=Xd(bp),wp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Vd),xp=Xd(wp),Mp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Vd),Ep=Xd(Mp),kp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Vd),Tp=Xd(kp),Sp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Vd),Cp=Xd(Sp),zp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Vd),Ap=Xd(zp),Np=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Vd),Pp=Xd(Np),Fp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Vd),Bp=Xd(Fp),Lp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Vd),Rp=Xd(Lp),qp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Vd),jp=Xd(qp),Op=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Vd),Dp=Xd(Op),Hp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Vd),Up=Xd(Hp),Ip=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Vd),Yp=Xd(Ip),Gp=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Vd),Wp=Xd(Gp),Vp=Xd(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Vd)),Xp=hi(ve(300,.5,0),ve(-240,.5,1)),$p=hi(ve(-100,.75,.35),ve(80,1.5,.8)),Zp=hi(ve(260,.75,.35),ve(80,1.5,.8));ve(),Lt();function Jp(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var Qp=Jp(Vd("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Kp=Jp(Vd("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),th=Jp(Vd("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eh=Jp(Vd("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),nh={schemeBrBG:$d,schemePRGn:Jd,schemePiYG:Kd,schemePuOr:ep,schemeRdBu:rp,schemeRdGy:ip,schemeRdYlBu:lp,schemeRdYlGn:up,schemeSpectral:fp,schemeBuGn:pp,schemeBuPu:gp,schemeGnBu:vp,schemeOrRd:bp,schemePuBuGn:wp,schemePuBu:Mp,schemePuRd:kp,schemeRdPu:Sp,schemeYlGnBu:zp,schemeYlGn:Np,schemeYlOrBr:Fp,schemeYlOrRd:Lp,schemeBlues:qp,schemeGreens:Op,schemeGreys:Hp,schemePurples:Ip,schemeReds:Gp},rh={interpolateBrBG:Zd,interpolatePRGn:Qd,interpolatePiYG:tp,interpolatePuOr:np,interpolateRdBu:op,interpolateRdGy:ap,interpolateRdYlBu:cp,interpolateRdYlGn:sp,interpolateSpectral:dp,interpolateBuGn:hp,interpolateBuPu:mp,interpolateGnBu:_p,interpolateOrRd:yp,interpolatePuBuGn:xp,interpolatePuBu:Ep,interpolatePuRd:Tp,interpolateRdPu:Cp,interpolateYlGnBu:Ap,interpolateYlGn:Pp,interpolateYlOrBr:Bp,interpolateYlOrRd:Rp,interpolateBlues:jp,interpolateGreens:Dp,interpolateGreys:Up,interpolatePurples:Yp,interpolateReds:Wp,interpolateOranges:Vp,interpolateViridis:Qp,interpolateInferno:th,interpolateMagma:Kp,interpolatePlasma:eh,interpolateWarm:$p,interpolateCool:Zp,interpolateCubehelixDefault:Xp},oh={hcl:di,hsl:si,lab:function(e,t){var n=qo((e=ee(e)).l,(t=ee(t)).l),r=qo(e.a,t.a),o=qo(e.b,t.b),i=qo(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=o(t),e.opacity=i(t),e+""}},rgb:jo},ih=6371;function ah(t,e){return{type:"FeatureCollection",features:function(t,e){var n=t.reduce(function(t,e){var n=function(t){if(!t||!t.geometry||"Feature"===!t.type)return!1;var e=t.geometry.type;return("Polygon"===e||"MultiPolygon"===e)&&e}(e);return"Polygon"===n?t.push(e):"MultiPolygon"===n&&Array.prototype.push.apply(t,e.geometry.coordinates.map(function(t){return{type:"Feature",geometry:{type:"Polygon",coordinates:t}}})),t},[]);if(!e)return n;var r=e/Math.pow(ih,2),o=n.reduce(function(t,e){return ka(e)>=r&&t.push(e),t},[]);return o.length?o:n}(t.features,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var lh=Math.PI,ch=2*lh,uh=1e-6,sh=ch-uh;function fh(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dh(){return new fh}fh.prototype=dh.prototype={constructor:fh,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,o,i){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(t,e,n,r,o){t=+t,e=+e,n=+n,r=+r,o=+o;var i=this._x1,a=this._y1,l=n-t,c=r-e,u=i-t,s=a-e,f=u*u+s*s;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(uh<f)if(Math.abs(s*l-c*u)>uh&&o){var d=n-i,p=r-a,h=l*l+c*c,g=d*d+p*p,m=Math.sqrt(h),v=Math.sqrt(f),_=o*Math.tan((lh-Math.acos((h+f-g)/(2*m*v)))/2),b=_/v,y=_/m;Math.abs(b-1)>uh&&(this._+="L"+(t+b*u)+","+(e+b*s)),this._+="A"+o+","+o+",0,0,"+ +(u*p<s*d)+","+(this._x1=t+y*l)+","+(this._y1=e+y*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,o,i){t=+t,e=+e,i=!!i;var a=(n=+n)*Math.cos(r),l=n*Math.sin(r),c=t+a,u=e+l,s=1^i,f=i?r-o:o-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>uh||Math.abs(this._y1-u)>uh)&&(this._+="L"+c+","+u),n&&(f<0&&(f=f%ch+ch),sh<f?this._+="A"+n+","+n+",0,1,"+s+","+(t-a)+","+(e-l)+"A"+n+","+n+",0,1,"+s+","+(this._x1=c)+","+(this._y1=u):uh<f&&(this._+="A"+n+","+n+",0,"+ +(lh<=f)+","+s+","+(this._x1=t+n*Math.cos(o))+","+(this._y1=e+n*Math.sin(o))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ph,hh,gh,mh,vh,_h,bh=Object.freeze({__proto__:null,path:dh}),yh=(function(t,e){!function(t,N,P){var F=1e-6;function e(){}var n=1/0,r=n,o=-n,i=o,s={point:function(t,e){t<n&&(n=t),o<t&&(o=t),e<r&&(r=e),i<e&&(i=e)},lineStart:e,lineEnd:e,polygonStart:e,polygonEnd:e,result:function(){var t=[[n,r],[o,i]];return o=i=-(r=n=1/0),t}};function B(t,e,n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),N.geoStream(n,t.stream(s));var a=s.result(),l=Math.min(r/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),c=+e[0][0]+(r-l*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(o-l*(a[1][1]+a[0][1]))/2;return null!=i&&t.clipExtent(i),t.scale(150*l).translate([c,u])}function L(t,e,n){return B(t,[[0,0],e],n)}t.geoAlbersUsa=function(){var e,n,o,i,a,r,u=N.geoAlbers(),l=N.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=N.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)}function d(){return e=n=null,f}return f.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.12<=o&&o<.234&&-.425<=r&&r<-.214?l:.166<=o&&o<.234&&-.214<=r&&r<-.115?c:u).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[u.stream(n=t),l.stream(t),c.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},f.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),d()):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),l.scale(.35*t),c.scale(t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],r=+t[1];return o=u.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(s),i=l.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+F,r+.12*e+F],[n-.214*e-F,r+.234*e-F]]).stream(s),a=c.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+F,r+.166*e+F],[n-.115*e-F,r+.234*e-F]]).stream(s),d()},f.fitExtent=function(t,e){return B(f,t,e)},f.fitSize=function(t,e){return L(f,t,e)},f.drawCompositionBorders=function(t){var e=u([-102.91,26.3]),n=u([-104,27.5]),r=u([-108,29.1]),o=u([-110,29.1]),i=u([-110,26.7]),a=u([-112.8,27.6]),l=u([-114.3,30.6]),c=u([-119.3,30.1]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.moveTo(i[0],i[1]),t.lineTo(a[0],a[1]),t.lineTo(l[0],l[1]),t.lineTo(c[0],c[1])},f.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},f.scale(1070)},t.geoAlbersUsaTerritories=function(){var e,n,o,i,a,l,c,u,r,w=N.geoAlbers(),s=N.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),f=N.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),d=N.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),p=N.geoEquirectangular().rotate([173,14]),h=N.geoEquirectangular().rotate([-145,-16.8]),g={point:function(t,e){r=[t,e]}};function m(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)||(l.point(e,n),r)||(c.point(e,n),r)||(u.point(e,n),r)}function v(){return e=n=null,m}return m.invert=function(t){var e=w.scale(),n=w.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.12<=o&&o<.234&&-.425<=r&&r<-.214?s:.166<=o&&o<.234&&-.214<=r&&r<-.115?f:.2064<=o&&o<.2413&&.312<=r&&r<.385?d:.09<=o&&o<.1197&&-.4243<=r&&r<-.3232?p:-.0518<=o&&o<.0895&&-.4243<=r&&r<-.3824?h:w).invert(t)},m.stream=function(t){return e&&n===t?e:(r=[w.stream(n=t),s.stream(t),f.stream(t),d.stream(t),p.stream(t),h.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},m.precision=function(t){return arguments.length?(w.precision(t),s.precision(t),f.precision(t),d.precision(t),p.precision(t),h.precision(t),v()):w.precision()},m.scale=function(t){return arguments.length?(w.scale(t),s.scale(.35*t),f.scale(t),d.scale(t),p.scale(2*t),h.scale(t),m.translate(w.translate())):w.scale()},m.translate=function(t){if(!arguments.length)return w.translate();var e=w.scale(),n=+t[0],r=+t[1];return o=w.translate(t).clipExtent([[n-.455*e,r-.238*e],[n+.455*e,r+.238*e]]).stream(g),i=s.translate([n-.307*e,r+.201*e]).clipExtent([[n-.425*e+F,r+.12*e+F],[n-.214*e-F,r+.233*e-F]]).stream(g),a=f.translate([n-.205*e,r+.212*e]).clipExtent([[n-.214*e+F,r+.166*e+F],[n-.115*e-F,r+.233*e-F]]).stream(g),l=d.translate([n+.35*e,r+.224*e]).clipExtent([[n+.312*e+F,r+.2064*e+F],[n+.385*e-F,r+.233*e-F]]).stream(g),c=p.translate([n-.492*e,r+.09*e]).clipExtent([[n-.4243*e+F,r+.0903*e+F],[n-.3233*e-F,r+.1197*e-F]]).stream(g),u=h.translate([n-.408*e,r+.018*e]).clipExtent([[n-.4244*e+F,r-.0519*e+F],[n-.3824*e-F,r+.0895*e-F]]).stream(g),v()},m.fitExtent=function(t,e){return B(m,t,e)},m.fitSize=function(t,e){return L(m,t,e)},m.drawCompositionBorders=function(t){var e=w([-110.4641,28.2805]),n=w([-104.0597,28.9528]),r=w([-103.7049,25.1031]),o=w([-109.8337,24.4531]),i=w([-124.4745,28.1407]),a=w([-110.931,30.8844]),l=w([-109.8337,24.4531]),c=w([-122.4628,21.8562]),u=w([-76.8579,25.1544]),s=w([-72.429,24.2097]),f=w([-72.8265,22.7056]),d=w([-77.1852,23.6392]),p=w([-125.0093,29.7791]),h=w([-118.5193,31.3262]),g=w([-118.064,29.6912]),m=w([-124.4369,28.169]),v=w([-128.1314,37.4582]),_=w([-125.2132,38.214]),b=w([-122.3616,30.5115]),y=w([-125.0315,29.8211]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),t.moveTo(i[0],i[1]),t.lineTo(a[0],a[1]),t.lineTo(l[0],l[1]),t.lineTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.closePath(),t.moveTo(u[0],u[1]),t.lineTo(s[0],s[1]),t.lineTo(f[0],f[1]),t.lineTo(f[0],f[1]),t.lineTo(d[0],d[1]),t.closePath(),t.moveTo(p[0],p[1]),t.lineTo(h[0],h[1]),t.lineTo(g[0],g[1]),t.lineTo(g[0],g[1]),t.lineTo(m[0],m[1]),t.closePath(),t.moveTo(v[0],v[1]),t.lineTo(_[0],_[1]),t.lineTo(b[0],b[1]),t.lineTo(b[0],b[1]),t.lineTo(y[0],y[1]),t.closePath()},m.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},m.scale(1070)},t.geoConicConformalEurope=function(){var e,n,o,i,a,l,c,u,s,f,d,p,h,g,r,m=N.geoConicConformal().rotate([-10,-53]).parallels([0,60]),v=N.geoMercator().center([-61.46,16.14]),_=N.geoMercator().center([-53.2,3.9]),b=N.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),y=N.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),w=N.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),x=N.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),M=N.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),E=N.geoMercator().center([-61.03,14.67]),k=N.geoMercator().center([45.16,-12.8]),T=N.geoMercator().center([55.52,-21.13]),S=N.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),C={point:function(t,e){r=[t,e]}};function z(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(a.point(e,n),r)||(d.point(e,n),r)||(i.point(e,n),r)||(f.point(e,n),r)||(s.point(e,n),r)||(p.point(e,n),r)||(h.point(e,n),r)||(g.point(e,n),r)||(l.point(e,n),r)||(c.point(e,n),r)||(u.point(e,n),r)}function A(){return e=n=null,z}return z.invert=function(t){var e=m.scale(),n=m.translate(),r=(t[0]-(n[0]+.08*e))/e,o=(t[1]-n[1])/e;return(-.31<=o&&o<-.24&&.14<=r&&r<.24?v:-.24<=o&&o<-.17&&.14<=r&&r<.24?_:-.17<=o&&o<-.12&&.21<=r&&r<.24?y:-.17<=o&&o<-.14&&.14<=r&&r<.165?w:-.17<=o&&o<-.1&&.14<=r&&r<.24?b:-.1<=o&&o<-.03&&.14<=r&&r<.24?x:-.03<=o&&o<.04&&.14<=r&&r<.24?M:-.31<=o&&o<-.24&&.24<=r&&r<.34?E:-.24<=o&&o<-.17&&.24<=r&&r<.34?k:-.17<=o&&o<-.1&&.24<=r&&r<.34?T:-.1<=o&&o<-.03&&.24<=r&&r<.34?S:m).invert(t)},z.stream=function(t){return e&&n===t?e:(r=[m.stream(n=t),_.stream(t),E.stream(t),v.stream(t),M.stream(t),x.stream(t),k.stream(t),T.stream(t),S.stream(t),b.stream(t),y.stream(t),w.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},z.precision=function(t){return arguments.length?(m.precision(t),_.precision(t),E.precision(t),v.precision(t),M.precision(t),x.precision(t),k.precision(t),T.precision(t),S.precision(t),b.precision(t),y.precision(t),w.precision(t),A()):m.precision()},z.scale=function(t){return arguments.length?(m.scale(t),v.scale(3*t),_.scale(.8*t),E.scale(3.5*t),T.scale(2.7*t),b.scale(2*t),y.scale(2*t),w.scale(2*t),x.scale(3*t),M.scale(t),k.scale(5.5*t),S.scale(6*t),z.translate(m.translate())):m.scale()},z.translate=function(t){if(!arguments.length)return m.translate();var e=m.scale(),n=+t[0],r=+t[1];return o=m.translate([n-.08*e,r]).clipExtent([[n-.51*e,r-.33*e],[n+.5*e,r+.33*e]]).stream(C),i=v.translate([n+.19*e,r-.275*e]).clipExtent([[n+.14*e+F,r-.31*e+F],[n+.24*e-F,r-.24*e-F]]).stream(C),a=_.translate([n+.19*e,r-.205*e]).clipExtent([[n+.14*e+F,r-.24*e+F],[n+.24*e-F,r-.17*e-F]]).stream(C),l=b.translate([n+.19*e,r-.135*e]).clipExtent([[n+.14*e+F,r-.17*e+F],[n+.24*e-F,r-.1*e-F]]).stream(C),c=y.translate([n+.225*e,r-.147*e]).clipExtent([[n+.21*e+F,r-.17*e+F],[n+.24*e-F,r-.12*e-F]]).stream(C),u=w.translate([n+.153*e,r-.15*e]).clipExtent([[n+.14*e+F,r-.17*e+F],[n+.165*e-F,r-.14*e-F]]).stream(C),s=x.translate([n+.19*e,r-.065*e]).clipExtent([[n+.14*e+F,r-.1*e+F],[n+.24*e-F,r-.03*e-F]]).stream(C),f=M.translate([n+.19*e,r+.005*e]).clipExtent([[n+.14*e+F,r-.03*e+F],[n+.24*e-F,r+.04*e-F]]).stream(C),d=E.translate([n+.29*e,r-.275*e]).clipExtent([[n+.24*e+F,r-.31*e+F],[n+.34*e-F,r-.24*e-F]]).stream(C),p=k.translate([n+.29*e,r-.205*e]).clipExtent([[n+.24*e+F,r-.24*e+F],[n+.34*e-F,r-.17*e-F]]).stream(C),h=T.translate([n+.29*e,r-.135*e]).clipExtent([[n+.24*e+F,r-.17*e+F],[n+.34*e-F,r-.1*e-F]]).stream(C),g=S.translate([n+.29*e,r-.065*e]).clipExtent([[n+.24*e+F,r-.1*e+F],[n+.34*e-F,r-.03*e-F]]).stream(C),A()},z.fitExtent=function(t,e){return B(z,t,e)},z.fitSize=function(t,e){return L(z,t,e)},z.drawCompositionBorders=function(t){var e,n,r,o;e=m([42.45755610828648,63.343658547914934]),n=m([52.65837266667029,59.35045080290929]),r=m([47.19754502247785,56.12653496548117]),o=m([37.673034273363044,59.61638268506111]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([59.41110754003403,62.35069727399336]),n=m([66.75050228640794,57.11797303636038]),r=m([60.236065725110436,54.63331433818992]),o=m([52.65837313153311,59.350450804599355]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([48.81091130080243,66.93353402634641]),n=m([59.41110730654679,62.35069740653086]),r=m([52.6583728974441,59.3504509222445]),o=m([42.45755631675751,63.34365868805821]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([31.054198418446475,52.1080673766184]),n=m([39.09869284884117,49.400700047190554]),r=m([36.0580811499175,46.02944174908498]),o=m([28.690508588835726,48.433126979386415]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([33.977877745912025,55.849945501331]),n=m([42.75328432167726,52.78455122462353]),r=m([39.09869297540224,49.400700176148625]),o=m([31.05419851807008,52.10806751810923]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([52.658372900759296,59.35045068526415]),n=m([60.23606549583304,54.63331423800264]),r=m([54.6756370953122,51.892298789399455]),o=m([47.19754524788189,56.126534861222794]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([47.19754506082455,56.126534735591456]),n=m([54.675636900123514,51.892298681337095]),r=m([49.94448648951486,48.98775484983285]),o=m([42.75328468716108,52.78455126060818]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([42.75328453416769,52.78455113209101]),n=m([49.94448632339758,48.98775473706457]),r=m([45.912339990394315,45.99361784987003]),o=m([39.09869317356607,49.40070009378711]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([37.673034114296634,59.61638254183119]),n=m([47.197544835420544,56.126534839849846]),r=m([42.75328447467064,52.78455135314068]),o=m([33.977877870363905,55.849945644671145]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([44.56748486446032,57.26489367845818]),r=m([43.9335791193588,53.746540942601726]),o=m([43,56]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([37.673034114296634,59.61638254183119]),n=m([40.25902691953466,58.83002044222639]),r=m([38.458270492742024,57.26232178028002]),o=m([35.97754948030156,58.00266637992386]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath()},z.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},z.scale(750)},t.geoConicConformalFrance=function(){var e,n,o,i,a,l,c,u,s,f,d,p,h,g,r,m=N.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),v=N.geoMercator().center([-53.2,3.9]),_=N.geoMercator().center([-61.03,14.67]),b=N.geoMercator().center([-61.46,16.14]),y=N.geoMercator().center([-62.85,17.92]),w=N.geoMercator().center([-56.23,46.93]),x=N.geoMercator().center([45.16,-12.8]),M=N.geoMercator().center([55.52,-21.13]),E=N.geoMercator().center([165.8,-21.07]),k=N.geoMercator().center([-178.1,-14.3]),T=N.geoMercator().center([-150.55,-17.11]),S=N.geoMercator().center([-150.55,-17.11]),C={point:function(t,e){r=[t,e]}};function z(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)||(l.point(e,n),r)||(c.point(e,n),r)||(u.point(e,n),r)||(s.point(e,n),r)||(f.point(e,n),r)||(d.point(e,n),r)||(p.point(e,n),r)||(h.point(e,n),r)||(g.point(e,n),r)}function A(){return e=n=null,z}return z.invert=function(t){var e=m.scale(),n=m.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.029<=o&&o<.0864&&-.14<=r&&r<-.0996?v:0<=o&&o<.029&&-.14<=r&&r<-.0996?_:-.032<=o&&o<0&&-.14<=r&&r<-.0996?b:-.052<=o&&o<-.032&&-.14<=r&&r<-.0996?y:-.076<=o&&o<.052&&-.14<=r&&r<-.0996?w:-.076<=o&&o<-.052&&.0967<=r&&r<.1371?x:-.052<=o&&o<-.02&&.0967<=r&&r<.1371?M:-.02<=o&&o<.012&&.0967<=r&&r<.1371?E:.012<=o&&o<.033&&.0967<=r&&r<.1371?k:.033<=o&&o<.0864&&.0967<=r&&r<.1371?T:m).invert(t)},z.stream=function(t){return e&&n===t?e:(r=[m.stream(n=t),v.stream(t),_.stream(t),b.stream(t),y.stream(t),w.stream(t),x.stream(t),M.stream(t),E.stream(t),k.stream(t),T.stream(t),S.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},z.precision=function(t){return arguments.length?(m.precision(t),v.precision(t),_.precision(t),b.precision(t),y.precision(t),w.precision(t),x.precision(t),M.precision(t),E.precision(t),k.precision(t),T.precision(t),S.precision(t),A()):m.precision()},z.scale=function(t){return arguments.length?(m.scale(t),v.scale(.6*t),_.scale(1.6*t),b.scale(1.4*t),y.scale(5*t),w.scale(1.3*t),x.scale(1.6*t),M.scale(1.2*t),E.scale(.3*t),k.scale(2.7*t),T.scale(.5*t),S.scale(.06*t),z.translate(m.translate())):m.scale()},z.translate=function(t){if(!arguments.length)return m.translate();var e=m.scale(),n=+t[0],r=+t[1];return o=m.translate(t).clipExtent([[n-.0996*e,r-.0908*e],[n+.0967*e,r+.0864*e]]).stream(C),i=v.translate([n-.12*e,r+.0575*e]).clipExtent([[n-.14*e+F,r+.029*e+F],[n-.0996*e-F,r+.0864*e-F]]).stream(C),a=_.translate([n-.12*e,r+.013*e]).clipExtent([[n-.14*e+F,r+0*e+F],[n-.0996*e-F,r+.029*e-F]]).stream(C),l=b.translate([n-.12*e,r-.014*e]).clipExtent([[n-.14*e+F,r-.032*e+F],[n-.0996*e-F,r+0*e-F]]).stream(C),c=y.translate([n-.12*e,r-.044*e]).clipExtent([[n-.14*e+F,r-.052*e+F],[n-.0996*e-F,r-.032*e-F]]).stream(C),u=w.translate([n-.12*e,r-.065*e]).clipExtent([[n-.14*e+F,r-.076*e+F],[n-.0996*e-F,r-.052*e-F]]).stream(C),s=x.translate([n+.117*e,r-.064*e]).clipExtent([[n+.0967*e+F,r-.076*e+F],[n+.1371*e-F,r-.052*e-F]]).stream(C),f=M.translate([n+.116*e,r-.0355*e]).clipExtent([[n+.0967*e+F,r-.052*e+F],[n+.1371*e-F,r-.02*e-F]]).stream(C),d=E.translate([n+.116*e,r-.0048*e]).clipExtent([[n+.0967*e+F,r-.02*e+F],[n+.1371*e-F,r+.012*e-F]]).stream(C),p=k.translate([n+.116*e,r+.022*e]).clipExtent([[n+.0967*e+F,r+.012*e+F],[n+.1371*e-F,r+.033*e-F]]).stream(C),g=S.translate([n+.11*e,r+.045*e]).clipExtent([[n+.0967*e+F,r+.033*e+F],[n+.1371*e-F,r+.06*e-F]]).stream(C),h=T.translate([n+.115*e,r+.075*e]).clipExtent([[n+.0967*e+F,r+.06*e+F],[n+.1371*e-F,r+.0864*e-F]]).stream(C),A()},z.fitExtent=function(t,e){return B(z,t,e)},z.fitSize=function(t,e){return L(z,t,e)},z.drawCompositionBorders=function(t){var e,n,r,o;e=m([-7.938886725111036,43.7219460918835]),n=m([-4.832080896458295,44.12930268549372]),r=m([-4.205299743793263,40.98096346967365]),o=m([-7.071796453126152,40.610037319181444]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([-8.42751373617692,45.32889452553031]),n=m([-5.18599305777107,45.7566442062976]),r=m([-4.832080905154431,44.129302726751426]),o=m([-7.938886737126192,43.72194613263854]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([-9.012656899657046,47.127733821030176]),n=m([-5.6105244772793155,47.579777861410626]),r=m([-5.185993067168585,45.756644248170346]),o=m([-8.427513749141811,45.32889456686326]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([-9.405747558985553,48.26506375557457]),n=m([-5.896175018439575,48.733352850851624]),r=m([-5.610524487556043,47.57977790393761]),o=m([-9.012656913808351,47.127733862971255]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([-9.908436061346974,49.642448789505856]),n=m([-6.262026716233124,50.131426841787174]),r=m([-5.896175029331232,48.73335289377258]),o=m([-9.40574757396393,48.26506379787767]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([11.996907706504462,50.16039028163579]),n=m([15.649907879773343,49.68279246765253]),r=m([15.156712840526632,48.30371557625831]),o=m([11.64122661754411,48.761078240546816]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([11.641226606955788,48.7610781975889]),n=m([15.156712825832164,48.30371553390465]),r=m([14.549932166241172,46.4866532486199]),o=m([11.204443787952183,46.91899233914248]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([11.204443778297161,46.918992296823646]),n=m([14.549932152815039,46.486653206856396]),r=m([13.994409796764009,44.695833444323256]),o=m([10.805306599253848,45.105133870684924]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([10.805306590412085,45.10513382903308]),n=m([13.99440978444733,44.695833403183606]),r=m([13.654633799024392,43.53552468558152]),o=m([10.561516803980956,43.930671459798624]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([10.561516795617383,43.93067141859757]),n=m([13.654633787361952,43.5355246448671]),r=m([12.867691604239901,40.640701985019405]),o=m([9.997809515987688,41.00288343254471]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=m([10.8,42.4]),n=m([12.8,42.13]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1])},z.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},z.scale(2700)},t.geoConicConformalPortugal=function(){var e,n,o,i,a,r,u=N.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),l=N.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),c=N.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),s={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)}function d(){return e=n=null,f}return f.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.0093<=o&&o<.03678&&-.03875<=r&&r<-.0116?l:-.0412<=o&&o<.0091&&-.07782<=r&&r<-.01166?c:u).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[u.stream(n=t),l.stream(t),c.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},f.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),d()):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),l.scale(t),c.scale(.6*t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],r=+t[1];return o=u.translate(t).clipExtent([[n-.0115*e,r-.1138*e],[n+.2105*e,r+.0673*e]]).stream(s),i=l.translate([n-.0265*e,r+.025*e]).clipExtent([[n-.0388*e+F,r+.0093*e+F],[n-.0116*e-F,r+.0368*e-F]]).stream(s),a=c.translate([n-.045*e,r+-.02*e]).clipExtent([[n-.0778*e+F,r-.0413*e+F],[n-.0117*e-F,r+.0091*e-F]]).stream(s),d()},f.fitExtent=function(t,e){return B(f,t,e)},f.fitSize=function(t,e){return L(f,t,e)},f.drawCompositionBorders=function(t){var e=u([-12.8351,38.7113]),n=u([-10.8482,38.7633]),r=u([-10.8181,37.2072]),o=u([-12.7345,37.1573]),i=u([-16.0753,41.4436]),a=u([-10.9168,41.6861]),l=u([-10.8557,38.7747]),c=u([-15.6728,38.5505]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),t.moveTo(i[0],i[1]),t.lineTo(a[0],a[1]),t.lineTo(l[0],l[1]),t.lineTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.closePath()},f.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},f.scale(4200)},t.geoConicConformalSpain=function(){var e,n,o,i,r,a=N.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),l=N.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),c={point:function(t,e){r=[t,e]}};function u(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)}function s(){return e=n=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.05346<=o&&o<.0897&&-.13388<=r&&r<-.0322?l:a).invert(t)},u.stream=function(t){return e&&n===t?e:(r=[a.stream(n=t),l.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},u.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),s()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],r=+t[1];return o=a.translate(t).clipExtent([[n-.06857*e,r-.1288*e],[n+.13249*e,r+.06*e]]).stream(c),i=l.translate([n+.1*e,r-.094*e]).clipExtent([[n-.1331*e+F,r+.053457*e+F],[n-.0354*e-F,r+.08969*e-F]]).stream(c),s()},u.fitExtent=function(t,e){return B(u,t,e)},u.fitSize=function(t,e){return L(u,t,e)},u.drawCompositionBorders=function(t){var e=a([-14.034675,34.965007]),n=a([-7.4208899,35.536988]),r=a([-7.3148275,33.54359]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1])},u.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},u.scale(2700)},t.geoConicEquidistantJapan=function(){var e,n,o,i,a,r,u=N.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),l=N.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),c=N.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),s={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)}function d(){return e=n=null,f}return f.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(-.10925<=o&&o<-.02701&&-.135<=r&&r<-.0397?l:.04713<=o&&o<.11138&&-.03986<=r&&r<.051?c:u).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[u.stream(n=t),l.stream(t),c.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},f.precision=function(t){return arguments.length?(u.precision(t),l.precision(t),c.precision(t),d()):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),l.scale(t),c.scale(.7*t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var e=u.scale(),n=+t[0],r=+t[1];return o=u.translate(t).clipExtent([[n-.1352*e,r-.1091*e],[n+.117*e,r+.098*e]]).stream(s),i=l.translate([n-.0425*e,r-.005*e]).clipExtent([[n-.135*e+F,r-.1093*e+F],[n-.0397*e-F,r-.027*e-F]]).stream(s),a=c.translate(t).clipExtent([[n-.0399*e+F,r+.0471*e+F],[n+.051*e-F,r+.1114*e-F]]).stream(s),d()},f.fitExtent=function(t,e){return B(f,t,e)},f.fitSize=function(t,e){return L(f,t,e)},f.drawCompositionBorders=function(t){var e=u([126.01320483689143,41.621090310215585]),n=u([133.04304387025903,42.15087523707186]),r=u([133.3021766080688,37.43975444725098]),o=u([126.87889168628224,36.95488945159779]),i=u([132.9,29.8]),a=u([134,33]),l=u([139.3,33.2]),c=u([139.16,30.5]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),t.moveTo(i[0],i[1]),t.lineTo(a[0],a[1]),t.lineTo(l[0],l[1]),t.lineTo(c[0],c[1])},f.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},f.scale(2200)},t.geoMercatorEcuador=function(){var e,n,o,i,r,a=N.geoMercator().rotate([80,1.5]),l=N.geoMercator().rotate([90.73,1]),c={point:function(t,e){r=[t,e]}};function u(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)}function s(){return e=n=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(-.0676<=o&&o<-.026&&-.0857<=r&&r<-.0263?l:a).invert(t)},u.stream=function(t){return e&&n===t?e:(r=[a.stream(n=t),l.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},u.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),s()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],r=+t[1];return o=a.translate(t).clipExtent([[n-.0262*e,r-.0734*e],[n+.1741*e,r+.079*e]]).stream(c),i=l.translate([n-.06*e,r-.04*e]).clipExtent([[n-.0857*e+F,r-.0676*e+F],[n-.0263*e-F,r-.026*e-F]]).stream(c),s()},u.fitExtent=function(t,e){return B(u,t,e)},u.fitSize=function(t,e){return L(u,t,e)},u.drawCompositionBorders=function(t){var e=a([-84.9032,2.3757]),n=a([-81.5047,2.3708]),r=a([-81.5063,-.01]),o=a([-84.9086,-.005]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath()},u.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},u.scale(3500)},t.geoMercatorEquatorialGuinea=function(){var e,n,o,i,a,r,l=N.geoMercator().rotate([-9.5,-1.5]),c=N.geoMercator().rotate([-8.6,-3.5]),u=N.geoMercator().rotate([-5.6,1.45]),s={point:function(t,e){r=[t,e]}};function f(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)}function d(){return e=n=null,f}return f.invert=function(t){var e=l.scale(),n=l.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(-.02<=o&&o<0&&-.038<=r&&r<-.005?c:0<=o&&o<.02&&-.038<=r&&r<-.005?u:l).invert(t)},f.stream=function(t){return e&&n===t?e:(r=[l.stream(n=t),c.stream(t),u.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},f.precision=function(t){return arguments.length?(l.precision(t),c.precision(t),u.precision(t),d()):l.precision()},f.scale=function(t){return arguments.length?(l.scale(t),c.scale(1.5*t),u.scale(4*t),f.translate(l.translate())):l.scale()},f.translate=function(t){if(!arguments.length)return l.translate();var e=l.scale(),n=+t[0],r=+t[1];return o=l.translate(t).clipExtent([[n-.005*e,r-.02*e],[n+.038*e,r+.02*e]]).stream(s),i=c.translate([n-.025*e,r-.01*e]).clipExtent([[n-.038*e+F,r-.02*e+F],[n-.005*e-F,r+0*e-F]]).stream(s),a=u.translate([n-.025*e,r+.01*e]).clipExtent([[n-.038*e+F,r-0*e+F],[n-.005*e-F,r+.02*e-F]]).stream(s),d()},f.fitExtent=function(t,e){return B(f,t,e)},f.fitSize=function(t,e){return L(f,t,e)},f.drawCompositionBorders=function(t){var e,n,r,o;e=l([9.21327272751682,2.645820439454123]),n=l([11.679126293239872,2.644755519268689]),r=l([11.676845389029227,.35307824637606433]),o=l([9.213572917774014,.35414205204417754]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=l([7.320873711543669,2.64475551449975]),n=l([9.213272722738658,2.645820434679803]),r=l([9.213422896480349,1.4999812505283054]),o=l([7.322014760520787,1.4989168878985566]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),e=l([7.3220147605302905,1.4989168783492766]),n=l([9.213422896481598,1.499981240979021]),r=l([9.213572912999604,.354142056817247]),o=l([7.323154615739809,.353078251154504]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath()},f.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},f.scale(12e3)},t.geoMercatorMalaysia=function(){var e,n,o,i,r,a=N.geoMercator().center([105.25,4]),l=N.geoMercator().center([118.65,2.86]),c={point:function(t,e){r=[t,e]}};function u(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)}function s(){return e=n=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(-.0521<=o&&o<.0229&&-.0111<=r&&r<.1?l:a).invert(t)},u.stream=function(t){return e&&n===t?e:(r=[a.stream(n=t),l.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},u.precision=function(t){return arguments.length?(a.precision(t),l.precision(t),s()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),l.scale(.615*t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],r=+t[1];return o=a.translate(t).clipExtent([[n-.11*e,r-.0521*e],[n-.0111*e,r+.0521*e]]).stream(c),i=l.translate([n+.09*e,r-0*e]).clipExtent([[n-.0111*e+F,r-.0521*e+F],[n+.1*e-F,r+.024*e-F]]).stream(c),s()},u.fitExtent=function(t,e){return B(u,t,e)},u.fitSize=function(t,e){return L(u,t,e)},u.drawCompositionBorders=function(t){var e=a([106.3214,2.0228]),n=a([105.1843,2.3761]),r=a([104.2151,3.3618]),o=a([104.215,4.5651]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1])},u.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},u.scale(4800)},t.geoTransverseMercatorChile=function(){var e,n,o,i,a,l,r,p=N.geoTransverseMercator().rotate([72,37]),c=N.geoStereographic().rotate([72,0]),u=N.geoMercator().rotate([80,33.5]),s=N.geoMercator().rotate([110,25]),f={point:function(t,e){r=[t,e]}};function d(t){var e=t[0],n=t[1];return r=null,o.point(e,n),r||(i.point(e,n),r)||(a.point(e,n),r)||(l.point(e,n),r)}function h(){return e=n=null,d}return d.invert=function(t){var e=p.scale(),n=p.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(.2582<=o&&o<.32&&-.1036<=r&&r<-.087?c:-.01298<=o&&o<.0133&&-.11396<=r&&r<-.05944?u:.01539<=o&&o<.03911&&-.089<=r&&r<-.0588?s:p).invert(t)},d.stream=function(t){return e&&n===t?e:(r=[p.stream(n=t),c.stream(t),u.stream(t),s.stream(t)],o=r.length,e={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}});var r,o},d.precision=function(t){return arguments.length?(p.precision(t),c.precision(t),u.precision(t),s.precision(t),h()):p.precision()},d.scale=function(t){return arguments.length?(p.scale(t),c.scale(.15*t),u.scale(1.5*t),s.scale(1.5*t),d.translate(p.translate())):p.scale()},d.translate=function(t){if(!arguments.length)return p.translate();var e=p.scale(),n=+t[0],r=+t[1];return o=p.translate(t).clipExtent([[n-.059*e,r-.3835*e],[n+.4498*e,r+.3375*e]]).stream(f),i=c.translate([n-.087*e,r+.17*e]).clipExtent([[n-.1166*e+F,r+.2582*e+F],[n-.06*e-F,r+.32*e-F]]).stream(f),a=u.translate([n-.092*e,r-0*e]).clipExtent([[n-.114*e+F,r-.013*e+F],[n-.0594*e-F,r+.0133*e-F]]).stream(f),l=s.translate([n-.089*e,r-.0265*e]).clipExtent([[n-.089*e+F,r+.0154*e+F],[n-.0588*e-F,r+.0391*e-F]]).stream(f),h()},d.fitExtent=function(t,e){return B(d,t,e)},d.fitSize=function(t,e){return L(d,t,e)},d.drawCompositionBorders=function(t){var e=p([-82.6999,-51.3043]),n=p([-77.5442,-51.6631]),r=p([-78.0254,-55.186]),o=p([-83.6106,-54.7785]),i=p([-80.0638,-35.984]),a=p([-76.2153,-36.1811]),l=p([-76.2994,-37.6839]),c=p([-80.2231,-37.4757]),u=p([-78.442,-37.706]),s=p([-76.263,-37.8054]),f=p([-76.344,-39.1595]),d=p([-78.5638,-39.0559]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(o[0],o[1]),t.closePath(),t.moveTo(i[0],i[1]),t.lineTo(a[0],a[1]),t.lineTo(l[0],l[1]),t.lineTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.closePath(),t.moveTo(u[0],u[1]),t.lineTo(s[0],s[1]),t.lineTo(f[0],f[1]),t.lineTo(f[0],f[1]),t.lineTo(d[0],d[1]),t.closePath()},d.getCompositionBorders=function(){var t=P.path();return this.drawCompositionBorders(t),t.toString()},d.scale(700)},Object.defineProperty(t,"__esModule",{value:!0})}(e,vs,bh)}(ph={exports:{}},ph.exports),ph.exports),wh=(hh=yh)&&hh.__esModule&&Object.prototype.hasOwnProperty.call(hh,"default")?hh.default:hh,xh={"Albers (30° & 45°)":{p:Hu,parallels:[30,45]},"Albers USA":{p:Uu,fixed_bounds:[[172.49482,18],[-72,71.40767]]},August:{p:function(){return Ru($s).scale(66.1603)}},"Azimuthal Equidistant":{p:Vu},Aitoff:{p:function(){return Ru(Xs).scale(152.63)}},Baker:{p:function(){return Ru(Qs).scale(112.314)}},Boggs:{p:function(){return Ru(lf).scale(160.857)}},"Braun's Stereographic":{p:function(){return(t=df,e=0,n=qu(t),r=n(e),r.parallel=function(t){return arguments.length?n(e=t*Ys):e*Is},r).scale(124.75);var t,e,n,r}},Bromley:{p:function(){return Ru(uf).scale(152.63)}},"Craster Parabolic":{p:function(){return Ru(ff).scale(156.19)}},"Eckert I":{p:function(){return Ru(pf).scale(165.664)}},"Eckert II":{p:function(){return Ru(hf).scale(165.664)}},"Eckert III":{p:function(){return Ru(gf).scale(180.739)}},"Eckert IV":{p:function(){return Ru(mf).scale(180.739)}},"Eckert V":{p:function(){return Ru(vf).scale(173.044)}},"Eckert VI":{p:function(){return Ru(_f).scale(173.044)}},Equirectangular:{p:Ku},Eisenlohr:{p:function(){return Ru(yf).scale(62.5271)}},Fahey:{p:function(){return Ru(xf).scale(137.152)}},Foucaut:{p:function(){return Ru(Mf).scale(135.264)}},"Ginzburg IV":{p:function(){return Ru(kf).scale(149.995)}},"Ginzburg V":{p:function(){return Ru(Tf).scale(153.93)}},"Ginzburg VI":{p:function(){return Ru(Sf).scale(130.945)}},"Ginzburg VIII":{p:function(){return Ru(Cf).scale(131.747)}},"Ginzburg IX":{p:function(){return Ru(zf).scale(131.087)}},Gnomonic:{p:cs},Hammer:{p:function(){var e=2,n=qu(Ks),t=n(e);return t.coefficient=function(t){return arguments.length?n(e=+t):e},t.scale(169.529)}},"Kavrayskiy VII":{p:function(){return Ru(Af).scale(158.837)}},"McBryde–Thomas Flat-Polar Parabolic":{p:function(){return Ru(Bf).scale(164.859)}},"McBryde–Thomas Flat-Polar Quartic":{p:function(){return Ru(Lf).scale(188.209)}},"McBryde–Thomas Flat-Polar Sinusoidal":{p:function(){return Ru(Rf).scale(166.518)}},"Miller (modified Mercator)":{p:function(){return Ru(Nf).scale(108.318)}},Orthographic:{p:ps,clip_angle:90},Mollweide:{p:function(){return Ru(rf).scale(169.529)}},"Natural Earth I":{p:fs},"Natural Earth II":{p:function(){return Ru(qf).scale(175.295)}},"Portugal composite":{p:wh.geoConicConformalPortugal,fixed_bounds:[[-35,36.5],[-6.5,42]]},Robinson:{p:function(){return Ru(Zf).scale(152.63)}},Sinusoidal:{p:function(){return Ru(cf).scale(152.63)}},"Spain composite":{p:wh.geoConicConformalSpain,fixed_bounds:[[-19.207933,27.323],[3.863356,43.413049]]},Stereographic:{p:gs},"Wagner IV":{p:function(){return Ru(md).scale(176.84)}},"Wagner VI":{p:function(){return Ru(vd).scale(152.63)}},"Winkel Tripel":{p:function(){return Ru(_d).scale(158.837)}}},Mh=_s(),Eh=1/960,kh=.005,Th=.3,Sh=1,Ch=Object.freeze(["angle","center","clipAngle","rotate","parallels"]);function zh(t){return{width:t[1][0]-t[0][0],height:t[1][1]-t[0][1]}}function Ah(t,e){var n=zh(t);return e*Math.min(n.width,n.height)}function Nh(t,e){var n=zh(t);if(!e)return n.width/n.height;var r=2*Ah(t,e);return(n.width+r)/(n.height+r)}function Ph(){if(Mh("choropleth_data",kd),Mh("fixed_height",Flourish.fixed_height),Mh("window_height",window.innerHeight),Mh("projection_name",_.projection),Mh("width",O_.getPrimaryWidth()),Mh("pixel_ratio",window.devicePixelRatio),Mh("fit",_.fit),Mh("centering",_.centering),Mh("longitude",_.longitude),Mh("latitude",_.latitude),Mh("roll",_.roll),Mh("padding_decimal",_.padding/100),Mh("zoom",_.zoom),Mh("aspect",_.aspect),Mh("min_area",_.min_area),!Mh())return!1;var t,e,n=kd.properties.unprojected_feature_collection,r=xh[Mh.projection_name],o=!!r.fixed_bounds;if(t=r.p,e=t().precision(Th),Ch.forEach(function(t){e[t]||(e[t]=function(t){return void 0===t?null:this}.bind(e))}),e.center([0,0]).rotate([0,0,0]),gh=e,r.clip_angle&&gh.clipAngle(r.clip_angle),r.parallels&&gh.parallels(r.parallels),"advanced"===Mh.fit)"rotate"===Mh.centering&&gh.rotate([-Mh.longitude,-Mh.latitude,Mh.roll]);else if("world"===Mh.fit)gh.rotate([-Mh.longitude,0,0]);else{var i=Cl(n);gh.rotate([-i[0],r.clip_angle?-i[1]:0,0])}var a,l,c,u,s,f=Mu(gh),d={type:"Sphere"};o?(a=r.fixed_bounds,l=a[0][0],c=a[0][1],u=a[1][0],s=a[1][1],d={type:"Polygon",coordinates:[[[l,c],[l,s],[u,s],[u,c],[l,c]]]}):"map"===Mh.fit&&n.features.length&&(d=Mh.min_area?ah(n,Mh.min_area):n);var p,h=f.bounds(d),g=0;return o?p=Nh(h):(p="advanced"===Mh.fit&&Mh.aspect?Mh.aspect:Nh(h,Mh.padding_decimal),"world"===Mh.fit?g=Ah(h,Mh.padding_decimal):"map"===Mh.fit&&(g=Ah(h,kh))),vh=Flourish.fixed_height?(mh=Mh.width,Math.max(O_.getPrimaryHeight(),1)):(mh=Mh.width)/p,Sh=mh*Eh,_h=Mh.pixel_ratio,gh.fitExtent([[g,g],[mh-g,vh-g]],d),o||"advanced"!==Mh.fit||("center"===Mh.centering&&gh.center([Mh.longitude,Mh.latitude]).angle(Mh.roll),Mh.zoom&&gh.scale(gh.scale()*Mh.zoom)),!0}var Fh={value:function(){}};function Bh(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Lh(r)}function Lh(t){this._=t}function Rh(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function qh(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=Fh,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function jh(){an.preventDefault(),an.stopImmediatePropagation()}Lh.prototype=Bh.prototype={constructor:Lh,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=i[a]).type)o[n]=qh(o[n],t.name,e);else if(null==e)for(n in o)o[n]=qh(o[n],t.name,null);return this}for(;++a<l;)if((n=(t=i[a]).type)&&(n=Rh(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Lh(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var Oh,Dh,Hh=0,Uh=0,Ih=0,Yh=1e3,Gh=0,Wh=0,Vh=0,Xh="object"==typeof performance&&performance.now?performance:Date,$h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zh(){return Wh||($h(Jh),Wh=Xh.now()+Vh)}function Jh(){Wh=0}function Qh(){this._call=this._time=this._next=null}function Kh(t,e,n){var r=new Qh;return r.restart(t,e,n),r}function tg(){Wh=(Gh=Xh.now())+Vh,Hh=Uh=0;try{!function(){Zh(),++Hh;for(var t,e=Oh;e;)0<=(t=Wh-e._time)&&e._call.call(null,t),e=e._next;--Hh}()}finally{Hh=0,function(){var t,e,n=Oh,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Oh=e);Dh=t,ng(r)}(),Wh=0}}function eg(){var t=Xh.now(),e=t-Gh;Yh<e&&(Vh-=e,Gh=t)}function ng(t){Hh||(Uh&&(Uh=clearTimeout(Uh)),24<t-Wh?(t<1/0&&(Uh=setTimeout(tg,t-Xh.now()-Vh)),Ih&&(Ih=clearInterval(Ih))):(Ih||(Gh=Xh.now(),Ih=setInterval(eg,Yh)),Hh=1,$h(tg)))}function rg(e,n,t){var r=new Qh;return n=null==n?0:+n,r.restart(function(t){r.stop(),e(t+n)},n,t),r}Qh.prototype=Kh.prototype={constructor:Qh,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Zh():+n)+(null==e?0:+e),this._next||Dh===this||(Dh?Dh._next=this:Oh=this,Dh=this),this._call=t,this._time=n,ng()},stop:function(){this._call&&(this._call=null,this._time=1/0,ng())}};var og=Bh("start","end","cancel","interrupt"),ig=[],ag=0,lg=1,cg=2,ug=3,sg=4,fg=5,dg=6;function pg(t,e,n,r,o,i){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(i,a,l){var c,u=i.__transition;function s(t){var e,n,r,o;if(l.state!==lg)return d();for(e in u)if((o=u[e]).name===l.name){if(o.state===ug)return rg(s);o.state===sg?(o.state=dg,o.timer.stop(),o.on.call("interrupt",i,i.__data__,o.index,o.group),delete u[e]):+e<a&&(o.state=dg,o.timer.stop(),o.on.call("cancel",i,i.__data__,o.index,o.group),delete u[e])}if(rg(function(){l.state===ug&&(l.state=sg,l.timer.restart(f,l.delay,l.time),f(t))}),l.state=cg,l.on.call("start",i,i.__data__,l.index,l.group),l.state===cg){for(l.state=ug,c=new Array(r=l.tween.length),e=0,n=-1;e<r;++e)(o=l.tween[e].value.call(i,i.__data__,l.index,l.group))&&(c[++n]=o);c.length=n+1}}function f(t){for(var e=t<l.duration?l.ease.call(null,t/l.duration):(l.timer.restart(d),l.state=fg,1),n=-1,r=c.length;++n<r;)c[n].call(i,e);l.state===fg&&(l.on.call("end",i,i.__data__,l.index,l.group),d())}function d(){for(var t in l.state=dg,l.timer.stop(),delete u[a],u)return;delete i.__transition}(u[a]=l).timer=Kh(function(t){l.state=lg,l.timer.restart(s,l.delay,l.time),l.delay<=t&&s(t-l.delay)},0,l.time)}(t,n,{name:e,index:r,group:o,on:og,tween:ig,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ag})}function hg(t,e){var n=mg(t,e);if(n.state>ag)throw new Error("too late; already scheduled");return n}function gg(t,e){var n=mg(t,e);if(n.state>ug)throw new Error("too late; already running");return n}function mg(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vg(t,e){var n,r,o,i=t.__transition,a=!0;if(i){for(o in e=null==e?null:e+"",i)(n=i[o]).name===e?(r=n.state>cg&&n.state<fg,n.state=dg,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[o]):a=!1;a&&delete t.__transition}}function _g(t,e,n){var r=t._id;return t.each(function(){var t=gg(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return mg(t,r).value[e]}}function bg(t,e){var n;return("number"==typeof e?Ho:e instanceof Nt?jo:(n=Nt(e))?(e=n,jo):Yo)(t,e)}var yg=hn.prototype.constructor;function wg(t){return function(){this.style.removeProperty(t)}}var xg=0;function Mg(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Eg(){return++xg}var kg=hn.prototype;Mg.prototype=function(t){return hn().transition(t)}.prototype={constructor:Mg,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Fe(t));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var l,c,u=r[a],s=u.length,f=i[a]=new Array(s),d=0;d<s;++d)(l=u[d])&&(c=t.call(l,l.__data__,d,u))&&("__data__"in l&&(c.__data__=l.__data__),f[d]=c,pg(f[d],e,n,d,f,mg(l,n)));return new Mg(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Le(t));for(var r=this._groups,o=r.length,i=[],a=[],l=0;l<o;++l)for(var c,u=r[l],s=u.length,f=0;f<s;++f)if(c=u[f]){for(var d,p=t.call(c,c.__data__,f,u),h=mg(c,n),g=0,m=p.length;g<m;++g)(d=p[g])&&pg(d,e,n,g,p,h);i.push(p),a.push(c)}return new Mg(i,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o)for(var i,a=e[o],l=a.length,c=r[o]=[],u=0;u<l;++u)(i=a[u])&&t.call(i,i.__data__,u,a)&&c.push(i);return new Mg(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,i=Math.min(r,o),a=new Array(r),l=0;l<i;++l)for(var c,u=e[l],s=n[l],f=u.length,d=a[l]=new Array(f),p=0;p<f;++p)(c=u[p]||s[p])&&(d[p]=c);for(;l<r;++l)a[l]=e[l];return new Mg(a,this._parents,this._name,this._id)},selection:function(){return new yg(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Eg(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],c=l.length,u=0;u<c;++u)if(a=l[u]){var s=mg(a,e);pg(a,t,n,u,l,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Mg(r,this._parents,t,n)},call:kg.call,nodes:kg.nodes,node:kg.node,size:kg.size,empty:kg.empty,each:kg.each,on:function(t,e){var n,r,o,i,a,l,c=this._id;return arguments.length<2?mg(this.node(),c).on.on(t):this.each((n=c,o=e,l=((r=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})?hg:gg,function(){var t=l(this,n),e=t.on;e!==i&&(a=(i=e).copy()).on(r,o),t.on=a}))},attr:function(t,e){var n=Ae(t),r="transform"===n?ni:bg;return this.attrTween(t,"function"==typeof e?(n.local?function(r,o,i){var a,l,c;return function(){var t,e,n=i(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===a&&e===l?c:(l=e,c=o(a=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,o,i){var a,l,c;return function(){var t,e,n=i(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===a&&e===l?c:(l=e,c=o(a=t,n));this.removeAttribute(r)}})(n,r,_g(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var o,i,a=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===a?null:t===o?i:i=n(o=t,r)}}:function(e,n,r){var o,i,a=r+"";return function(){var t=this.getAttribute(e);return t===a?null:t===o?i:i=n(o=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Ae(t);return this.tween(n,(r.local?function(r,o){var i,a;function t(){var e,n,t=o.apply(this,arguments);return t!==a&&(i=(a=t)&&(e=r,n=t,function(t){this.setAttributeNS(e.space,e.local,n(t))})),i}return t._value=o,t}:function(r,o){var i,a;function t(){var e,n,t=o.apply(this,arguments);return t!==a&&(i=(a=t)&&(e=r,n=t,function(t){this.setAttribute(e,n(t))})),i}return t._value=o,t})(r,e))},style:function(t,e,n){var r,o,i,a,l,c,u,s,f,d,p,h,g,m,v,_,b,y,w,x,M,E,k,T,S,C="transform"==(t+="")?ei:bg;return null==e?this.styleTween(t,(M=t,E=C,function(){var t=Ye(this,M),e=(this.style.removeProperty(M),Ye(this,M));return t===e?null:t===k&&e===T?S:S=E(k=t,T=e)})).on("end.style."+t,wg(t)):"function"==typeof e?this.styleTween(t,(v=t,_=C,b=_g(this,"style."+t,e),function(){var t=Ye(this,v),e=b(this),n=e+"";return null==e&&(this.style.removeProperty(v),n=e=Ye(this,v)),t===n?null:t===y&&n===w?x:(w=n,x=_(y=t,e))})).each((u=this._id,m="end."+(g="style."+(s=t)),function(){var t=gg(this,u),e=t.on,n=null==t.value[g]?h||(h=wg(s)):void 0;e===f&&p===n||(d=(f=e).copy()).on(m,p=n),t.on=d})):this.styleTween(t,(r=t,o=C,i=e,c=i+"",function(){var t=Ye(this,r);return t===c?null:t===a?l:l=o(a=t,i)}),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(o,i,a){var l,c;function t(){var e,n,r,t=i.apply(this,arguments);return t!==c&&(l=(c=t)&&(e=o,n=t,r=a,function(t){this.style.setProperty(e,n(t),r)})),l}return t._value=i,t}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?(n=_g(this,"text",t),function(){var t=n(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,n},remove:function(){return this.on("end.remove",(n=this._id,function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,o=mg(this.node(),n).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==e?function(o,i){var a,l;return function(){var t=gg(this,o),e=t.tween;if(e!==a)for(var n=0,r=(l=a=e).length;n<r;++n)if(l[n].name===i){(l=l.slice()).splice(n,1);break}t.tween=l}}:function(i,a,l){var c,u;if("function"!=typeof l)throw new Error;return function(){var t=gg(this,i),e=t.tween;if(e!==c){u=(c=e).slice();for(var n={name:a,value:l},r=0,o=u.length;r<o;++r)if(u[r].name===a){u[r]=n;break}r===o&&u.push(n)}t.tween=u}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){hg(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){hg(this,t).delay=e}})(e,t)):mg(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){gg(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){gg(this,t).duration=e}})(e,t)):mg(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){gg(this,t).ease=e}}(e,t)):mg(this.node(),e).ease},end:function(){var o,i,a=this,l=a._id,c=a.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--c&&t()}};a.each(function(){var t=gg(this,l),e=t.on;e!==o&&((i=(o=e).copy())._.cancel.push(n),i._.interrupt.push(n),i._.end.push(r)),t.on=i})})}};var Tg={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Sg(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Tg.time=Zh(),Tg;return n}function Cg(t){return function(){return t}}function zg(t,e,n){this.target=t,this.type=e,this.transform=n}function Ag(t,e,n){this.k=t,this.x=e,this.y=n}hn.prototype.interrupt=function(t){return this.each(function(){vg(this,t)})},hn.prototype.transition=function(t){var e,n;t=t instanceof Mg?(e=t._id,t._name):(e=Eg(),(n=Tg).time=Zh(),null==t?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,l=r[i],c=l.length,u=0;u<c;++u)(a=l[u])&&pg(a,t,e,u,l,n||Sg(a,e));return new Mg(r,this._parents,t,e)},Ag.prototype={constructor:Ag,scale:function(t){return 1===t?this:new Ag(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Ag(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ng,Pg=new Ag(1,0,0);function Fg(){an.stopImmediatePropagation()}function Bg(){an.preventDefault(),an.stopImmediatePropagation()}function Lg(){return!an.button}function Rg(){var t,e,n=this;return e=n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,n.height.baseVal.value):(t=n.clientWidth,n.clientHeight),[[0,0],[t,e]]}function qg(){return this.__zoom||Pg}function jg(){return-an.deltaY*(an.deltaMode?120:1)/500}function Og(){return"ontouchstart"in this}function Dg(t,e,n){var r=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r<o?(r+o)/2:Math.min(0,r)||Math.max(0,o),i<a?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function Hg(){var p,c,u=Lg,s=Rg,h=Dg,o=jg,e=Og,i=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],a=250,f=ci,m=[],n=Bh("start","zoom","end"),l=500,d=150,v=0;function _(t){t.property("__zoom",qg).on("wheel.zoom",r).on("mousedown.zoom",k).on("dblclick.zoom",T).filter(e).on("touchstart.zoom",S).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(t,e){return(e=Math.max(i[0],Math.min(i[1],e)))===t.k?t:new Ag(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,o=e[1]-n[1]*t.k;return r===t.x&&o===t.y?t:new Ag(t.k,r,o)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,c,u){t.on("start.zoom",function(){M(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=M(this,t),e=s.apply(this,t),o=u||w(e),i=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),n=this.__zoom,a="function"==typeof c?c.apply(this,t):c,l=f(n.invert(o).concat(i/n.k),a.invert(o).concat(i/a.k));return function(t){if(1===t)t=a;else{var e=l(t),n=i/e[2];t=new Ag(n,o[0]-e[0]*n,o[1]-e[1]*n)}r.zoom(null,t)}})}function M(t,e){for(var n,r=0,o=m.length;r<o;++r)if((n=m[r]).that===t)return n;return new E(t,e)}function E(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=s.apply(t,e)}function r(){if(u.apply(this,arguments)){var t=M(this,arguments),e=this.__zoom,n=Math.max(i[0],Math.min(i[1],e.k*Math.pow(2,o.apply(this,arguments)))),r=_n(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],vg(this),t.start()}Bg(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},d),t.zoom("mouse",h(y(b(e,n),t.mouse[0],t.mouse[1]),t.extent,g))}}function k(){if(!c&&u.apply(this,arguments)){var t,e,n,o=M(this,arguments),i=gn(an.view).on("mousemove.zoom",function(){if(Bg(),!o.moved){var t=an.clientX-a,e=an.clientY-l;o.moved=v<t*t+e*e}o.zoom("mouse",h(y(o.that.__zoom,o.mouse[0]=_n(o.that),o.mouse[1]),o.extent,g))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),t=an.view,e=o.moved,n=t.document.documentElement,r=gn(t).on("dragstart.drag",null),e&&(r.on("click.drag",jh,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect),Bg(),o.end();var t,e,n,r},!0),r=_n(this),a=an.clientX,l=an.clientY;t=an.view,e=t.document.documentElement,n=gn(t).on("dragstart.drag",jh,!0),"onselectstart"in e?n.on("selectstart.drag",jh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none"),Fg(),o.mouse=[r,this.__zoom.invert(r)],vg(this),o.start()}}function T(){if(u.apply(this,arguments)){var t=this.__zoom,e=_n(this),n=t.invert(e),r=t.k*(an.shiftKey?.5:2),o=h(y(b(t,r),e,n),s.apply(this,arguments),g);Bg(),0<a?gn(this).transition().duration(a).call(x,o,e):gn(this).call(_.transform,o)}}function S(){if(u.apply(this,arguments)){var t,e,n,r,o=M(this,arguments),i=an.touches,a=i.length;for(Fg(),e=0;e<a;++e)r=[r=bn(this,i,(n=i[e]).identifier),this.__zoom.invert(r),n.identifier],o.touch0?o.touch1||(o.touch1=r):(o.touch0=r,t=!0);if(p&&(p=clearTimeout(p),!o.touch1))return o.end(),void((r=gn(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(p=setTimeout(function(){p=null},l),vg(this),o.start())}}function C(){if(m.length){var t,e,n,r,o=M(this,arguments),i=an.changedTouches,a=i.length;for(Bg(),p&&(p=clearTimeout(p)),t=0;t<a;++t)n=bn(this,i,(e=i[t]).identifier),o.touch0&&o.touch0[2]===e.identifier?o.touch0[0]=n:o.touch1&&o.touch1[2]===e.identifier&&(o.touch1[0]=n);if(e=o.that.__zoom,o.touch1){var l=o.touch0[0],c=o.touch0[1],u=o.touch1[0],s=o.touch1[1],f=(f=u[0]-l[0])*f+(f=u[1]-l[1])*f,d=(d=s[0]-c[0])*d+(d=s[1]-c[1])*d;e=b(e,Math.sqrt(f/d)),n=[(l[0]+u[0])/2,(l[1]+u[1])/2],r=[(c[0]+s[0])/2,(c[1]+s[1])/2]}else{if(!o.touch0)return;n=o.touch0[0],r=o.touch0[1]}o.zoom("touch",h(y(e,n,r),o.extent,g))}}function z(){var t,e,n=M(this,arguments),r=an.changedTouches,o=r.length;for(Fg(),c&&clearTimeout(c),c=setTimeout(function(){c=null},l),t=0;t<o;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}return _.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",qg),t!==n?x(t,e):n.interrupt().each(function(){M(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},_.scaleBy=function(t,e){_.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},_.scaleTo=function(t,i){_.transform(t,function(){var t=s.apply(this,arguments),e=this.__zoom,n=w(t),r=e.invert(n),o="function"==typeof i?i.apply(this,arguments):i;return h(y(b(e,o),n,r),t,g)})},_.translateBy=function(t,e,n){_.transform(t,function(){return h(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),s.apply(this,arguments),g)})},_.translateTo=function(t,r,o){_.transform(t,function(){var t=s.apply(this,arguments),e=this.__zoom,n=w(t);return h(Pg.translate(n[0],n[1]).scale(e.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof o?-o.apply(this,arguments):-o),t,g)})},E.prototype={start:function(){return 1==++this.active&&(this.index=m.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(m.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){!function(t,e,n,r){var o=an;t.sourceEvent=an,an=t;try{e.apply(n,r)}finally{an=o}}(new zg(_,t,this.that.__zoom),n.apply,n,[t,this.that,this.args])}},_.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:Cg(+t),_):o},_.filter=function(t){return arguments.length?(u="function"==typeof t?t:Cg(!!t),_):u},_.touchable=function(t){return arguments.length?(e="function"==typeof t?t:Cg(!!t),_):e},_.extent=function(t){return arguments.length?(s="function"==typeof t?t:Cg([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),_):s},_.scaleExtent=function(t){return arguments.length?(i[0]=+t[0],i[1]=+t[1],_):[i[0],i[1]]},_.translateExtent=function(t){return arguments.length?(g[0][0]=+t[0][0],g[1][0]=+t[1][0],g[0][1]=+t[0][1],g[1][1]=+t[1][1],_):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},_.constrain=function(t){return arguments.length?(h=t,_):h},_.duration=function(t){return arguments.length?(a=+t,_):a},_.interpolate=function(t){return arguments.length?(f=t,_):f},_.on=function(){var t=n.on.apply(n,arguments);return t===n?_:t},_.clickDistance=function(t){return arguments.length?(v=(t=+t)*t,_):Math.sqrt(v)},_}var Ug,Ig,Yg,Gg,Wg=!1,Vg=Pg,Xg=void 0,$g=1,Zg=0,Jg=_s(),Qg=1500;var Kg=1e-5;function tm(t,e){return e&&t.zoom===e.zoom&&Math.abs(t.lon-e.lon)<Kg&&Math.abs(t.lat-e.lat)<Kg}function em(t){var n=null,r=null,o=function(t){null===n&&(n=t);var e=t-n;(Zg=Math.max((Qg-e)/Qg,0))?r=requestAnimationFrame(o):n=r=null,sv()},e=function(t){var e;"touch"==(e=t)?Gg=_.zoom_message_touch:"key"==e&&(Gg=_.zoom_message_key.replace("{{KEY}}","MacIntel"===window.navigator.platform?"⌘":"Ctrl")),r||(Zg=1,r=requestAnimationFrame(o))},i=function(){cancelAnimationFrame(r),r=null,Zg=0};(Ng=Hg().scaleExtent([1,10]).filter(function(){if(_.zoom_on&&!(0<an.button||"touchstart"==an.type&&an.touches.length<2)){if("wheel"==an.type){if(!an.ctrlKey&&!an.metaKey)return void e("key");an.preventDefault()}return i(),!0}})).on("start",function(){i(),Wg=!0}).on("zoom",function(){Vg=an.transform;var t=gh.invert([(mh/2-Vg.x)/Vg.k,(vh/2-Vg.y)/Vg.k]);Xg={zoom:Vg.k,lon:t[0],lat:t[1]},tm(_.focus,Xg)||($g="linear"===Jg.mode?1:"sqrt"===Jg.mode?1/Math.sqrt(Vg.k):1/Vg.k,sv({zoom:!0}))}).on("end",function(){Wg=!1,Xg&&(_.focus={zoom:Xg.zoom,lon:Xg.lon,lat:Xg.lat},sv({zoom:!0}),fv())}),(Yg=gn(t).call(Ng).on("dblclick.zoom",null).style("touch-action","pan-y")).on("touchmove",function(){1==an.touches.length&&e("touch")}),Ug=document.createElement("canvas"),Ig=Ug.getContext("2d")}for(var nm,rm,om,im,am,lm,cm,um,sm,fm=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹÐ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],dm={},pm=0;pm<fm.length;pm++)for(var hm=fm[pm].letters,gm=0;gm<hm.length;gm++)dm[hm[gm]]=fm[pm].base;function mm(t,n){return!(!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length)&&t.every(function(t,e){return t===n[e]})}function vm(t,e){var n=Nt(t);return n&&Number.isFinite(e)&&(n.opacity=e),n?n.toString():null}function _m(t){return(e=t,e.replace(/[^\u0020-\u007E]/g,function(t){return dm[t]||t})).toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]/g,"");var e}function bm(t){return t*Vg.k+Vg.x}function ym(t){return t*Vg.k+Vg.y}function wm(t){return!!t&&(!(bm(t[0][0])>mh)&&(!(bm(t[1][0])<0)&&(!(ym(t[0][1])>vh)&&0<ym(t[1][1]))))}function xm(t,e){return t-e}function Mm(t){return t.sort(xm)}function Em(t){var e=t[0],n=t[t.length-1];return void 0===e?(e=0,n=2):void 0===n&&(n=(e-=1)+2),Gd().domain([e,n]).nice().domain()}function km(t){var e=_[t+"_color_space"],n=_[t+"_custom_min"],r=_[t+"_custom_max"];if("sequential"==t)return oh[e](n,r);var o=_.diverging_custom_mid;return function(t,e){for(var n=0,r=e.length-1,o=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(o,o=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return i[e](t-e)}}(oh[e],[n,o,r])}function Tm(t){"sequential"===_.map_numeric_type?function(t){var e=Em(Mm(t)),n=e.slice();null===_.underflow_value&&null===_.overflow_value||(null!==_.underflow_value&&null!==_.overflow_value&&_.underflow_value<_.overflow_value?(n[0]=_.underflow_value,n[1]=_.overflow_value):null===_.overflow_value?(n[0]=_.underflow_value,n[1]<=n[0]&&(n[1]=n[0]+2)):null===_.underflow_value&&(n[1]=_.overflow_value,n[0]>=n[1]&&(n[0]=n[1]-2)));var r=_.sequential_palette,o=Wd(rh["interpolate"+r]||km("sequential")).domain(_.reverse_scale_colors?n.slice().reverse():n);(nm=function(t){return isNaN(t)?null:vm(o(t),_.map_fill_opacity)}).domain=Object.freeze(n),nm.nice_domain=Object.freeze(e)}(t):function(t){var e,n=Em(Mm(t)),r=n.slice();null===_.underflow_value&&null===_.overflow_value&&null===_.midpoint_value||(null!==_.underflow_value&&null!==_.overflow_value&&_.underflow_value<_.overflow_value?(r[0]=_.underflow_value,r[1]=_.overflow_value,null!==_.midpoint_value&&_.midpoint_value>r[0]&&_.midpoint_value<r[1]&&(e=_.midpoint_value)):null!==_.underflow_value&&null===_.overflow_value?(r[0]=_.underflow_value,null!==_.midpoint_value&&_.midpoint_value>r[0]?(e=_.midpoint_value,r[1]=e+(e-r[0])):r[1]<=r[0]&&(r[1]=r[0]+2)):null===_.underflow_value&&null!==_.overflow_value?(r[1]=_.overflow_value,null!==_.midpoint_value&&_.midpoint_value<r[1]&&(e=_.midpoint_value,r[0]=e-(r[1]-e))):null===_.overflow_value&&null===_.underflow_value&&(e=_.midpoint_value,r[0]>=e&&(r[0]=e-1),r[1]<=e&&(r[1]=e+1))),void 0===e&&(e=(r[0]+r[1])/2);var o=_.diverging_palette,i=rh["interpolate"+o]||km("diverging"),a=[r[0],r[0]+2*(e-r[0])],l=[r[1]-2*(r[1]-e),r[1]];if(_.reverse_scale_colors){var c=a.reverse();a=l.reverse(),l=c}var u=Wd(i).domain(a),s=Wd(i).domain(l);(nm=function(t){return isNaN(t)?null:vm(t<=e?u(t):s(t),_.map_fill_opacity)}).domain=Object.freeze(r),nm.nice_domain=Object.freeze(n),nm.midpoint=e}(t)}function Sm(t){var e,n,r=Mm(t),o=Em(r),i=_.map_numeric_type,a="sequential"===i?_.sequential_palette:_.diverging_palette,l=[];"custom"===_.discrete_mode?e=(n=_.custom_thresholds.split(";").map(parseFloat).filter(function(t){return!isNaN(t)}).sort(xm)).length+1:(e=Math.floor(_.n_bins),n=[]);var c,u=function(t,e,n,r){for(var o,i=1/e,a=[],l=0;l<e;l++)a.push(l/e+i/2);var c=nh["scheme"+t];if(c&&c[e])o=c[e].slice();else{var u=rh["interpolate"+t]||km(r);o=a.map(u)}return n&&o.reverse(),{positions:a,colors:o}}(a,e,_.reverse_scale_colors,i);(c="fixed"===_.discrete_mode?function t(){var e,n=0,r=1,o=1,i=[.5],a=[0,1];function l(t){return t<=t?a[xo(i,t,0,o)]:e}function c(){var t=-1;for(i=new Array(o);++t<o;)i[t]=((t+1)*r-(t-o)*n)/(o+1);return l}return l.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],c()):[n,r]},l.range=function(t){return arguments.length?(o=(a=Ld.call(t)).length-1,c()):a.slice()},l.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,i[0]]:o<=e?[i[o-1],r]:[i[e-1],i[e]]},l.unknown=function(t){return arguments.length&&(e=t),l},l.thresholds=function(){return i.slice()},l.copy=function(){return t().domain([n,r]).range(a).unknown(e)},Pd.apply(Yd(l),arguments)}().domain(o):"quantile"===_.discrete_mode?function t(){var e,o=[],n=[],r=[];function i(){var t=0,e=Math.max(1,n.length);for(r=new Array(e-1);++t<e;)r[t-1]=No(o,t/e);return a}function a(t){return isNaN(t=+t)?e:n[xo(r,t)]}return a.invertExtent=function(t){var e=n.indexOf(t);return e<0?[NaN,NaN]:[0<e?r[e-1]:o[0],e<r.length?r[e]:o[o.length-1]]},a.domain=function(t){if(!arguments.length)return o.slice();o=[];for(var e,n=0,r=t.length;n<r;++n)null==(e=t[n])||isNaN(e=+e)||o.push(e);return o.sort(bo),i()},a.range=function(t){return arguments.length?(n=Ld.call(t),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return t().domain(o).range(n).unknown(e)},Pd.apply(a,arguments)}().domain(r):function t(){var e,n=[.5],r=[0,1],o=1;function i(t){return t<=t?r[xo(n,t,0,o)]:e}return i.domain=function(t){return arguments.length?(n=Ld.call(t),o=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(t){return arguments.length?(r=Ld.call(t),o=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return t().domain(n).range(r).unknown(e)},Pd.apply(i,arguments)}().domain(n)).range(u.colors),n.length||u.colors.forEach(function(t,e){e&&n.push(c.invertExtent(t)[0])}),n.forEach(function(t,e){e<n.length-1&&l.push((n[e+1]+t)/2)}),(nm=function(t){return isNaN(t)?null:vm(c(t),_.map_fill_opacity)}).domain=Object.freeze(o),nm.thresholds=Object.freeze(n),nm.centers=Object.freeze(l)}function Cm(t){var e,n;t?"continuous"===_.map_scale_type?Tm(t):"discrete"===_.map_scale_type?Sm(t):(e={},n=[],t.forEach(function(t){t&&void 0===e[t]&&(e[t]=!0,n.push(t))}),Y_.updateColors(n),(nm=Y_.find).domain=Object.freeze(n),nm.range=Object.freeze(n.map(function(t){return nm(t)}))):nm=null}function zm(){var t=null;if(!_.hovered_feature)return t;var e,n=_.hovered_feature.split("-"),r=n[0],o=n[1];return"points"===r?e=zd:"regions"===r&&(e=Td),e&&(t=e.get(o)||null),t}function Am(e){return function(t){return t>=e[0]&&t<=e[1]}}function Nm(){if(sm=!_.map_show||!nm||!_.choropleth_legend_show||"categorical"===_.map_scale_type)im.style("display","none");else{cm=window.devicePixelRatio;var n="markers"===_.legend_enhancement?20:10;im.style("display","inline-block");var t=Math.min(280,Math.round(.75*O_.getInnerWidth())),e=n+14;im.select("canvas").style("width",t+"px"),am.width=t*cm,am.height=e*cm,am.style.width=t+"px",am.style.height=e+"px";var r=(nm.nice_domain?nm.nice_domain:nm.domain).slice();null!==_.legend_min||null!==_.legend_max?null!==_.legend_min&&null!==_.legend_max?_.legend_min<_.legend_max&&(r=[_.legend_min,_.legend_max]):null!==_.legend_min?(r[0]=_.legend_min,r[1]<r[0]&&(r[1]=r[0]+2)):(r[1]=_.legend_max,r[0]>r[1]&&(r[0]=r[1]-2)):r[0]===r[1]&&(r[0]-=1,r[1]+=1);var o=Math.max(t-40,10);lm.drawImage(function(t,n,e){var r=document.createElement("canvas"),o=r.getContext("2d");n*=cm,e*=cm,r.width=n,r.height=e;for(var i=o.createLinearGradient(0,0,n,0),a=t[0],l=(t[1]-a)/n,c=[],u=0;u<=n;u++)c.push(nm(a+u*l));return c.forEach(function(t,e){t===c[e-1]&&t===c[e+1]||i.addColorStop(e/n,vm(t,_.map_fill_opacity))}),o.fillStyle=i,o.fillRect(0,0,n,e),r}(r,o,n),20*cm,0);var s=Gd().domain(r).range([20,20+o]);1!==cm&&lm.scale(cm,cm),lm.save();var i=zm();if(i&&i.properties.source===kd.properties.source){var a=i.properties.numeric_value[W_.index()],l=s(a);a>=r[0]&&a<=r[1]&&(lm.lineWidth=3,lm.strokeStyle=vm("white",.8),lm.beginPath(),lm.moveTo(l,0),lm.lineTo(l,n),lm.stroke(),lm.lineWidth=1,lm.strokeStyle="black",lm.beginPath(),lm.moveTo(l,0),lm.lineTo(l,n),lm.stroke())}if("markers"===_.legend_enhancement){var c="dark"===_.strip_style?"black":"white",u="dark"===_.strip_style?"white":"black",f=_.strip_marker_opacity;"auto"===_.strip_marker_opacity_type&&(f=Math.max(50/kd.features.length,.01)),lm.lineWidth=1,lm.fillStyle=c,lm.fillRect(20,0,o,.5*n),lm.strokeStyle=vm(u,f),kd.properties.values.forEach(function(t){if(!(t<r[0]||t>r[1])){var e=s(t);lm.beginPath(),lm.moveTo(e,.05*n),lm.lineTo(e,.45*n),lm.stroke()}})}lm.restore();var d="continuous"===_.map_scale_type?function(t){var e=Am(t),n=[];"diverging"===_.map_numeric_type&&e(nm.midpoint)&&n.push(nm.midpoint);var r=nm.domain;return e(r[0])&&n.push(r[0]),e(r[1])&&n.push(r[1]),t[0]!==r[0]&&n.push(t[0]),t[1]!==r[1]&&n.push(t[1]),n}(r):function(t){var e,n=Am(t);if("thresholds"===_.legend_labels)e=nm.thresholds.slice().filter(n),t[0]<e[0]&&e.push(t[0]),t[1]>e[e.length-1]&&e.push(t[1]);else if("centers"===_.legend_labels)if((e=nm.centers.slice().filter(n)).length){var r=nm.thresholds,o=r[0],i=r[r.length-1];o>t[0]&&e.push((t[0]+o)/2),i<t[1]&&e.push((i+t[1])/2)}else e.push((t[0]+t[1])/2);else e="nice"===_.legend_labels?Gd().domain(t).ticks(_.n_nice_ticks):_.legend_labels_custom.split(";").map(parseFloat);return e}(r);lm.textAlign="center",lm.textBaseline="top",lm.fillStyle=_.legend_color,lm.font="12px "+_.layout.body_font.name;var p,h,g,m=(p=[],h=Am([0,am.width]),g=U_(H_.getFormatterFunction()),function(t){var e=s(t);if(h(e)){var n=g(t),r=lm.measureText(n).width/2+1,o=e-r,i=e+r;if(h(o)&&h(i)){for(var a=0,l=p.length,c=0;c<l&&e>p[c].center;c++)a++;var u=a===l;if((0===a||!(p[a-1].right>o))&&(u||!(p[a].left<i)))return p.splice(a,0,{left:o,center:e,right:i}),{text:n,position:e}}}});d.forEach(function(t){var e=m(t);e&&lm.fillText(e.text,e.position,n)})}}function Pm(){!function(){var t=[];_.map_show&&nm&&"categorical"===_.map_scale_type&&_.choropleth_legend_show&&(t=nm.domain),100<t.length&&(t=[]);var e=om.selectAll(".series").data(t),n=e.enter().append("span").attr("class","series");n.append("span").attr("class","swatch"),n.append("span").attr("class","label"),e.exit().remove();var r=e.merge(n);um=0==r.size(),om.style("display",um?"none":""),r.select(".swatch").style("background",function(t){return nm(t)}),r.select(".label").style("color",_.legend_color).text(function(t){return t})}(),Nm(),rm.style("display",sm&&um?"none":null)}var Fm,Bm="@£%$$%$%@$^",Lm=!1,Rm=_.legend_interaction,qm="";var jm,Om=_s();function Dm(t){if(Om("points_data",Cd),Om("fill",_.point_fill),Om("opacity",_.point_opacity),Om("min_radius",_.point_min_radius<=_.point_max_radius?_.point_min_radius:0),Om("max_radius",_.point_max_radius),Om("default_radius",_.point_default_radius),Om("max_value",_.point_max_value||Cd.properties.max_value),Object.keys(_.point_categorical_colors).forEach(function(t){var e=_.point_categorical_colors[t];Array.isArray(e)?mm(Om[t],e)||Om(t,e.slice()):Om(t,e)}),!Om()&!t)return!1;var e,n,r;e=Cd.features.map(function(t){return t.properties.color_group}),n={},r=[],e.forEach(function(t){t&&void 0===n[t]&&(n[t]=!0,r.push(t))}),G_.updateColors(r),(Fm=G_.find).domain=Object.freeze(r),Fm.range=Object.freeze(r.map(function(t){return Fm(t)}));var o,i,a,l=Cd.properties.have_value,c=Cd.properties.have_color;l&&(o=Om.max_value,i=Om.min_radius,a=Om.max_radius,jm=function(t){var e=t/o;1<e&&(e=1);var n=Math.sqrt(e)*a;return n<i&&(n=i),n});var u=Om.fill,s=Om.default_radius,f=Cd.properties;f.fill_opacity=Om.opacity;var d=0;return Cd.features.forEach(function(t){var e=t.properties;e.fill_color=c?Fm(e.color_group):u,e.radius=l?jm(e.value):s,l&&e.value>d&&(d=e.value),e.filter_hide=_.filter[e.color_group]}),l&&(f.big_radius=Om.max_radius,Om.max_value?f.big_radius_value=Om.max_value:f.big_radius_value=d),!0}var Hm,Um,Im,Ym,Gm,Wm,Vm,Xm=.1;function $m(t){var e;"none"!==_.legend_interaction&&(e=t,_.filter[e]?delete _.filter[e]:_.filter[e]=!0,Lm=!0,fv())}function Zm(){!function(){var t=_.point_show&&_.legend_show?Fm.domain:[];100<t.length&&(t=[]);var e=Um.selectAll(".series").data(t),n=e.enter().append("span").attr("class","series").on("click",$m);n.append("span").attr("class","swatch"),n.append("span").attr("class","label"),e.exit().remove();var r=e.merge(n);Wm=0==r.size(),Um.style("display",Wm?"none":null),r.style("cursor","none"===_.legend_interaction?null:"pointer").style("opacity",function(t){return _.filter[t]?Xm:null}),r.select(".swatch").style("background",function(t){return Fm(t)}),r.select(".label").style("color",_.legend_color).text(function(t){return t})}(),function(){if(Vm=!(_.point_show&&_.scale_legend_show&&Cd.properties.have_value&&Cd.features.length))Im.style("display","none");else{var t=!_.zoom_on||1===Vg.k||"off"===_.zoom_scaling_mode;Im.style("visibility",t?null:"hidden");var e=Cd.properties,n=Gd().domain([e.big_radius_value/2,e.big_radius_value]).nice(),r=n.domain()[0],o=n.domain()[1],i=jm(r),a=jm(o);i===_.point_min_radius&&(r=Math.pow(_.point_min_radius/_.point_max_radius,2)*o),i*=Sh,a*=Sh,Im.style("display","inline-block");var l,c=I_(H_.getFormatterFunction());Gm.font="12px "+_.layout.body_font.name;var u=Gm.measureText(c(r)).width,s=Gm.measureText(c(o)).width;l=Math.ceil(2*i+2*a+1+4+u+s);var f=Flourish.fixed_height?28:Math.max(2.4*a,14);Ym.style.width=l+"px",Ym.style.height=f+"px",Ym.width=l*_h,Ym.height=f*_h,1!==_h&&Gm.scale(_h,_h);var d=0;Gm.fillStyle=vm(_.legend_color,1),Gm.textBaseline="middle",Gm.font="12px "+_.layout.body_font.name,Gm.fillText(c(r),d,f/2),d+=u+2+i,Gm.strokeStyle=vm(_.legend_color,.5),Gm.fillStyle="transparent",Gm.beginPath(),Gm.arc(d,f/2,i,0,2*Math.PI),Gm.stroke(),d+=i+1+a,Gm.beginPath(),Gm.arc(d,f/2,a,0,2*Math.PI),Gm.stroke(),d+=a+2,Gm.fillStyle=vm(_.legend_color,1),Gm.fillText(c(o),d,f/2)}}(),Hm.style("display",Vm&&Wm?"none":null)}var Jm=_s();function Qm(t){return!isNaN(t)}var Km=[],tv=_s();function ev(t){if(!(t.className.indexOf("search-item")<0)){var e=t.dataset.value;_.sticky_hover=!0,Kv(e)}}function nv(){if(40!=an.keyCode&&38!=an.keyCode&&9!=an.keyCode&&13!=an.keyCode){var t=an.target.value;if(t.length<2)ov([]);else{var e=new RegExp(_m(t));ov(Km.filter(function(t){return _m(t.name).match(e)}))}}}function rv(){var t,e,n=gn(".search-container .search-list");9==an.keyCode||13==an.keyCode?(t=n.select(".selected")).empty()||(ev(t.node()),this.blur()):40==an.keyCode?((t=n.select(".selected")).empty()||(e=t.node().nextSibling),e||(e=n.select(".search-item[data-value]").node()),n.selectAll(".selected").classed("selected",!1),gn(e).classed("selected",!0)):38==an.keyCode&&((t=n.select(".selected")).empty()||(e=t.node().previousSibling),e||(e=n.select(".search-item:last-child").node()),n.selectAll(".selected").classed("selected",!1),gn(e).classed("selected",!0))}function ov(t){var e=t.filter(function(t,e){return e<10});gn(".search-container .search-list").style("opacity",0<e.length?1:null).html("").selectAll(".search-item").data(e).enter().append("div").attr("class","search-item").attr("data-value",function(t){return t.source+"-"+t.index}).classed("selected",function(t,e){return 0==e}).append("p").html(function(t){return t.name})}function iv(t){if(tv("search_regions",_.map_show&&_.map_search&&kd.properties.have_name),tv("search_points",_.point_show&&_.point_search&&Cd.properties.have_name),tv()||t){Km=[];var e=tv.search_regions||tv.search_points;e&&(tv.search_regions&&kd.features.forEach(function(t){Km.push({name:t.properties.name,index:t.properties.index,source:t.properties.source})}),tv.search_points&&Cd.features.forEach(function(t){Km.push({name:t.properties.name,index:t.properties.index,source:t.properties.source})})),gn(".search-container").style("display",e?null:"none")}}var av,lv=Math.PI/180;function cv(){Cd.properties.scaling=Sh;var o=function(){var e=gh.clipAngle()*lv;if(!e)return null;var n=gh.invert([mh/2,vh/2]);return function(t){return!t.geometry||dc(n,t.properties.unprojected_feature.geometry.coordinates)>e}}();Cd.features.forEach(function(t){t.geometry=Df(t.properties.unprojected_feature,gh).geometry;var e=t.properties;if(e.projection_hide=o&&o(t),e.scaling=Sh,t.geometry){var n=t.geometry.coordinates,r=e.radius;e.bounds=[[n[0]-r,n[1]-r],[n[0]+r,n[1]+r]]}})}function uv(){!function(){kd.properties.scaling=Sh;var e=Mu();kd.features.forEach(function(t){t.geometry=Df(t.properties.unprojected_feature,gh).geometry,t.properties.scaling=Sh,t.properties.bounds=e.bounds(t.geometry)})}(),cv()}function sv(t){t=t||{},$v(jv),jv.style.width=mh+"px",jv.style.height=vh+"px",jv.style.marginTop=0,jv.style.marginBottom=0,Dv=jv.getBoundingClientRect(),Hv=Dv.left,Uv=Dv.top,function(t){var e=Wg?null:zm();if(!e||Wg)return Tv.hide(),Sv.hide();var o,n,r,i,a,l,c,u,s=e.properties,f=s.source;kv="points"==f?Sv:Tv,Av=document.querySelector("#flourish-popup-"+kv.popup.unique_id+" .flourish-popup-content"),Pv=Dv.left,Fv=Dv.top,Cv||(kv.html("<div></div>").point(0,0).draw(),Cv=document.querySelector("#flourish-popup-"+kv.popup.unique_id+" .flourish-popup-svg g path"),Av=document.querySelector("#flourish-popup-"+kv.popup.unique_id+" .flourish-popup-content"),Nv=.4*Cv.getBoundingClientRect().height,kv.hide(),Wv(),zv={bottom:{x:0,y:Nv},top:{x:0,y:-Nv},left:{x:-Nv,y:0},right:{x:Nv,y:0},bottomLeft:{x:-Nv,y:Nv},topLeft:{x:-Nv,y:-Nv},bottomRight:{x:Nv,y:Nv},topRight:{x:Nv,y:-Nv}}),"points"===f?(r=(n=e).geometry,i=n.properties,a=Pv+bm(r.coordinates[0]),l=Fv+ym(r.coordinates[1]),c=i.radius*(i.scaling||1)*Vg.k*$g,o={popup_points:{bottom:{x:a,y:l-c},top:{x:a,y:l+c},left:{x:a+c,y:l},right:{x:a-c,y:l},bottomLeft:{x:a+(u=c*Yv),y:l-u},topLeft:{x:a+u,y:l+u},bottomRight:{x:a-u,y:l-u},topRight:{x:a-u,y:l+u},middle:{x:a,y:l}}},Tv.hide()):(o=function(t,n){var r,o=Mu();if("Polygon"===t.geometry.type)r=t;else if(n&&t.properties.unprojected_feature.geometry.coordinates.some(function(t){var e=Gv(t);if(wc(e,gh.invert([n.x,n.y])))return r=Df(e,gh),!0}),!n||!r){var i=0;r=t.geometry.coordinates.map(Gv).reduce(function(t,e){var n=o.area(e);return i<n&&(i=n,t=e),t},null)}var e=Mu().bounds(r),a=bm(e[0][0]),l=bm(e[1][0]),c=ym(e[0][1]),u=ym(e[1][1]),s=(a+l)/2,f=(c+u)/2;return{popup_points:{bottom:{x:Pv+s,y:Fv+c},top:{x:Pv+s,y:Fv+u},left:{x:Pv+l,y:Fv+f},right:{x:Pv+a,y:Fv+f},bottomLeft:{x:Pv+l,y:Fv+c},topLeft:{x:Pv+l,y:Fv+u},bottomRight:{x:Pv+a,y:Fv+c},topRight:{x:Pv+a,y:Fv+u},middle:{x:Pv+s,y:Fv+f}},polygon:r}}(e,t),Sv.hide());var d=s.hide_popup_pointer;Tv.addColumnNames(Sd),Sv.addColumnNames(Ad);var p,h,g={name:s.name,value:s.value,metadata:s.metadata||[]},m={name:s.name,color:s.color_group,value:s.value,metadata:s.metadata||[]};if("points"==f?(p=m).value=I_(H_.getFormatterFunction())(p.value):(p=g).value.length&&"categorical"!==_.map_scale_type&&(p.value=p.value.map(function(t){var e=U_(H_.getFormatterFunction())(t);return isNaN(e)?t:e})),!Iv.some(function(t){var e=t.replace("Flexible",""),n=d?zv[e]:{x:0,y:0},r=o.popup_points[e];if(kv.directions([t]).point(r.x+n.x,r.y+n.y).draw(p),(h=Av.getBoundingClientRect()).left>Pv&&h.top>Fv&&h.right<Dv.right&&h.bottom<Dv.bottom)return!0})){var v=o.popup_points.middle;kv.directions(Iv.concat("bottom")).point(v.x,v.y).draw(p)}}(Xv),Jv(X_(t)),Jv($_(t)),Jv(J_(t)),Jv(Q_(t)),Jv(tb(t)),Jv(eb(t)),Jv(Zg?(Qv(Ug,!0,!1),Ig.textAlign="center",Ig.font=Math.min(mh,vh)/25+"px "+_.layout.body_font.name,Ig.globalAlpha=Zg,Ig.strokeStyle="white",Ig.strokeText(Gg,mh/2,vh/2),Ig.fillText(Gg,mh/2,vh/2),Ug):null)}function fv(){var t={};t.data=function(){var t=Nd("decimal_separator",_.localization.input_decimal_separator);if(Nd("choropleth_data",bs.choropleth)||t){var e=Ed();for(var n in kd=e.collection,Td=e.map,Sd={},bs.choropleth.column_names)"geometry"!=n&&(Sd[n]=bs.choropleth.column_names[n])}if(Nd("points_data",bs.points)||t){var r=xs();for(var n in Cd=r.collection,zd=r.map,Ad={},bs.points.column_names)"lat"!=n&&"lon"!=n&&(Ad[n]=bs.points.column_names[n])}return Nd()}();var e,n=function(){if(Rm!==_.legend_interaction&&Object.keys(_.filter).length)Lm=!0,_.filter={},Rm=_.legend_interaction;else{var t=Object.keys(_.filter).sort().join(Bm);qm!==t&&(Lm=!0,qm=t)}return!!Lm&&!(Lm=!1)}();e=bs.choropleth.column_names.value||[],W_.options(e).update(),t.choropleth=function(t){if(Jm("data",kd),Jm("fill_color",_.map_fill),Jm("fill_opacity",_.map_fill_opacity),Jm("stroke_width",_.map_show_stroke?_.map_stroke_width:0),Jm("stroke_color",_.map_stroke),Jm("stroke_opacity",_.map_stroke_opacity),Jm("missing_values",_.choropleth_missing_values),Jm("pattern_opacity",Jm.fill_opacity*_.missing_pattern_opacity),Jm("pattern_square_size",_.missing_pattern_size),Jm("pattern_first_color",_.missing_pattern_color_1),Jm("pattern_second_color",_.missing_pattern_color_2),Jm("scale_type",_.map_scale_type),Jm("numeric_type",_.map_numeric_type),Jm("sequential_palette",_.sequential_palette),Jm("diverging_palette",_.diverging_palette),Jm("reverse_scale_colors",_.reverse_scale_colors),Jm("sequential_custom_min",_.sequential_custom_min),Jm("sequential_custom_max",_.sequential_custom_max),Jm("sequential_color_space",_.sequential_color_space),Jm("diverging_custom_min",_.diverging_custom_min),Jm("diverging_custom_mid",_.diverging_custom_mid),Jm("diverging_custom_max",_.diverging_custom_max),Jm("diverging_color_space",_.diverging_color_space),Jm("region_index",W_.index()),Jm("legend_min",_.legend_min),Jm("legend_max",_.legend_max),Jm("underflow_value",_.underflow_value),Jm("midpoint_value",_.midpoint_value),Jm("overflow_value",_.overflow_value),Jm("discrete_mode",_.discrete_mode),Jm("n_bins",_.n_bins),Jm("custom_thresholds",_.custom_thresholds),Object.keys(_.map_categorical_colors).forEach(function(t){var e=_.map_categorical_colors[t];Array.isArray(e)?mm(Jm[t],e)||Jm(t,e.slice()):Jm(t,e)}),!Jm()&!t)return!1;var e,r=kd.properties.have_value,o="categorical"===Jm.scale_type?"value":"numeric_value";r&&(e=kd.features.reduce(function(e,t){return t.properties[o].forEach(function(t){e.push(t)}),e},[]),"numeric_value"===o&&(e=e.filter(Qm))),Cm(e),kd.properties=kd.properties||{};var n=kd.properties;e&&(n.values=e);var i=Jm.missing_values;return delete n.fill_color,r&&"fill"!==i?"pattern"===i&&(n.fill_color={opacity:Jm.pattern_opacity,square_size:Jm.pattern_square_size,first_color:Jm.pattern_first_color,second_color:Jm.pattern_second_color}):n.fill_color=Jm.fill_color,n.fill_opacity=Jm.fill_opacity,n.stroke_color=Jm.stroke_color,n.stroke_width=Jm.stroke_width,n.stroke_opacity=Jm.stroke_opacity,kd.features.forEach(function(t){var e=t.properties;if(e.display=!0,r){var n=nm(t.properties[o][Jm.region_index]);n?e.fill_color=n:delete e.fill_color,"hide"!==i||e.fill_color||(e.display=!1)}else e.fill_color=Jm.fill_color}),!0}(),t.points=Dm(n),iv(0<t.data),Zm(),Pm(),O_.update(),D_.update(),document.getElementById("fl-layout-legend").style.overflow=null,t.projection=Ph(),t.zoom=function(){var t=_.zoom_on?_.focus:{lon:null,lat:null,zoom:null},e=null!=t.lat&&null!=t.lon&&null!=t.zoom,n=!tm(t,Xg);if(Jg("projection",gh),Jg("width",mh),Jg("height",vh),Jg("zoom_on",_.zoom_on),Jg("mode",_.zoom_scaling_mode),(Jg()||n)&&e){var r=gh([t.lon,t.lat]),o=Pg.translate(mh/2-t.zoom*r[0],vh/2-t.zoom*r[1]).scale(t.zoom);return Ng.extent([[0,0],[mh,vh]]).translateExtent([[0,0],[mh,vh]]),Yg.transition().duration(n?1e3*_.zoom_animation_duration:0).call(Ng.transform,o),!0}return!1}(),(t.data||t.projection)&&uv(),function(){if((av=av||O_.getSection("primary").querySelector("div")).style.marginTop=null,av.style.marginBottom=null,Flourish.fixed_height){var t=O_.getPrimaryHeight()-vh;if(0<t){var e=t/2;av.style.marginTop=e+"px",av.style.marginBottom=e+"px"}}else O_.setHeight(vh)}(),sv(t)}var dv,pv,hv=25,gv={};function mv(t,e,n,r,o,i,a){var l=n-t/2-10,c=n+t/2+10,u=t/2+Math.min(0,l-o.left)+Math.max(0,c-o.right);return{pos:[u,a],shape:u-10<5?[-u,-15*i,Math.max(10,5-u),-10*i]:t-5<u+10?[Math.min(-10,t-u-5),-10*i,Math.min(10,t-u),-15*i]:[-10,-10*i,10,-10*i]}}function vv(t,e,n,r,o,i,a){var l=r-e/2-10,c=r+e/2+10,u=e/2+Math.min(0,l-o.top)+Math.max(0,c-o.bottom);return{pos:[a,u],shape:u-10<5?[-15*i,-u,-10*i,Math.max(10,5-u)]:e-5<u+10?[-10*i,Math.min(-10,e-u-5),-15*i,Math.min(10,e-u)]:[-10*i,-10,-10*i,10]}}function _v(t,e,n){var r,o=document.createElementNS("http://www.w3.org/2000/svg",t);if(e)for(r in e)o.setAttribute(r,e[r]);var i=o.style;if(n)for(r in n)i[r]=n[r];return o}gv.bottom=function(t,e){return{shape:[-10,-10,10,-10],pos:[t/2,e+10]}},gv.top=function(t,e){return{shape:[-10,10,10,10],pos:[t/2,-10]}},gv.left=function(t,e){return{shape:[10,10,10,-10],pos:[-10,e/2]}},gv.right=function(t,e){return{shape:[-10,10,-10,-10],pos:[t+10,e/2]}},gv.topLeft=function(t,e){return{shape:[15,10,10,15],pos:[-10,-10]}},gv.bottomLeft=function(t,e){return{shape:[15,-10,10,-15],pos:[-10,e+10]}},gv.topRight=function(t,e){return{shape:[-15,10,-10,15],pos:[t+10,-10]}},gv.bottomRight=function(t,e){return{shape:[-15,-10,-10,-15],pos:[t+10,e+10]}},gv.bottomFlexible=function(t,e,n,r,o){return mv(t,0,n,0,o,1,e+10)},gv.topFlexible=function(t,e,n,r,o){return mv(t,0,n,0,o,-1,-10)},gv.rightFlexible=function(t,e,n,r,o){return vv(0,e,0,r,o,1,t+10)},gv.leftFlexible=function(t,e,n,r,o){return vv(0,e,0,r,o,-1,-10)};var bv=1,yv={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function wv(){for(var t in this.unique_id=bv++,yv)this["_"+t]=yv[t];this.handlers={click:[]}}function xv(e){wv.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var Mv in yv)xv(Mv);function Ev(){return new wv}wv.prototype.point=function(t,e){if(void 0===t)return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},wv.prototype.directions=function(t){return void 0===t?this._directions:("string"==typeof t&&(t=[t]),this._directions=t.slice(),this)},wv.prototype.text=function(t){return this._html=t.replace(/[&<>]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[t]}),this},wv.prototype.on=function(t,e){if(!(t in this.handlers))throw new Error("Popup.on: No such event: "+t);return this.handlers[t].push(e),this},wv.prototype.fire=function(t,e){if(!(t in this.handlers))throw new Error("Popup.fire: No such event: "+t);for(var n=this.handlers[t],r=0;r<n.length;r++)n[r].call(this,e);return this},wv.prototype._getElement=function(){var e=this,t="flourish-popup-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-popup",n.id=t;var r=n.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",n.addEventListener("click",function(t){e.fire("click",t)},!1);var o=_v("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),i=_v("filter",{id:"dropshadow-"+e.unique_id,height:"130%"});i.appendChild(_v("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),i.appendChild(_v("feOffset",{dx:0,dy:2,result:"offsetblur"}));var a=_v("feComponentTransfer");a.appendChild(_v("feFuncA",{type:"linear",slope:.2})),i.appendChild(a);var l=_v("feMerge");i.appendChild(l),l.appendChild(_v("feMergeNode")),l.appendChild(_v("feMergeNode",{in:"SourceGraphic"})),o.appendChild(i);var c=_v("g",{filter:"url(#dropshadow-"+e.unique_id+")",fill:"white",stroke:"none"});c.appendChild(_v("rect",{x:hv,y:hv,rx:5})),c.appendChild(_v("path")),o.appendChild(c),n.appendChild(o);var u=document.createElement("div");u.className="flourish-popup-content",(r=u.style).position="absolute",r.top=r.left=hv+"px",r.padding="10px",n.appendChild(u),e._getConstrainer().appendChild(n)}return e._resizeConstrainer(),n},wv.prototype._getConstrainer=function(){return dv||((dv=document.createElement("div")).id="flourish-popup-constrainer",(pv=dv.style).overflow="hidden",pv.pointerEvents="none",pv.position="absolute",pv.left="0",pv.top="0",pv.margin="0",pv.padding="0",document.body.appendChild(dv),this._resizeConstrainer(),dv)},wv.prototype._resizeConstrainer=function(){var t=pv.display;pv.display="none",pv.width=document.documentElement.scrollWidth+"px",pv.height=document.documentElement.scrollHeight+"px",pv.display=t},wv.prototype.draw=function(){var t=this;if(t._point){var e=document.documentElement.getBoundingClientRect(),n=t._point[0],r=t._point[1],o=t._container.getBoundingClientRect();n<o.left?n=o.left:n>o.right&&(n=o.right),r<o.top?r=o.top:r>o.bottom&&(r=o.bottom);var i,a=n-e.left,l=r-e.top,c=t._getElement(),u=c.style,s=c.querySelector(".flourish-popup-svg"),f=s.querySelector("g"),d=f.querySelector("rect"),p=f.querySelector("path"),h=c.querySelector(".flourish-popup-content");u.display="block",h.style.maxWidth=(i=o,(t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?i.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(null!=t._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),i.width))+"px"),t._inner_html!=t._html&&(h.innerHTML=t._inner_html=t._html);for(var g,m,v=h.getBoundingClientRect();g=Math.ceil(v.width),m=Math.ceil(v.height),u.width=g+2*hv+"px",u.height=m+2*hv+"px",v=h.getBoundingClientRect(),g!=Math.ceil(v.width)||m!=Math.ceil(v.height););d.setAttribute("width",g),d.setAttribute("height",m),s.setAttribute("width",g+2*hv),s.setAttribute("height",m+2*hv);for(var _,b,y,w,x,M,E,k,T,S,C,z,A,N,P,F,B,L,R,q,j=hv-10,O=null,D=null,H=null,U=1/0,I=1/0,Y=0;Y<t._directions.length;Y++){var G=t._directions[Y],W=(y=g,w=m,x=n,M=r,E=o,k=gv[G](y,w,x,M,E),T=x-hv-k.pos[0],S=M-hv-k.pos[1],{left:T,top:S,right:T+y+2*hv,bottom:S+w+2*hv}),V=Math.max(0,Math.floor(o.left)-W.left-j)+Math.max(0,W.right-Math.ceil(o.right)-j),X=Math.max(0,Math.floor(o.top)-W.top-j)+Math.max(0,W.bottom-Math.ceil(o.bottom)-j);if(0==V&&0==X){O=G;break}(V<U||V==U&&X<_)&&(U=V,_=X,D=G),(X<I||X==I&&V<b)&&(I=X,b=V,H=G)}return G=O||("horizontal"==t._fallbackFit?D:"vertical"==t._fallbackFit?H:(console.warn("Popup: failed to point box of size ("+g+", "+m+") at ("+n+", "+r+") within ("+o.left+", "+o.top+", "+o.right+", "+o.bottom+")"),t._directions[0])),C=u,z=p,A=g,N=m,P=a,F=l,B=n,L=r,R=o,q=gv[G](A,N,B,L,R),C.left=P-hv-q.pos[0]+"px",C.top=F-hv-q.pos[1]+"px",z.setAttribute("d","M0,0L"+q.shape.join(",")+"Z"),z.setAttribute("transform","translate("+(q.pos[0]+hv)+","+(q.pos[1]+hv)+")"),t}console.error("Popup: cannot draw popup till point() has been specified")},wv.prototype.hide=function(){return this._getElement().style.display="none",this};var kv,Tv,Sv,Cv,zv,Av,Nv,Pv,Fv,Bv={show_popups:!0,text_color:"#333333",align:"left",font_size:12,fill_color:"#ffffff",opacity:1,padding:10,border_radius:3,show_pointer:!0,show_shadow:!0,is_custom:!(Ev.version="2.1.2"),style_popups:!1};function Lv(t){if("number"!=typeof t)return t;var e=Math.round(t*Math.pow(10,2))/100;return 4==Math.round(t).toString().length?e:rt(",")(e)}function Rv(t,e,n,r){for(var o in this._state=e,this._default_template=n,this._first_load=!0,this._title_binding=r||"id",Bv)null==e[o]&&(e[o]=Bv[o]);!function(){if(!document.querySelector("#popup-styles")){var t=document.createElement("style");t.id="popup-styles",t.type="text/css",t.innerHTML=".flourish-popup { pointer-events: none; }.flourish-popup .flourish-popup-content { pointer-events: auto; }.flourish-popup h1 { margin: 0; font-size: inherit; }.flourish-popup h2 { font-weight: normal; font-size: inherit; margin: 0; }.flourish-popup h2 .name { font-weight: bold; }.flourish-popup ul { padding: 0; margin: 0; }.flourish-popup li { font-size: inherit; list-style: none; }",document.head.appendChild(t)}}(),this.popup=Ev().container(t).directions(["bottom","left","right","top"]).point(0,0).draw().hide()}function qv(t,e,n,r){return new Rv(t,e,n,r)}Rv.prototype.addColumnNames=function(t){if(this._column_names=t,!this._state.custom_template&&this._first_load){for(var e in this._column_names)if(!Array.isArray(this._column_names[e])){var n=this._column_names[e];this._state.custom_template=n+": {{"+n+"}}";break}this._first_load=!1}},Rv.prototype.hide=function(){return this.popup.hide(),this},Rv.prototype.point=function(t,e){if(1==arguments.length){var n=t.getBoundingClientRect();t=n.left+n.width/2,e=n.top}return this.popup.point(t,e),this},Rv.prototype.html=function(t){return this.popup.html(t),this},Rv.prototype.updateStyle=function(){var t=this.popup._getElement(),e=t.querySelector(".flourish-popup-content");e.style.padding=this._state.padding+"px",e.style.textAlign=this._state.align;var n=t.querySelector(".flourish-popup-svg g");return n.style.fill=this._state.fill_color,n.style.opacity=this._state.opacity,0==this._state.show_shadow?n.removeAttribute("filter"):n.setAttribute("filter","url(#dropshadow-"+this.popup.unique_id+")"),n.querySelector("rect").setAttribute("rx",this._state.border_radius),n.querySelector("path").style.display=this._state.show_pointer?"block":"none",this},Rv.prototype.draw=function(o,t){if(this._state.show_popups){var i=this;if(this.updateStyle(),!arguments.length)return this.popup.draw(),t&&t(this.popup._getElement()),this;var n="<div style='color: "+this._state.text_color+"; font-size: "+this._state.font_size+"px; text-align:"+this._state.align+";'>";if(this._state.is_custom||this._default_template)!this._state.is_custom&&this._default_template?n+=this._default_template.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,function(t,n){var r;if(Array.isArray(i._column_names[n])){var e=i._column_names[n];if(0==e.length)return"";r="<ul>",e.forEach(function(t,e){r+="<li>"+t+": "+o[n][e]+"</li>"}),r+="</ul>"}else r=o[n];return void 0!==r?Lv(r):""}):n+=this._state.custom_template.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,function(t,n){var r;return Object.keys(i._column_names).some(function(t){if(Array.isArray(i._column_names[t])){var e=i._column_names[t].indexOf(n);if(0<=e)return r=o[t][e],!0}else if(i._column_names[t]==n)return r=o[t],!0}),void 0!==r?Lv(r):""});else{o[this._title_binding]&&(n+="<h1>"+o[this._title_binding]+"</h1>");var e={};for(var r in this._column_names){var a;if(r!=this._title_binding)if("metadata"==r){if(!Array.isArray(o.metadata))return;for(var l=0;l<o.metadata.length;l++)e[a=this._column_names.metadata[l]]||(e[a]=!0,n+="<h2><span class='name' data-binding='metadata'>"+a+"</span>: "+Lv(o.metadata[l])+"</h2>")}else{if(a=this._column_names[r],Array.isArray(a)){a.forEach(function(t,e){n+="<h2><span class='name' data-binding='"+r+"'>"+t+"</span>: "+Lv(o[r][e])+"</h2>"});continue}if(e[a])continue;e[a]=!0,n+="<h2><span class='name' data-binding='"+r+"'>"+a+"</span>: "+Lv(o[r])+"</h2>"}}n+="</div>"}return this.popup.html(n).draw(),t&&t(this.popup._getElement()),this}},Rv.prototype.directions=function(t){return this.popup.directions(t),this},Rv.prototype.container=function(t){return this.popup.container(t),this};var jv,Ov,Dv,Hv,Uv,Iv=["bottom","top","right","left","bottomLeft","topLeft","bottomRight","topRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],Yv=Math.sin(Math.PI/4);function Gv(t){return{type:"Feature",geometry:{type:"Polygon",coordinates:t}}}function Wv(){Av&&(Av.style.pointerEvents=_.sticky_hover?"auto":null)}var Vv=null,Xv=null;function $v(t){t.width=mh*_h,t.height=vh*_h}function Zv(t){var e=t.clientX-Hv,n=t.clientY-Uv,r=Vg.k;return{x:e,y:n,x_untransformed:(e-Vg.x)/r,y_untransformed:(n-Vg.y)/r}}function Jv(t){try{t&&Ov.drawImage(t,0,0)}catch(t){throw new Error("Something went wrong. It may be that your geometry uses projected coordinates. For this template to work you must use an unprojected (WGS84) GeoJSON file (with the points of polygons specified in decimal degrees).")}}function Qv(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=e),$v(t);var r=t.getContext("2d");e&&t.getContext("2d").scale(_h,_h),Vg&&n&&(r.translate(Vg.x,Vg.y),r.scale(Vg.k,Vg.k))}function Kv(t,e){t!==Vv&&(Xv=e,Vv=t,_.hovered_feature=Vv,Wv(),sv())}function t_(){var t=document.createElement("div");O_.getSection("primary").appendChild(t),jv=document.createElement("canvas"),t.appendChild(jv),Ov=jv.getContext("2d");var r,n=!1;jv.addEventListener("mousemove",function(t){if(!n&&!_.sticky_hover){var e=Zv(t);Kv(V_.getFeatureAtPixel(e),e)}},!1),jv.addEventListener("mouseout",function(){n||_.sticky_hover||Kv(null)},!1),jv.addEventListener("click",function(t){if(_.sticky_hover){var e=Zv(t),n=V_.getFeatureAtPixel(e);n!=Vv&&n||(_.sticky_hover=!1),Kv(n,e)}else Vv&&(_.sticky_hover=!0,Wv())}),jv.addEventListener("touchstart",function(t){n=!0,1==t.touches.length?r=setTimeout(function(){!function(t){r=null;var e=Zv(t),n=V_.getFeatureAtPixel(e);n!=Vv&&n||(_.sticky_hover=!1),Kv(n,e),_.sticky_hover=!0,Wv()}(t)},200):null!=r&&clearTimeout(r)}),em(t)}function e_(n,r){return function(t,e){return void 0!==e[n]?e[n]:void 0!==t[n]?t[n]:r}}function n_(i,t){var o,a,l,c,u,s,f;t=t||{},i.lineJoin="round",i.lineCap="round";var d,e,n,r,p,h,g=(d=Mu().context(i).pointRadius(function(){return(void 0!==o.radius?o.radius:1)*f*$g}),function(t,e,n){if(e||n){var r=o.path;r?(e&&i.fill(r),n&&i.stroke(r)):(i.beginPath(),d(t),e&&i.fill(),n&&i.stroke())}}),m=void 0===t.display||t.display,v=void 0!==t.fill_opacity?t.fill_opacity:1,_=void 0!==t.stroke_width?t.stroke_width:1,b=void 0!==t.stroke_opacity?t.stroke_opacity:1,y=t.scaling||1,w=function(t,e){if(!t)return null;if("object"!=typeof t)return t;var n=void 0===t.scale||t.scale?y:1,r=(void 0!==t.opacity?t.opacity:1)*e,o={first_color:vm(t.first_color||"#dddddd",r),second_color:vm(t.second_color||"#eeeeee",r),square_size:n*(t.square_size||5)};return function(t,e){var n=Math.max(e.square_size,1),r=2*n,o=document.createElement("canvas");o.width=r,o.height=r;var i=o.getContext("2d");return i.fillStyle=e.first_color,i.strokeStyle=e.first_color,i.fillRect(0,0,n,n),i.strokeRect(0,0,n,n),i.fillRect(n,n,n,n),i.strokeRect(n,n,n,n),i.fillStyle=e.second_color,i.strokeStyle=e.second_color,i.fillRect(0,n,n,n),i.strokeRect(0,n,n,n),i.fillRect(n,0,n,n),i.strokeRect(n,0,n,n),t.createPattern(o,"repeat")}(i,o)},x=w(t.fill_color,v),M=w(t.stroke_color,b),E=e_("display",m),k=e_("fill_color",x),T=e_("fill_opacity",v),S=e_("stroke_color",M),C=e_("stroke_opacity",b),z=e_("stroke_width",_),A=e_("scaling",y),N=function(){e===a&&n===l||(e=a,n=l,i.fillStyle="string"==typeof e?vm(e,n):e)},P=function(){r===c&&p===u||(r=c,p=u,i.strokeStyle=vm(r,p)),h!==s&&(h=s,i.lineWidth=h)};return function(t,e){if(o=t.properties||{},E(o,e=e||{})){a=k(o,e),l=T(o,e),c=S(o,e),u=C(o,e),f=A(o,e),s=f*z(o,e)*$g;var n=!(!a||!l),r=!!(c&&s&&u);n&&N(),r&&P(),g(t,n,r)}}}var r_,o_,i_,a_,l_,c_,u_,s_,f_,d_,p_,h_,g_,m_,v_,__,b_,y_,w_,x_,M_,E_,k_,T_,S_,C_,z_,A_,N_,P_,F_,B_,L_,R_,q_,j_,O_=function(t){for(var e in E=t,M)void 0===E[e]&&(E[e]=M[e]);return(i=document.createElement("style")).id="flourish-page-styles",i.type="text/css",document.head.appendChild(i),(l=document.createElement("link")).setAttribute("rel","stylesheet"),document.body.appendChild(l),C.wrapper=function(){var t=document.querySelector("#fl-layout-wrapper")||document.createElement("main");t.id="fl-layout-wrapper";var e=t.style;return e.display="flex",e.flexDirection="column",e.boxSizing="border-box",e.marginLeft="auto",e.marginRight="auto",t}(),S.forEach(function(t,e){C[t]=function(t,e){var n="fl-layout-"+t,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=e;var o=document.createElement("div");return o.className="fl-layout-inner",o.id=n,o.style.width="100%",o.style.overflow="hidden",o.style.position="relative",r.appendChild(o),C.wrapper.appendChild(r),{outer:r,inner:o}}(t,e)}),N("header").appendChild(function(){(n=document.createElement("header")).className="flourish-header";var t=document.createElement("hgroup");return r=document.createElement("h1"),o=document.createElement("h2"),c=document.createElement("p"),u=document.createElement("img"),n.appendChild(u),n.appendChild(t),t.appendChild(r),t.appendChild(o),n.appendChild(c),n}()),N("footer").appendChild(y()),C.primary.outer.style.overflow="hidden",C.controls.inner.style.overflow="",document.body.appendChild(C.wrapper),function(){var t=C.primary.outer;t.style.position="relative",(k=document.createElement("div")).id="fl-layout-overlay";var e=k.style;e.position="absolute",e.display="none",e.width="100%",e.height="100%",e.top=0,e.left=0,e.backgroundColor="rgb(200,200,200)",e.zIndex=999999,e.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(e=n.style).color="#333333",e.fontSize="1.5rem",e.paddingLeft="15%",e.paddingRight="15%",e.width="100%",e.boxSizing="border-box",e.position="absolute",e.top="50%",e.transform="translate(0, -50%)",e.margin="0",e.textAlign="center",k.appendChild(n),t.appendChild(k)}(),x(),{update:x,getWrapper:A,getSection:N,getOuterWidth:P,getInnerWidth:F,getOuterHeight:B,getInnerHeight:L,getPrimaryHeight:R,getPrimaryWidth:q,getDefaultPrimaryHeight:O,setHeight:U,setLegendPosition:I,showOverlay:Y,remToPx:G,getOverlay:W}}(_.layout),D_=function(t,l){var c;t||(t=document.body),l||(l={});var e={reload_enabled:!1,reload_time:60,message_font_size:.7,message_prefix:"Refreshing in ",message_suffix:" seconds",message_show:!0,progress_show:!1,progress_height:.2,progress_width:9,progress_color:"#dddddd",progress_color_inner:"#aaaaaa"};for(var n in e)l.hasOwnProperty[n]||(l[n]=e[n]);var r=document.createElement("div");r.className="flourish-reloader",t.appendChild(r);var o={};o.container=r;var i=Flourish.environment,u="live"===i;u&&window.location.search.match(/environment=story_player/)&&(u=!1);var s=u||"editor"===i||"sdk"===i,f=document.createElement("div");f.id="flourish-reloader-message",r.appendChild(f);var d=document.createElement("div");d.id="flourish-reloader-progress",d.style.marginRight="0.5em",d.style.borderRadius="0.33em",d.style.overflow="hidden",r.appendChild(d);var p,h=document.createElement("div");return h.style.height="100%",h.style.width="0%",d.appendChild(h),o.update=function(){var i=l.reload_enabled&&s;function a(t){var e=Math.round(l.reload_time*(1-t));f.innerHTML=l.message_show?l.message_prefix+e+l.message_suffix:"",h.style.width=100*t+"%"}r.style.display=i?"block":"none",h.style.background=l.progress_color_inner,f.style.fontSize=l.message_font_size+"rem",f.style.color=l.message_color,d.style.display=l.progress_show?"block":"none",d.style.width=l.progress_width+"rem",d.style.height=l.progress_height+"rem",d.style.background=l.progress_color,i&&(a(0),void 0!==c&&cancelAnimationFrame(c),c=requestAnimationFrame(function t(e){p||(p=e);var n=e-p,r=n/(1e3*l.reload_time),o=1<=r;o&&u?window.location.reload():(o&&(r=0,p+=n),a(r),i&&(c=requestAnimationFrame(t)))}))},o}(O_.getSection("footer"),_.reloader),H_=function(l){for(var t in st)void 0===l[t]&&(l[t]=st[t]);return{getParser:function(){return e=l.input_decimal_separator,n=new RegExp("[^-0-9eE"+e+"]","g"),function(t){return"number"==typeof t?t:""===t||void 0===t?NaN:parseFloat(t.replace(n,"").replace(e,"."))};var e,n},getFormatterFunction:function(){return t=l.output_separators,r=1<t.length,o=r?t.charAt(1):t.charAt(0),i=r?t.charAt(0):"",(a=at((e=o,n=i,{decimal:e,thousands:n,grouping:[3],currency:["",""]})).format).decimal=o,a.thousands=i,a;var t,e,n,r,o,i,a}}}(_.localization),U_=pt(_.map_formatting),I_=pt(_.point_formatting),Y_=Se(_.map_categorical_colors,!0),G_=Se(_.point_categorical_colors,!0),W_=function(o,e,n){var r={};e=e||Mn,n=n||En;var i=[],a=[],l=[],c=document.createElement("div");c.setAttribute("class","controls-container");var u,s,f,d,p,h,g=ao(r,o,c),m=(u=r,s=o,f={},d=gn(c).append("div").attr("class","button-container"),p=function(){var t="floating-buttons"!==s.control;d.style("width",t?s.width+"px":null).style("display",t?"table":"inline-block").classed("button-group",t)},h=function(){d.style("display","none")},f.show=p,f.hide=h,f.update=function(t){if(d.text(""),!u.n_options||-1===["grouped-buttons","floating-buttons","auto"].indexOf(s.control))return h(),f;var e=u.index(),n=d.selectAll(".button").data(t).enter().append("div");n.attr("class","button").classed("selected",function(t){return t.options_index===e}).text(function(t){return t.display}).attr("title",function(t){return t.display}).on("click",function(t){var e=t.options_index;e!==u.index()&&(u.index(e),n.classed("selected",function(t){return t.options_index===e}),u.trigger("change"))}),p()},f.checkFit=function(){if(d.classed("button-group")){p();var t=d.selectAll(".button").nodes().every(function(t){return t.offsetWidth>=t.scrollWidth});return t||h(),t}},f),v=Ni(r,o,c);for(var t in Pi)void 0===o[t]&&(o[t]=Pi[t]);var _=o._index_,b=function(){"auto"===o.control&&(m.checkFit()?g.hide():g.show())};r.appendTo=function(t){return function(){if(!xn&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=yn:e.appendChild(document.createTextNode(yn)),xn=!0}}(),gn(t).node().appendChild(c),g.appendedToDOM(),window.addEventListener("resize",b),b(),r},r.remove=function(){return c.parentElement&&c.parentElement.removeChild(c),g.removedFromDOM(),window.removeEventListener("resize",b),r},r.options=function(t){if(void 0===t)return i.slice();if(!Array.isArray(t))return r;var e=(i=t.slice()).length,n=y();return e?(null===n||e<=n)&&y(0):y(null),r},Object.defineProperty(r,"n_options",{get:function(){return i.length}});var y=function(t){return void 0===t?(o._is_playing_||(_=o._index_),_):(null===t||(e=t,i.length&&0<=e&&e<i.length)?(_=t,o._is_playing_||(o._index_=_)):console.warn("Invalid index, ignoring update call"),r);var e};return r.index=y,r.getSortedIndex=function(){var n,r=y();return o.sort?(a.some(function(t,e){if(t.options_index===r)return n=e,!0}),n):r},r.value=function(t){if(void 0===t)return i[y()];var e=i.indexOf(t);return-1!==e&&y(e),r},r.on=function(t,e){return"change"===t&&l.push(e.bind(r)),r},r.update=function(){var t;return a=function(t,e,n,r){var o="numeric"===e.type,i="temporal"===e.type,a=io;o?a=n:i&&(a=Gn(e.temporal_format));var l=t.map(function(t,e){var n=a(t);return{value:t,options_index:e,parsed:n,display:o&&!isNaN(n)?r(n):t}});return e.sort?l.sort(function(t,e){return n=t.parsed,r=e.parsed,n<r?-1:r<n?1:r<=n?0:NaN;var n,r}):l}(i,o,e(),n()),t=a,c.style.display=1<t.length&&"none"!==o.control?null:"none",c.style.width=o.width+"px",v.update(t),g.update(t),m.update(t),b(),r},r.trigger=function(t){var e,n;return"change"===t&&(e=y(),n=i[e],l.forEach(function(t){t(n,e)})),r},r._isPlaying_=function(t){if(void 0===t)return o._is_playing_;o._is_playing_=!!t,t||y(_)},r}(_.region_controls),V_=(r_=[],{createHoverLayer:function(){var r,o,e=document.createElement("canvas"),n=e.getContext("2d"),i={canvas:e,ctx:n};return r_.unshift(i),{addFeature:function(t){var e=++r;if(16777215<r)throw new RangeError("Too many items in hover layer");i.lookup_table[e]=t;var n=Lt((16711680&e)>>16,(65280&e)>>8,255&e).toString();o(t,{fill_color:n,stroke_color:n,fill_opacity:1,stroke_opacity:1}),i.image_data=null},format:function(t){Qv(e),i.lookup_table={},i.data=null,r=0,o=n_(n,t)},canvas:e}},getFeatureAtPixel:function(t){var n,e=Math.floor(t.x*_h),r=Math.floor(t.y*_h),o=Math.floor(mh*_h),i=Math.round(4*(r*o+e));if(r_.some(function(t){if(t.data||(t.data=t.ctx.getImageData(0,0,t.canvas.width,t.canvas.height).data),255===t.data[i+3]){var e=(t.data[i]<<16)+(t.data[i+1]<<8)+t.data[i+2];return n=t.lookup_table[e]}}),!n||!n.geometry)return null;if("Point"===n.geometry.type){var a=n.geometry.coordinates[0],l=n.geometry.coordinates[1],c=Math.hypot(a-t.x_untransformed,l-t.y_untransformed);n.properties.radius*(n.properties.scaling||1)<c&&(n=null)}else{var u=gh.invert([t.x_untransformed,t.y_untransformed]);wc(n.properties.unprojected_feature,u)||(n=null)}return n?n.properties.source+"-"+n.properties.index:null}}),X_=(o_=_,i_=document.createElement("canvas"),a_=i_.getContext("2d"),l_=_s(),c_=Mu().context(a_),function(t){var e=t.projection||t.zoom,n=l_("color",o_.globe_color);return(e||n)&&(Qv(i_),c_.projection(gh),a_.beginPath(),a_.fillStyle=l_.color,c_.context(a_),c_({type:"Sphere"}),a_.fill()),o_.globe_show?i_:null}),$_=(u_=_,s_=document.createElement("canvas"),f_=s_.getContext("2d"),d_=_s(),p_=Mu().context(f_),h_=Ec(),function(t){var e=t.projection||t.zoom;d_("color",u_.graticule_color),d_("width",u_.graticule_width*Sh*$g),d_("separation_longitude",u_.graticule_separation_longitude),d_("separation_latitude",u_.graticule_separation_latitude),d_("opacity",u_.graticule_opacity);var n=d_();return(e||n)&&(Qv(s_),p_.projection(gh),h_.step([d_.separation_longitude,d_.separation_latitude]).extent([[-180,-90],[180.000001,90.000001]]),f_.globalAlpha=d_.opacity,f_.strokeStyle=d_.color,f_.lineWidth=d_.width,f_.beginPath(),p_(h_()),f_.stroke()),u_.graticule_show?s_:null}),Z_=V_.createHoverLayer(),J_=(g_=_,m_=Z_,v_=document.createElement("canvas"),__=v_.getContext("2d"),b_=_s(),function(t){var e=t.projection||t.choropleth||t.zoom;b_("show",g_.map_show),b_("show_popup",g_.choropleth_popup.show_popups),b_("hide_popup_pointer",!g_.choropleth_popup.show_pointer),b_("shadow",g_.map_shadow),b_("shadow_offset_x",g_.map_shadow_offset_x*Sh*_h),b_("shadow_offset_y",-g_.map_shadow_offset_y*Sh*_h),b_("shadow_blur",g_.map_shadow_blur*Sh*_h),b_("shadow_color",vm(g_.map_shadow_color,g_.map_shadow_opacity));var n=b_();if(e||n){Qv(v_);var r=kd.properties;if(m_.format(r),!b_.show)return null;var o=!g_.map_show_stroke,i=n_(__,r),a=o?{stroke_width:1}:{};if(kd.features.forEach(function(t){var e=t.properties;wm(e.bounds)&&(o&&(a.stroke_color=e.fill_color||null),i(t,a),!Wg&&b_.show_popup&&(e.hide_popup_pointer=b_.hide_popup_pointer,m_.addFeature(t)))}),b_.shadow){var l=document.createElement("canvas");l.width=v_.width,l.height=v_.height;var c=l.getContext("2d");c.save(),c.shadowOffsetX=b_.shadow_offset_x,c.shadowOffsetY=b_.shadow_offset_y,c.shadowColor=b_.shadow_color,c.shadowBlur=b_.shadow_blur,c.drawImage(v_,0,0),c.restore();var u=document.createElement("canvas"),s=u.getContext("2d");Qv(u),Mu(gh,s)({type:"Sphere"}),s.fill(),c.globalCompositeOperation="destination-in",c.drawImage(u,0,0),__.globalCompositeOperation="copy",__.setTransform(1,0,0,1,0,0),__.drawImage(l,0,0)}}return b_.show?v_:null}),Q_=(y_=_,M_=document.createElement("canvas"),E_=M_.getContext("2d"),k_=_s(),function(t){k_("feature",zm()),k_("show_popup",y_.choropleth_popup.show_popups),x_=x_||kd.properties.source;var e=t.data||t.projection||t.choropleth||t.zoom,n=k_(),r=n_(E_),o=k_.feature&&k_.feature.properties.source===x_;return(e||n)&&(Qv(M_),w_=!(Wg||!o||!k_.show_popup&&!y_.sticky_hover||(r(k_.feature,{fill_color:null,stroke_color:y_.map_highlight_stroke_outer,stroke_width:y_.map_highlight_stroke_width,stroke_opacity:1}),r(k_.feature,{fill_color:null,stroke_color:y_.map_highlight_stroke_inner,stroke_width:y_.map_highlight_stroke_width/2,stroke_opacity:1}),0))),w_?M_:null}),K_=V_.createHoverLayer(),tb=(T_=_,S_=K_,z_=document.createElement("canvas"),A_=z_.getContext("2d"),N_=_s(),function(t){N_("show",T_.point_show),N_("sort",T_.point_sort),N_("show_popup",T_.point_popup.show_popups),N_("hide_popup_pointer",!T_.point_popup.show_pointer);var e=t.data||t.projection||t.points||t.zoom;if((t.data||t.points)&&(C_=null),N_()||e){Qv(z_);var n=N_.sort&&Cd.properties.have_value?C_||(C_={type:"Feature Collection",properties:Cd.properties,features:Cd.features.slice().sort(function(t,e){var n=t.properties,r=e.properties;return r.radius-n.radius||r.lon-n.lon||r.lat-n.lat})}):Cd,r=n.properties;if(S_.format(r),!N_.show)return null;var o=n_(A_,r);n.features.forEach(function(t){var e=t.properties;e.filter_hide||e.projection_hide||!wm(e.bounds)||(o(t),!Wg&&N_.show_popup&&(t.properties.hide_popup_pointer=N_.hide_popup_pointer,S_.addFeature(t)))})}return N_.show?z_:null}),eb=(P_=_,L_=document.createElement("canvas"),R_=L_.getContext("2d"),q_=_s(),function(t){q_("feature",zm()),q_("show_popup",P_.point_popup.show_popups),B_=B_||Cd.properties.source;var e=t.data||t.projection||t.points||t.zoom,n=q_(),r=n_(R_,{scaling:Sh}),o=q_.feature&&q_.feature.properties.source===B_;return(e||n)&&(Qv(L_),F_=!(Wg||!o||!q_.show_popup&&!P_.sticky_hover||(r(q_.feature,{fill_color:null,stroke_color:"white",stroke_width:2,stroke_opacity:1}),r(q_.feature,{fill_color:null,stroke_color:"black",stroke_width:1,stroke_opacity:1}),0))),F_?L_:null});function nb(){clearTimeout(j_),j_=setTimeout(fv,500)}return t.data=bs,t.draw=function(){var t;W_.appendTo(O_.getSection("controls")).on("change",fv),t_(),Tv=qv(O_.getSection("primary").querySelector("canvas"),_.choropleth_popup,null,"name"),Sv=qv(O_.getSection("primary").querySelector("canvas"),_.point_popup,null,"name"),Hm=gn(O_.getSection("legend")).append("div").attr("id","points-legend").attr("class","legend-group"),Im=Hm.append("div").attr("class","legend").attr("id","points-size-legend"),Um=Hm.append("div").attr("class","legend").attr("id","points-color-legend"),Ym=Im.append("canvas").node(),Gm=Ym.getContext("2d"),rm=gn(O_.getSection("legend")).append("div").attr("id","regions-legend").attr("class","legend-group"),om=rm.append("div").attr("id","categorical-legend").attr("class","legend"),im=rm.append("div").attr("id","numeric-legend").attr("class","legend"),am=document.createElement("canvas"),lm=am.getContext("2d"),im.node().appendChild(am),(t=gn(O_.getSection("legend")).append("div").attr("class","search-container")).append("input").attr("type","text").on("focus",function(){gn(this.parentElement).classed("active",!0),this.value="",this.setAttribute("data-type",""),this.setAttribute("data-value",""),nv()}).on("blur",function(){gn(this.parentElement).classed("active",!1)}).on("keydown",rv).on("keyup",nv),t.append("div").attr("class","search-list"),t.on("mousedown",function(){ev(an.target)}),window.addEventListener("resize",nb),fv()},t.state=_,t.update=fv,t}({});
//# sourceMappingURL=template.js.map
</script><script>
var path = document.location.href.match(/\/visualisation\/(\d+)/);
if (path) {
	path = path[0];
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga("create", "UA-44635456-19", "auto", { storage: "none" });
	ga("set", "transport", "beacon");
	ga("set", "dimension1", path.substr(1));
	ga("set", "dimension2", new Date().toISOString());
	ga("send", "pageview", path);
}</script><script src="https://public.flourish.studio/resources/v3/embedded.js"></script><script>
window.addEventListener("message", function(event) {

	var a = document.createElement("a");
	a.href = event.origin;
	var origin_okay = (a.hostname == window.location.hostname)
		|| window.location.hostname === "localhost"
		|| (a.hostname.match(/\.flourish\.local$/) && window.location.hostname.match(/\.flourish\.local$/))
		|| (a.hostname.match(/\.flourish\.net$/) && window.location.hostname.match(/\.flourish\.net$/))
		|| (a.hostname.match(/\.flourish\.rocks$/) && window.location.hostname.match(/\.flourish\.rocks$/))
		|| (a.hostname.match(/\.flourish\.studio$/) && window.location.hostname.match(/\.flourish\.studio$/));

	if (!origin_okay) return;

	var message = event.data;
	var port = event.ports[0];
	if (!port || typeof message !== "object" || message.sender !== "Flourish") return;
	var result = null;
	function assign(target, source) {
		for (var k in source) {
			if (source.hasOwnProperty(k)) target[k] = source[k];
		}
	}
	function deepAssign(target, source, is_destructive) {
		for (var k in source) {
			if (!source.hasOwnProperty(k)) continue;
			if (
				typeof target[k] === "object" && target[k] != null && !Array.isArray(target[k])
				&& typeof source[k] === "object" && source[k] != null && !Array.isArray(source[k])
			) {
				deepAssign(target[k], source[k], is_destructive);
			}
			else target[k] = source[k];
		}
		if (is_destructive) {
			for (var k in target) {
				if (target.hasOwnProperty(k) && !source.hasOwnProperty(k)) delete target[k];
			}
		}
	}
	try {
		var i, a;
		switch(message.method) {
			case "getState":
			result = window.template.state;
			if (message.argument) for (a = message.argument.split("."), i = 0; i < a.length; i++) {
				result = result[a[i]];
			}
			break;

			case "setState":
			deepAssign(window.template.state, message.argument);
			break;

			case "hasData":
			result = !!window.template.data;
			break;

			case "setData":
			assign(window.template.data, message.argument);
			break;

			case "getData":
			result = window.template.data;
			break;

			case "draw":
			window.template.draw();
			break;

			case "update":
			window.template.update();
			break;

			case "snapshot":
			result = window.snapshot(message.argument, port);
			break;

			case "setFixedHeight":
			if (window.Flourish) {
				window.Flourish.fixed_height = message.argument != null;
				window.Flourish.__container_height = message.argument;
				if (window.Flourish.checkHeight) window.Flourish.checkHeight();
			}
			break;

			case "sync":
			var spec = message.argument;
			if (spec.data) {
				assign(window.template.data, spec.data);
			}
			if (spec.state) {
				deepAssign(window.template.state, spec.state, spec.overwrite_state);
			}
			// only allow draw or update, not both
			if (spec.draw) {
				window.template.draw();
			}
			else if (spec.update) {
				window.template.update();
			}
			result = "success";
			break;
		}

		port.postMessage({result: result});
	}
	catch (e) {
		port.postMessage({error: e.message});
		throw e;
	}
}, false);
</script></body></html>